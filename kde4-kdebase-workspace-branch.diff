--- workspace/ksmserver/kcm/kcmsmserver.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/ksmserver/kcm/kcmsmserver.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -14,7 +14,7 @@
 Name[ar]=إدارة  الجلسات
 Name[ca]=Gestió de sessions
 Name[ca@valencia]=Gestió de sessions
-Name[cs]=Správa relací
+Name[cs]=Správa sezení
 Name[da]=Sessionshåndtering
 Name[de]=Sitzungsverwaltung
 Name[el]=Διαχείριση συνεδριών
@@ -29,6 +29,7 @@
 Name[gu]=સત્ર વ્યવસ્થાપન
 Name[hi]=सत्र प्रबंधक
 Name[hr]=Upravljanje sesijama
+Name[hu]=Munkamenetkezelés
 Name[ia]=Gestion de Session
 Name[id]=Manajemen Sesi
 Name[is]=Setustjórn
@@ -57,6 +58,7 @@
 Name[sr@latin]=Upravljanje sesijama
 Name[sv]=Sessionshantering
 Name[th]=จัดการวาระงาน
+Name[tr]=Oturum Yönetimi
 Name[uk]=Керування сеансами
 Name[x-test]=xxSession Managementxx
 Name[zh_CN]=会话管理
@@ -73,7 +75,7 @@
 Comment[br]=Kefluniañ ar merour an dalc'hioù hag an doare mont kuit
 Comment[ca]=Aquí podeu configurar el gestor de la sessió i la sortida
 Comment[ca@valencia]=Ací podeu configurar el gestor de la sessió i l'eixida
-Comment[cs]=Nastavení správce relace a odhlašování
+Comment[cs]=Nastavení správce sezení a odhlašování
 Comment[csb]=Kònfigùracëjô menedżera sesëji ë nastôwów wëlogòwaniô
 Comment[cy]=Ffurfweddu'r rheolydd sesiwn a gosodiadau allgofnodi
 Comment[da]=Indstil sessionshåndterig og log ud-indstillinger
--- workspace/kcontrol/dateandtime/helper.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/dateandtime/helper.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -58,7 +58,7 @@
   if(!config_file.exists()) {
     config_file.open(QIODevice::WriteOnly);
     config_file.close();
-    config_file.setPermissions(QFile::ReadOther);
+    config_file.setPermissions(QFile::ReadOwner | QFile::WriteOwner | QFile::ReadGroup | QFile::ReadOther);
   }
   KConfig _config(config_file.fileName(), KConfig::SimpleConfig);
   KConfigGroup config(&_config, "NTP");
--- workspace/kcontrol/kfontinst/kcmfontinst/fontinst.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/kfontinst/kcmfontinst/fontinst.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -106,7 +106,7 @@
 Comment[bg]=Инсталиране и преглед на шрифтове
 Comment[bn]=ফন্ট ইনস্টল, ব্যবস্থাপনা, এবং প্রাক্‌দর্শন করুন
 Comment[bn_IN]=ফন্ট ইনস্টল, পরিচালনা করুন ও পূর্বরূপ প্রদর্শন করুন
-Comment[ca]=Instal·lació , gestió i vista prèvia dels tipus de lletra
+Comment[ca]=Instal·lació, gestió i vista prèvia dels tipus de lletra
 Comment[ca@valencia]=Instal·lació , gestió i vista prèvia dels tipus de lletra
 Comment[cs]=Instalace, správa a náhled písem
 Comment[csb]=Instalacëjô, sprôwianié ë pòdzérk fòntów
--- workspace/kcontrol/autostart/autostart.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/autostart/autostart.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -160,6 +160,7 @@
 Comment[te]=KDE తో ఏ కార్యక్రమములు ప్రారంభంకావాలో నిర్వహించుటకు ఆకృతీకరణ సాధనం
 Comment[tg]=Асбоби танзимотӣ барои идоракунии барномаҳое, ки бо KDE оғоз мешаванд.
 Comment[th]=เครื่องมือปรับแต่งสำหรับกำหนดว่าจะให้โปรแกรมใดบ้างที่เริ่มทำงานอัตโนมัติพร้อมกับ KDE
+Comment[tr]=KDE oturumu açılırken başlatılacak uygulamaları yapılandırmanızı sağlayan bir araç.
 Comment[uk]=Керування програмами, які будуть запускатися разом з KDE.
 Comment[wa]=Ene usteye d' apontiaedje po decider kés programes enondèt å minme tins ki KDE.
 Comment[x-test]=xxA configuration tool for managing which programs start up with KDE.xx
--- workspace/kcontrol/desktoptheme/desktoptheme.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/desktoptheme/desktoptheme.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,6 +28,7 @@
 Name[gu]=ડેસ્કટોપ થીમ
 Name[hi]=डेस्कटॉप प्रसंग
 Name[hr]=Tema radne površine
+Name[hu]=Asztali téma
 Name[ia]=Thema de Scriptorio
 Name[id]=Tema Desktop
 Name[is]=Skjáborðsþema
@@ -57,6 +58,7 @@
 Name[sv]=Skrivbordstema
 Name[tg]=Мавзӯъи мизи корӣ
 Name[th]=ชุดตกแต่งพื้นที่ทำงาน
+Name[tr]=Masaüstü Teması
 Name[uk]=Тема стільниці
 Name[x-test]=xxDesktop Themexx
 Name[zh_CN]=桌面主题
@@ -79,6 +81,7 @@
 Comment[ga]=Saincheap an téama deisce
 Comment[hi]=डेस्कटॉप प्रसंग मनपसंद बनाएँ
 Comment[hr]=Prilagodba teme radne površine
+Comment[hu]=Az asztali téma testreszabása
 Comment[ia]=Personalisar le thema de scriptorio
 Comment[id]=Sesuaikan tema desktop
 Comment[is]=Sérsníða skjáborðsþema
@@ -108,6 +111,7 @@
 Comment[sv]=Anpassa skrivbordstemat
 Comment[tg]=Танзимоти мавзӯъи мизи корӣ
 Comment[th]=ปรับแก้ชุดตกแต่งพื้นที่ทำงานเอง
+Comment[tr]=Masaüstü temasını özelleştir
 Comment[uk]=Налаштування теми стільниці
 Comment[x-test]=xxCustomize the desktop themexx
 Comment[zh_CN]=定制桌面主题
--- workspace/kcontrol/keyboard/keyboard_hardware.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/keyboard_hardware.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -16,19 +16,22 @@
  *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
  */
 
-#include <config-workspace.h>
-#include <config-X11.h>
-
+#include <kdebug.h>
 #include <kconfiggroup.h>
 #include <ksharedconfig.h>
 
 #include <QtGui/QX11Info>
+#include <QtGui/QCursor>	// WTF? - otherwise compiler complains
 
 #include <X11/Xlib.h>
 
 #include <math.h>
 
+#include "x11_helper.h"
 
+// from numlockx.c
+extern "C" void numlockx_change_numlock_state(Display* dpy, int state);
+
 /*
  Originally comes from NumLockX http://dforce.sh.cvut.cz/~seli/en/numlockx
 
@@ -60,131 +63,56 @@
 #include <X11/XKBlib.h>
 #include <X11/keysym.h>
 
-/* the XKB stuff is based on code created by Oswald Buddenhagen <ossi@kde.org> */
-int xkb_init()
-    {
-    int xkb_opcode, xkb_event, xkb_error;
-    int xkb_lmaj = XkbMajorVersion;
-    int xkb_lmin = XkbMinorVersion;
-    return XkbLibraryVersion( &xkb_lmaj, &xkb_lmin )
-			&& XkbQueryExtension( QX11Info::display(), &xkb_opcode, &xkb_event, &xkb_error,
-			       &xkb_lmaj, &xkb_lmin );
-    }
 
-unsigned int xkb_mask_modifier( XkbDescPtr xkb, const char *name )
-    {
-    int i;
-    if( !xkb || !xkb->names )
-	return 0;
-    for( i = 0;
-         i < XkbNumVirtualMods;
-	 i++ )
-	{
-	char* modStr = XGetAtomName( xkb->dpy, xkb->names->vmods[i] );
-	if( modStr != NULL && strcmp(name, modStr) == 0 )
-	    {
-	    unsigned int mask;
-	    XkbVirtualModsToReal( xkb, 1 << i, &mask );
-	    return mask;
-	    }
-	}
-    return 0;
-    }
-
-unsigned int xkb_numlock_mask()
-    {
-    XkbDescPtr xkb;
-    if(( xkb = XkbGetKeyboard( QX11Info::display(), XkbAllComponentsMask, XkbUseCoreKbd )) != NULL )
-	{
-        unsigned int mask = xkb_mask_modifier( xkb, "NumLock" );
-        XkbFreeKeyboard( xkb, 0, True );
-        return mask;
-        }
-    return 0;
-    }
-
-int xkb_set_on()
-    {
-    unsigned int mask;
-    if( !xkb_init())
-        return 0;
-    mask = xkb_numlock_mask();
-    if( mask == 0 )
-        return 0;
-    XkbLockModifiers ( QX11Info::display(), XkbUseCoreKbd, mask, mask);
-    return 1;
-    }
-
-int xkb_set_off()
-    {
-    unsigned int mask;
-    if( !xkb_init())
-        return 0;
-    mask = xkb_numlock_mask();
-    if( mask == 0 )
-        return 0;
-    XkbLockModifiers ( QX11Info::display(), XkbUseCoreKbd, mask, 0);
-    return 1;
-    }
-
-void numlock_set_on()
-    {
-    if( xkb_set_on())
-        return;
-    }
-
-void numlock_set_off()
-    {
-    if( xkb_set_off())
-        return;
-    }
-
-void numlockx_change_numlock_state( bool set_P )
-    {
-    if( set_P )
-        numlock_set_on();
-    else
-        numlock_set_off();
-    }
-
 // This code is taken from xset utility from XFree 4.3 (http://www.xfree86.org/)
 
+static
 void set_repeatrate(int delay, double rate)
 {
-  Display* dpy = QX11Info::display();
-  int xkbmajor = XkbMajorVersion, xkbminor = XkbMinorVersion;
-  int xkbopcode, xkbevent, xkberror;
+	if( !X11Helper::xkbSupported(NULL) ) {
+		kError() << "Failed to set keyboard repeat rate: xkb is not supported";
+		return;
+	}
 
-  if (XkbQueryExtension(dpy, &xkbopcode, &xkbevent, &xkberror, &xkbmajor,
-				&xkbminor)) {
-     XkbDescPtr xkb = XkbAllocKeyboard();
-     if (xkb) {
-        int res = XkbGetControls(dpy, XkbRepeatKeysMask, xkb);
-        xkb->ctrls->repeat_delay = delay;
-        xkb->ctrls->repeat_interval = (int)floor(1000/rate + 0.5);
-        res = XkbSetControls(dpy, XkbRepeatKeysMask, xkb);
-        return;
-     }
-  }
+	XkbDescPtr xkb = XkbAllocKeyboard();
+	if (xkb) {
+		Display* dpy = QX11Info::display();
+		int res = XkbGetControls(dpy, XkbRepeatKeysMask, xkb);
+		xkb->ctrls->repeat_delay = delay;
+		xkb->ctrls->repeat_interval = (int)floor(1000/rate + 0.5);
+		res = XkbSetControls(dpy, XkbRepeatKeysMask, xkb);
+		return;
+	}
 }
 
-void init_keyboard_hardware()
+static
+void set_volume(int click_percent, bool auto_repeat_mode)
 {
-    KConfigGroup config(KSharedConfig::openConfig( "kcminputrc" ), "Keyboard");
-
 	XKeyboardState   kbd;
 	XKeyboardControl kbdc;
 
 	XGetKeyboardControl(QX11Info::display(), &kbd);
-	bool key = config.readEntry("KeyboardRepeating", true);
-	kbdc.key_click_percent = config.readEntry("ClickVolume", kbd.key_click_percent);
-	kbdc.auto_repeat_mode = (key ? AutoRepeatModeOn : AutoRepeatModeOff);
 
+	if( click_percent != -1 ) {
+		kbdc.key_click_percent = click_percent;
+	}
+	kbdc.auto_repeat_mode = (auto_repeat_mode ? AutoRepeatModeOn : AutoRepeatModeOff);
+
 	XChangeKeyboardControl(QX11Info::display(),
 						   KBKeyClickPercent | KBAutoRepeatMode,
 						   &kbdc);
+}
 
-	if( key ) {
+void init_keyboard_hardware()
+{
+    KConfigGroup config(KSharedConfig::openConfig( "kcminputrc" ), "Keyboard");
+
+	bool key_repeat = config.readEntry("KeyboardRepeating", true);
+	int click_percent = config.readEntry("ClickVolume", -1);
+
+	set_volume(click_percent, key_repeat);
+
+	if( key_repeat ) {
 		int delay_ = config.readEntry("RepeatDelay", 250);
 		double rate_ = config.readEntry("RepeatRate", 30.);
 		set_repeatrate(delay_, rate_);
@@ -192,6 +120,7 @@
 
 
 	int numlockState = config.readEntry( "NumLock", 2 );
-	if( numlockState != 2 )
-		numlockx_change_numlock_state( numlockState == 0 );
+	if( numlockState != 2 ) {
+		numlockx_change_numlock_state(QX11Info::display(), numlockState == 0 );
+	}
 }
--- workspace/kcontrol/keyboard/x11_helper.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/x11_helper.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -112,7 +112,7 @@
 	static QList<LayoutUnit> getLayoutsList();
 	static QStringList getLayoutsListAsString(const QList<LayoutUnit>& layoutsList);
 
-	enum FetchType { ALL, LAYOUTS_ONLY };
+	enum FetchType { ALL, LAYOUTS_ONLY, MODEL_ONLY };
 	static bool getGroupNames(Display* dpy, XkbConfig* xkbConfig, FetchType fetchType);
 
 private:
--- workspace/kcontrol/keyboard/xkb_helper.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/xkb_helper.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -24,7 +24,6 @@
 
 class XkbHelper {
 public:
-	static bool initializeKeyboardLayouts();
 	static bool initializeKeyboardLayouts(KeyboardConfig& config);
 
 //private:
--- workspace/kcontrol/keyboard/plasma_applet_keyboard.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/plasma_applet_keyboard.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -36,7 +36,7 @@
 Name[hu]=Billentyűzetkiosztás
 Name[ia]=Disposition de Claviero
 Name[id]=Tata Letak Papan Ketik
-Name[is]=Lyklaborð
+Name[is]=Lyklaborðsuppsetning
 Name[it]=Mappatura della tastiera
 Name[ja]=キーボード配列
 Name[ka]=კლავიატურის განლაგება
@@ -105,6 +105,7 @@
 Comment[hr]=Applet koji prikazuje i mijenja rasporede tipaka tipkovnice
 Comment[ia]=Applet pro monstrar e commutar layouts (dispositiones)
 Comment[id]=Applet untuk menampilkan dan mengganti tata letak
+Comment[is]=Smáforrrit til að birta og skipta um lyklaborðsuppsetningar
 Comment[it]=Programma per mostrare e cambiare le mappature
 Comment[ja]=配列を表示変更するアプレット
 Comment[kk]=Пернетақта сәйкестігін қорсетіп-ауыстыру апплеті
@@ -129,6 +130,7 @@
 Comment[sr@latin]=Aplet za prikaz i prebacivanje rasporeda
 Comment[sv]=Miniprogram för att visa och byta layout
 Comment[th]=แอพเพล็ตที่ใช้แสดงและเปลี่ยนผังแป้นพิมพ์
+Comment[tr]=Düzenleri göstermek ve değiştirmek için bir gereç
 Comment[uk]=Аплет для показу та перемикання розкладок
 Comment[x-test]=xxApplet to display and switch layoutsxx
 Comment[zh_CN]=用于显示并切换布局的小程序
--- workspace/kcontrol/keyboard/flags.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/flags.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -184,7 +184,7 @@
 //	p.drawText(pm.rect(), Qt::AlignCenter | Qt::AlignHCenter, layoutText);
 //	QIcon icon(pm);
 
-	QPixmap pixmap = Utils::shadowText(layoutText, font, Qt::black, Qt::white, QPoint(), 2);
+	QPixmap pixmap = Utils::shadowText(layoutText, font, Qt::black, Qt::white, QPoint(), 4);
 	QIcon icon(pixmap);
 	iconOrTextMap[ key ] = icon;
 
--- workspace/kcontrol/keyboard/CMakeLists.txt	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/CMakeLists.txt	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
     xkb_helper.cpp
     keyboard_config.cpp
     keyboard_hardware.cpp
+    numlockx.c
     bindings.cpp
     utils.cpp
 # next are temporary for sys tray UI
@@ -35,6 +36,10 @@
  	${QT_QTXML_LIBRARY} ${X11_Xkbfile_LIB}
  )
 
+if(X11_XTest_FOUND)
+  target_link_libraries(kded_keyboard ${X11_XTest_LIB})
+endif(X11_XTest_FOUND)
+
 if(XiGetDevicePresence_FOUND)
   target_link_libraries(kded_keyboard ${X11_Xinput_LIB})
 endif(XiGetDevicePresence_FOUND)
--- workspace/kcontrol/keyboard/numlockx.c	(.../tags/KDE/4.5.1/kdebase)	(wersja 0)
+++ workspace/kcontrol/keyboard/numlockx.c	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -0,0 +1,303 @@
+/****************************************************************************
+
+ NumLockX
+
+ $Id$
+
+ Copyright (C) 2000-2001 Lubos Lunak        <l.lunak@kde.org>
+ Copyright (C) 2001      Oswald Buddenhagen <ossi@kde.org>
+
+Permission is hereby granted, free of charge, to any person obtaining a
+copy of this software and associated documentation files (the "Software"),
+to deal in the Software without restriction, including without limitation
+the rights to use, copy, modify, merge, publish, distribute, sublicense,
+and/or sell copies of the Software, and to permit persons to whom the
+Software is furnished to do so, subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in
+all copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+DEALINGS IN THE SOFTWARE.
+
+****************************************************************************/
+
+#include <config-X11.h>
+
+#include <string.h>
+
+#include <X11/Xlib.h>
+
+#ifdef HAVE_XTEST
+#include <X11/extensions/XTest.h>
+#endif
+
+#ifdef HAVE_XKB
+#include <X11/XKBlib.h>
+#endif
+
+#include <X11/keysym.h>
+
+static
+Display* dpy;
+
+/* the XKB stuff is based on code created by Oswald Buddenhagen <ossi@kde.org> */
+#ifdef HAVE_XKB
+static
+int xkb_init()
+    {
+    int xkb_opcode, xkb_event, xkb_error;
+    int xkb_lmaj = XkbMajorVersion;
+    int xkb_lmin = XkbMinorVersion;
+    return XkbLibraryVersion( &xkb_lmaj, &xkb_lmin )
+        && XkbQueryExtension( dpy, &xkb_opcode, &xkb_event, &xkb_error,
+			       &xkb_lmaj, &xkb_lmin );
+    }
+
+static
+unsigned int xkb_mask_modifier( XkbDescPtr xkb, const char *name )
+    {
+    int i;
+    if( !xkb || !xkb->names )
+	return 0;
+    for( i = 0;
+         i < XkbNumVirtualMods;
+	 i++ )
+	{
+	char* modStr = XGetAtomName( xkb->dpy, xkb->names->vmods[i] );
+	if( modStr != NULL && strcmp(name, modStr) == 0 )
+	    {
+	    unsigned int mask;
+	    XkbVirtualModsToReal( xkb, 1 << i, &mask );
+	    return mask;
+	    }
+	}
+    return 0;
+    }
+
+static
+unsigned int xkb_numlock_mask()
+    {
+    XkbDescPtr xkb;
+    if(( xkb = XkbGetKeyboard( dpy, XkbAllComponentsMask, XkbUseCoreKbd )) != NULL )
+	{
+        unsigned int mask = xkb_mask_modifier( xkb, "NumLock" );
+        XkbFreeKeyboard( xkb, 0, True );
+        return mask;
+        }
+    return 0;
+    }
+
+static
+int xkb_set_on()
+    {
+    unsigned int mask;
+    if( !xkb_init())
+        return 0;
+    mask = xkb_numlock_mask();
+    if( mask == 0 )
+        return 0;
+    XkbLockModifiers ( dpy, XkbUseCoreKbd, mask, mask);
+    return 1;
+    }
+
+static
+int xkb_set_off()
+    {
+    unsigned int mask;
+    if( !xkb_init())
+        return 0;
+    mask = xkb_numlock_mask();
+    if( mask == 0 )
+        return 0;
+    XkbLockModifiers ( dpy, XkbUseCoreKbd, mask, 0);
+    return 1;
+    }
+
+#ifdef NUMLOCKX_STANDALONE
+static
+int xkb_toggle()
+    {
+    unsigned int mask;
+    unsigned int numlockState;
+    XkbStateRec xkbState;
+    if( !xkb_init())
+        return 0;
+    mask = xkb_numlock_mask();
+    if( mask == 0 )
+        return 0;
+    XkbGetState( dpy, XkbUseCoreKbd, &xkbState);
+    numlockState = xkbState.locked_mods & mask;
+    if (numlockState)
+        XkbLockModifiers ( dpy, XkbUseCoreKbd, mask, 0);
+    else
+        XkbLockModifiers ( dpy, XkbUseCoreKbd, mask, mask);
+    return 1;
+    }
+#endif
+
+#endif
+
+#ifdef HAVE_XTEST
+static
+int xtest_get_numlock_state()
+    {
+    int i;
+    int numlock_mask = 0;
+    Window dummy1, dummy2;
+    int dummy3, dummy4, dummy5, dummy6;
+    unsigned int mask;
+    XModifierKeymap* map = XGetModifierMapping( dpy );
+    KeyCode numlock_keycode = XKeysymToKeycode( dpy, XK_Num_Lock );
+    if( numlock_keycode == NoSymbol )
+        return 0;
+    for( i = 0;
+         i < 8;
+         ++i )
+        {
+	if( map->modifiermap[ map->max_keypermod * i ] == numlock_keycode )
+		numlock_mask = 1 << i;
+	}
+    XQueryPointer( dpy, DefaultRootWindow( dpy ), &dummy1, &dummy2,
+        &dummy3, &dummy4, &dummy5, &dummy6, &mask );
+    XFreeModifiermap( map );
+    return mask & numlock_mask;
+    }
+
+static
+void xtest_change_numlock()
+    {
+    XTestFakeKeyEvent( dpy, XKeysymToKeycode( dpy, XK_Num_Lock ), True, CurrentTime );
+    XTestFakeKeyEvent( dpy, XKeysymToKeycode( dpy, XK_Num_Lock ), False, CurrentTime );
+    }
+
+static
+void xtest_set_on()
+    {
+    if( !xtest_get_numlock_state())
+        xtest_change_numlock();
+    }
+
+static
+void xtest_set_off()
+    {
+    if( xtest_get_numlock_state())
+        xtest_change_numlock();
+    }
+
+#ifdef NUMLOCKX_STANDALONE
+static
+void xtest_toggle()
+    {
+    xtest_change_numlock();
+    }
+#endif
+
+#endif
+
+static
+void numlock_set_on()
+    {
+#ifdef HAVE_XKB
+    if( xkb_set_on())
+        return;
+#endif
+#ifdef HAVE_XTEST
+    xtest_set_on();
+#endif
+    }
+
+static
+void numlock_set_off()
+    {
+#ifdef HAVE_XKB
+    if( xkb_set_off())
+        return;
+#endif
+#ifdef HAVE_XTEST
+    xtest_set_off();
+#endif
+    }
+
+
+#ifndef NUMLOCKX_STANDALONE
+
+void numlockx_change_numlock_state(Display* dpy_, int state)
+{
+#ifndef HAVE_XTEST
+	#warning "XTEST extension not found - numlock setting may not work reliably"
+#endif
+
+	dpy = dpy_;
+    if( state ) {
+    	numlock_set_on();
+    }
+    else {
+    	numlock_set_off();
+    }
+}
+
+#else
+
+static
+void numlock_toggle()
+    {
+#ifdef HAVE_XKB
+    if( xkb_toggle())
+        return;
+#endif
+#ifdef HAVE_XTEST
+    xtest_toggle();
+#endif
+    }
+
+void usage( const char* argv0 )
+    {
+    printf( "NumLockX " VERSION "\n"
+        "(C) 2000-2001 Lubos Lunak <l.lunak@kde.org>\n"
+        "(C) 2001      Oswald Buddenhagen <ossi@kde.org>\n\n"
+        "Usage : %s [on|off]\n"
+        "on     - turns NumLock on in X ( default )\n"
+        "off    - turns NumLock off in X\n"
+        "toggle - toggles the NumLock on and off in X\n"
+        "\n"
+        , argv0 );
+    }
+
+int main( int argc, char* argv[] )
+    {
+    if( argc > 2 )
+        {
+        usage( argv[ 0 ] );
+        return 1;
+        }
+    dpy = XOpenDisplay( NULL );
+    if( dpy == NULL )
+        {
+        fprintf( stderr, "Error opening display!\n" );
+        return 1;
+        }
+    if( argc == 1 )
+        numlock_set_on();
+    else if( strcmp( argv[ 1 ], "on" ) == 0 )
+        numlock_set_on();
+    else if( strcmp( argv[ 1 ], "off" ) == 0 )
+        numlock_set_off();
+    else if( strcmp( argv[ 1 ], "toggle" ) == 0 )
+        numlock_toggle();
+    else
+        {
+        usage( argv[ 0 ] );
+        XCloseDisplay( dpy );
+        return 2;
+        }
+    XCloseDisplay( dpy );
+    return 0;
+    }
+
+#endif
--- workspace/kcontrol/keyboard/x11_helper.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/x11_helper.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -221,27 +221,30 @@
 		return false;
 	}
 
-	QStringList layouts = names[2].split(OPTIONS_SEPARATOR);
-	QStringList variants = names[3].split(OPTIONS_SEPARATOR);
+	if( fetchType == ALL || fetchType == LAYOUTS_ONLY ) {
+		QStringList layouts = names[2].split(OPTIONS_SEPARATOR);
+		QStringList variants = names[3].split(OPTIONS_SEPARATOR);
 
-	for(int ii=0; ii<layouts.count(); ii++) {
-		xkbConfig->layouts << (layouts[ii] != NULL ? layouts[ii] : "");
-		xkbConfig->variants << (ii < variants.count() && variants[ii] != NULL ? variants[ii] : "");
+		for(int ii=0; ii<layouts.count(); ii++) {
+			xkbConfig->layouts << (layouts[ii] != NULL ? layouts[ii] : "");
+			xkbConfig->variants << (ii < variants.count() && variants[ii] != NULL ? variants[ii] : "");
+		}
+		qDebug() << "Fetched layout groups from X server:"
+				<< "\tlayouts:" << xkbConfig->layouts
+				<< "\tvariants:" << xkbConfig->variants;
 	}
-	qDebug() << "Fetched layout groups from X server:"
-			<< "\tlayouts:" << xkbConfig->layouts
-			<< "\tvariants:" << xkbConfig->variants;
 
-	if( fetchType == ALL ) {
+	if( fetchType == ALL || fetchType == MODEL_ONLY ) {
 		xkbConfig->keyboardModel = (names[1] != NULL ? names[1] : "");
 		qDebug() << "Fetched keyboard model from X server:" << xkbConfig->keyboardModel;
+	}
 
+	if( fetchType == ALL ) {
 		if( names.count() >= 5 ) {
 			QString options = (names[4] != NULL ? names[4] : "");
 			xkbConfig->options = options.split(OPTIONS_SEPARATOR);
 			qDebug() << "Fetched xkbOptions from X server:" << options;
 		}
-
 	}
 
 	XFree(prop_data);
--- workspace/kcontrol/keyboard/xkb_helper.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/xkb_helper.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -22,6 +22,7 @@
 #include <QtCore/QDir>
 #include <QtCore/QString>
 #include <QtCore/QStringList>
+#include <QtGui/QX11Info>
 
 #include <kglobal.h>
 #include <kstandarddirs.h>
@@ -30,6 +31,7 @@
 
 #include "keyboard_config.h"
 
+
 static const char* SETXKBMAP_EXEC = "setxkbmap";
 
 static bool setxkbmapNotFound = false;
@@ -71,25 +73,16 @@
     }
 }
 
-bool XkbHelper::initializeKeyboardLayouts()
-{
-	getSetxkbmapExe();
-	if( ! setxkbmapNotFound ) {
-
-		KeyboardConfig config;
-		config.load();
-
-		return XkbHelper::initializeKeyboardLayouts(config);
-	}
-	return false;
-}
-
 bool XkbHelper::initializeKeyboardLayouts(KeyboardConfig& config)
 {
 	QStringList setxkbmapCommandArguments;
 	if( ! config.keyboardModel.isEmpty() ) {
-		setxkbmapCommandArguments.append("-model");
-		setxkbmapCommandArguments.append(config.keyboardModel);
+		XkbConfig xkbConfig;
+		X11Helper::getGroupNames(QX11Info::display(), &xkbConfig, X11Helper::MODEL_ONLY);
+		if( xkbConfig.keyboardModel != config.keyboardModel ) {
+			setxkbmapCommandArguments.append("-model");
+			setxkbmapCommandArguments.append(config.keyboardModel);
+		}
 	}
 	if( config.configureLayouts ) {
 		QStringList layouts;
@@ -135,37 +128,3 @@
 	}
 	return false;
 }
-
-//bool XkbHelper::initializeKeyboardHardware(KeyboardConfig& config)
-//{
-//	int numlockState = config.numlockState;
-//	if( config.numlockState != KeyboardConfig::NO_CHANGE ) {
-//		//TODO:
-////		numlockx_change_numlock_state( numlockState == 0 );
-//	}
-//
-//	if( config.keyboardRepeat ) {
-//		//TODO:
-////		set_repeatrate(config.repeatDelay, config.repeatRate);
-//	}
-//
-//	//TODO:
-////	clickVolume
-//}
-//
-//extern "C"
-//{
-//	KDE_EXPORT void kcminit_keyboard()
-//	{
-//		//TODO: better check if xkb is supported?
-//		getSetxkbmapExe();
-//		if( ! setxkbmapNotFound ) {
-//
-//			KeyboardConfig config;
-//			config.load();
-//
-//			KCMInit::initializeKeyboardHardware(config);
-//			KCMInit::initializeKeyboardLayouts(config);
-//		}
-//	}
-//}
--- workspace/kcontrol/keyboard/xinput_helper.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/xinput_helper.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -91,16 +91,18 @@
 			int ndevices;
 			XDeviceInfo	*devices = XListInputDevices(xdpne->display, &ndevices);
 			if( devices != NULL ) {
-				kDebug() << "New device id:" << xdpne->deviceid;
+//				kDebug() << "New device id:" << xdpne->deviceid;
 				for(int i=0; i<ndevices; i++) {
-					kDebug() << "id:" << devices[i].id << "name:" << devices[i].name << "used as:" << devices[i].use;
+//					kDebug() << "id:" << devices[i].id << "name:" << devices[i].name << "used as:" << devices[i].use;
 					if( devices[i].id == xdpne->deviceid ) {
 						if( devices[i].use == IsXKeyboard || devices[i].use == IsXExtensionKeyboard ) {
 							newDeviceType = DEVICE_KEYBOARD;
+							kDebug() << "new keyboard device, id:" << devices[i].id << "name:" << devices[i].name << "used as:" << devices[i].use;
 							break;
 						}
 						if( devices[i].use == IsXPointer || devices[i].use == IsXExtensionPointer ) {
 							newDeviceType = DEVICE_POINTER;
+							kDebug() << "new pointer device, id:" << devices[i].id << "name:" << devices[i].name << "used as:" << devices[i].use;
 							break;
 						}
 					}
--- workspace/kcontrol/keyboard/keyboard.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/keyboard.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -3,7 +3,7 @@
 Icon=preferences-desktop-keyboard
 X-KDE-ServiceTypes=KDEDModule
 X-KDE-Library=keyboard
-X-KDE-DBus-ModuleName=kxkb
+X-KDE-DBus-ModuleName=keyboard
 X-KDE-Kded-autoload=true
 X-KDE-Kded-load-on-demand=false
 X-KDE-Kded-phase=1
@@ -55,6 +55,7 @@
 Name[sr@latin]=Demon tastature
 Name[sv]=Tangentbordsdemon
 Name[th]=ดีมอนแป้นพิมพ์
+Name[tr]=Klavye Servisi
 Name[uk]=Фонова служба клавіатури
 Name[x-test]=xxKeyboard Daemonxx
 Name[zh_CN]=键盘守护进程
--- workspace/kcontrol/keyboard/kcm_keyboard_widget.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/keyboard/kcm_keyboard_widget.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -70,9 +70,16 @@
 	connect(kcmMiscWidget, SIGNAL(changed(bool)), this, SIGNAL(changed(bool)));
 	//TODO: connect save/load
 
-    initializeKeyboardModelUI();
-    initializeXkbOptionsUI();
-    initializeLayoutsUI();
+    if( rules != NULL ) {
+        initializeKeyboardModelUI();
+    	initializeXkbOptionsUI();
+    	initializeLayoutsUI();
+    }
+    else {
+		uiWidget->tabLayouts->setEnabled(false);
+		uiWidget->tabAdvanced->setEnabled(false);
+		uiWidget->keyboardModelComboBox->setEnabled(false);
+    }
 }
 
 KCMKeyboardWidget::~KCMKeyboardWidget()
@@ -82,7 +89,10 @@
 
 void KCMKeyboardWidget::save()
 {
-    KAction* action = static_cast<KAction*>(actionCollection->action(0));
+	if( rules == NULL )
+		return;
+
+	KAction* action = static_cast<KAction*>(actionCollection->action(0));
     KShortcut shortcut(uiWidget->kdeKeySequence->keySequence());
     action->setGlobalShortcut(shortcut, KAction::ActiveShortcut, KAction::NoAutoloading);
     kDebug() << "Saving keyboard layout KDE shortcut" << shortcut.toString();
@@ -92,6 +102,9 @@
 
 void KCMKeyboardWidget::updateUI()
 {
+	if( rules == NULL )
+		return;
+
 	uiWidget->layoutsTableView->setModel(uiWidget->layoutsTableView->model());
 	((LayoutsTableModel*)uiWidget->layoutsTableView->model())->refresh();
 
@@ -106,6 +119,9 @@
 
 void KCMKeyboardWidget::uiChanged()
 {
+	if( rules == NULL )
+		return;
+
 	((LayoutsTableModel*)uiWidget->layoutsTableView->model())->refresh();
 // this collapses the tree so use more fine-grained updates
 //	((LayoutsTableModel*)uiWidget->xkbOptionsTreeView->model())->refresh();
@@ -465,9 +481,16 @@
 		button->setText(i18nc("no shortcuts defined", "None"));
 	break;
 	case 1: {
+		const QString& option = grpOptions.first();
 		const OptionGroupInfo* optionGroupInfo = rules->getOptionGroupInfo(groupName);
-		const OptionInfo* optionInfo = optionGroupInfo->getOptionInfo(grpOptions.first());
-		button->setText(optionInfo->description);
+		const OptionInfo* optionInfo = optionGroupInfo->getOptionInfo(option);
+		if( optionInfo == NULL || optionInfo->description == NULL ) {
+			kError() << "Could not find option info for " << option;
+			button->setText(grpOptions.first());
+		}
+		else {
+			button->setText(optionInfo->description);
+		}
 	}
 	break;
 	default:
--- workspace/kcontrol/colors/colorscm.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/colors/colorscm.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -108,25 +108,14 @@
 {
     // clear the list in case this is being called from reset button click
     schemeList->clear();
-    // add current scheme entry
-    QIcon icon = createSchemePreviewIcon(m_config);
-    QListWidgetItem *currentitem = new QListWidgetItem(icon, i18nc("Current color scheme", "Current"));
-    schemeList->addItem(currentitem);
-    schemeList->blockSignals(true); // don't emit changed signals
-    schemeList->setCurrentItem(currentitem);
-    schemeList->blockSignals(false);
 
-    // add default entry
-    m_config->setReadDefaults(true);
-    icon = createSchemePreviewIcon(m_config);
-    schemeList->addItem(new QListWidgetItem(icon, i18nc("Default color scheme", "Default")));
-    m_config->setReadDefaults(false);
-
+    // add entries
+	QIcon icon;
     const QStringList schemeFiles = KGlobal::dirs()->findAllResources("data", "color-schemes/*.colors", KStandardDirs::NoDuplicates);
     for (int i = 0; i < schemeFiles.size(); ++i)
     {
         // get the file name
-        const QString filename = schemeFiles[i];
+        const QString filename = schemeFiles.at(i);
         const QFileInfo info(filename);
 
         // add the entry
@@ -139,6 +128,21 @@
         newItem->setData(Qt::UserRole, info.baseName());
         schemeList->addItem(newItem);
     }
+    schemeList->sortItems();
+
+    // add default entry (do this here so that the current and default entry appear at the top)
+    m_config->setReadDefaults(true);
+    icon = createSchemePreviewIcon(m_config);
+    schemeList->insertItem(0, new QListWidgetItem(icon, i18nc("Default color scheme", "Default")));
+    m_config->setReadDefaults(false);
+
+    // add current scheme entry
+    icon = createSchemePreviewIcon(m_config);
+    QListWidgetItem *currentitem = new QListWidgetItem(icon, i18nc("Current color scheme", "Current"));
+    schemeList->insertItem(0, currentitem);
+    schemeList->blockSignals(true); // don't emit changed signals
+    schemeList->setCurrentItem(currentitem);
+    schemeList->blockSignals(false);
 }
 
 void KColorCm::updatePreviews()
@@ -255,6 +259,7 @@
         // load it
 
         const QString name = currentItem->text();
+        m_currentColorScheme = name;
         const QString fileBaseName = currentItem->data(Qt::UserRole).toString();
         if (name == i18nc("Default color scheme", "Default"))
         {
@@ -496,12 +501,10 @@
         if (foundItems.size() < 1)
         {
             // add it to the list since it's not in there already
-            QListWidgetItem * newItem = new QListWidgetItem(icon, name);
-            newItem->setData(Qt::UserRole, filename);
-            schemeList->addItem(newItem);
+            populateSchemeList();
 
             // then select the new item
-            schemeList->setCurrentRow(schemeList->count() - 1);
+            schemeList->setCurrentItem(schemeList->findItems(name, Qt::MatchExactly).at(0));
         }
         else
         {
@@ -513,6 +516,11 @@
         // set m_config back to the system one
         m_config = temp;
 
+        // store colorscheme name in global settings
+        m_currentColorScheme = name;
+        group = KConfigGroup(m_config, "General");
+        group.writeEntry("ColorScheme", m_currentColorScheme);
+
         emit changed(true);
     }
     else if (!canWrite && file.exists())
@@ -606,6 +614,10 @@
 
 void KColorCm::updateFromColorSchemes()
 {
+    // store colorscheme name in global settings
+    KConfigGroup group(m_config, "General");
+    group.writeEntry("ColorScheme", m_currentColorScheme);
+
     for (int i = KColorScheme::View; i <= KColorScheme::Tooltip; ++i)
     {
         KConfigGroup group(m_config, colorSetGroupKey(i));
@@ -1063,6 +1075,10 @@
     updatePreviews();
 
     m_loadedSchemeHasUnsavedChanges = true;
+    m_currentColorScheme = i18nc("Current color scheme", "Current");
+    schemeList->blockSignals(true); // don't emit changed signals
+    schemeList->setCurrentRow(0);
+    schemeList->blockSignals(false);
 
     emit changed(true);
 }
@@ -1139,8 +1155,15 @@
 {
     loadInternal(true);
 
+    // get colorscheme name from global settings
+    KConfigGroup group(m_config, "General");
+    m_currentColorScheme = group.readEntry("ColorScheme");
+    QList<QListWidgetItem*> itemList = schemeList->findItems(m_currentColorScheme, Qt::MatchExactly);
+    if(!itemList.isEmpty()) // "Current" is already selected, so don't handle the case that itemList is empty
+        schemeList->setCurrentItem(itemList.at(0));
+
     KConfig      cfg("kcmdisplayrc", KConfig::NoGlobals);
-    KConfigGroup group(&cfg, "X11");
+    group = KConfigGroup(&cfg, "X11");
 
     applyToAlien->blockSignals(true); // don't emit SIGNAL(toggled(bool)) which would call SLOT(emitChanged())
     applyToAlien->setChecked(group.readEntry("exportKDEColors", true));
@@ -1231,6 +1254,7 @@
                 loadScheme(item, item);
             else
                 schemeList->setCurrentItem(item);
+            m_currentColorScheme = item->text();
             break;
         }
     }
--- workspace/kcontrol/colors/colorscm.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/colors/colorscm.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -198,6 +198,7 @@
 
     QList<KColorScheme> m_colorSchemes;
     WindecoColors m_wmColors;
+    QString m_currentColorScheme;
 
     KSharedConfigPtr m_config;
 
--- workspace/kcontrol/workspaceoptions/workspaceoptions.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/workspaceoptions/workspaceoptions.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -117,6 +117,7 @@
 Comment[sr@latin]=Globalne opcije za plasma radni prostor
 Comment[sv]=Globala alternativ för Plasmas arbetsyta
 Comment[th]=ตัวเลือกทั่วไปสำหรับพื้นที่พลาสมา
+Comment[tr]=Plasma Çalışma Alanı için genel ayarlar
 Comment[uk]=Загальні параметри робочого простору Плазми
 Comment[x-test]=xxGlobal options for the Plasma Workspacexx
 Comment[zh_CN]=Plasma 工作空间的全局选项
--- workspace/kcontrol/kdm/kdm.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/kdm/kdm.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,6 +28,7 @@
 Name[gu]=લોગિન સ્ક્રીન
 Name[hi]=लॉगिन स्क्रीन
 Name[hr]=Zaslon prijave
+Name[hu]=Bejelentkező felület
 Name[ia]=Schermo de accesso
 Name[id]=Layar Masuk
 Name[is]=Innskráning
@@ -56,6 +57,7 @@
 Name[sr@latin]=Prijavni ekran
 Name[sv]=Inloggningsfönster
 Name[th]=หน้าจอล็อกอิน
+Name[tr]=Giriş Ekranı
 Name[uk]=Вікно входу
 Name[x-test]=xxLogin Screenxx
 Name[zh_CN]=登录屏幕
@@ -98,7 +100,7 @@
 Comment[hu]=A KDE grafikus bejelentkező felületének beállításai
 Comment[ia]=Il configura le gerente de Accesso (KDM)
 Comment[id]=Atur manajer log masuk (KDM)
-Comment[is]=Stilla innstimplunarstjórann (KDM)
+Comment[is]=Stilla innskráningarstjórann (KDM)
 Comment[it]=Configurazione del gestore degli accessi (KDM)
 Comment[ja]=ログインマネージャ (KDM) の設定
 Comment[ka]=შევლის მენეჯერის კონფიგურირება (KDM)
--- workspace/kcontrol/kdm/kcmkdm_actions.actions	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kcontrol/kdm/kcmkdm_actions.actions	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -43,6 +43,7 @@
 Name[sr@latin]=Kontrolni modul menadžera prijavljivanja
 Name[sv]=Inställningsmodul för inloggningshanterare
 Name[th]=มอดูลควบคุมตัวจัดการการล็อกอิน
+Name[tr]=Giriş Yöneticisi Denetim Modülü
 Name[uk]=Модуль керування менеджером реєстрації
 Name[x-test]=xxLogin Manager Control Modulexx
 Name[zh_CN]=登录管理器控制模块
@@ -94,6 +95,7 @@
 Name[sr@latin]=Sačuvaj postavke menadžera prijavljivanja
 Name[sv]=Spara inloggningshanterarens inställningar
 Name[th]=จัดเก็บการตั้งค่าต่าง ๆ ของตัวจัดการการล็อกอิน
+Name[tr]=Giriş Yöneticisi ayarlarını kaydet
 Name[uk]=Зберегти параметри менеджера реєстрації
 Name[x-test]=xxSave the Login Manager settingsxx
 Name[zh_CN]=保存登录管理器设置
@@ -116,6 +118,7 @@
 Description[hr]=Administracijska je autorizacija potreba za promjenu postavki upravitelja prijavom
 Description[ia]=Autorisation de Administrator es requirite pro modificar le preferentias del Gerente de Accessos de Identification
 Description[id]=Otorisasi administrator diperlukan untuk mengubah pengaturan Manajer Log Masuk
+Description[is]=Kerfisstjóraheimildir eru nauðsynlegar til að breyta stillingum innskráningarstjóra
 Description[it]=È richiesta l'autorizzazione amministrativa per cambiare le impostazioni del gestore degli accessi
 Description[ja]=ログインマネージャの設定を変更するには管理者権限が必要です
 Description[kk]=Жүйеге кіру менеджерінің параметрлерін өзгерту үшін әкімшінің құқықтары керек
@@ -165,6 +168,7 @@
 Name[hr]=Uredi korisničke slike prikazane u Upravitelju prijavom
 Name[ia]=Gerer images de usator monstrate in le Gerente de Accessos de Identification
 Name[id]=Atur gambar pengguna yang ditampilkan di Manajer Log Masuk
+Name[is]=Sýsla með notendamyndir í innskráningarstjóra
 Name[it]=Gestisci le immagini degli utenti mostrate nel gestore degli accessi
 Name[ja]=ログインマネージャで表示されるユーザ画像を管理します
 Name[kk]=Жүйеге кіру менеджерідегі пайдаланушының кескінін басқару
@@ -211,6 +215,7 @@
 Description[hr]=Potrebna je administratorska autorizacija kako bi ste uredili korisničke slike u Upravitelju prijavom
 Description[ia]=Autorisation de Administrator es requirite pro gerer  le images de usator pro le Gerente de Accessos de Identification
 Description[id]=Otorisasi administrator diperlukan untuk mengatur gambar pengguna untuk Manajer Log Masuk
+Description[is]=Kerfisstjóraheimildir eru nauðsynlegar til að sýsla með notendamyndir í innskráningarstjóranum
 Description[it]=È richiesta l'autorizzazione amministrativa per gestire le immagini degli utenti nel gestore degli accessi
 Description[ja]=ログインマネージャにおけるユーザ画像を管理するには管理者権限が必要です
 Description[kk]=Жүйеге кіру менеджерідегі пайдаланушының кескінін өзгерту үшін әкімшінің құқықтары керек
@@ -261,6 +266,7 @@
 Name[hr]=Upravlja temama upravitelja prijavom
 Name[ia]=Gerer themas pro le Gerente de Accessos de Identification
 Name[id]=Atur tema untuk Manajer Log Masuk
+Name[is]=Sýsla með þemu fyrir innskráningarstjóra
 Name[it]=Gestisci i temi del gestore degli accessi
 Name[ja]=ログインマネージャのテーマを管理します
 Name[kk]=Жүйеге кіру менеджерінің нақышын басқару
@@ -286,6 +292,7 @@
 Name[sr@latin]=Upravljaj temama menadžera prijavljivanja
 Name[sv]=Hantera teman för inloggningshanteraren
 Name[th]=จัดการชุดตกแต่งตัวจัดการการล็อกอิน
+Name[tr]=Giriş Yöneticisi temalarını yönet
 Name[uk]=Керування темами менеджера реєстрації
 Name[x-test]=xxManage themes for the Login Managerxx
 Name[zh_CN]=管理登录管理器主题
@@ -308,6 +315,7 @@
 Description[hr]=Potrebna je administratorska autorizacija kako bi ste uredili teme Upravitelja prijave
 Description[ia]=Autorisation de Administrator es requirite pro modificar le themas pro le Gerente de Accessos de Identification
 Description[id]=Otorisasi administrator diperlukan untuk mengatur tema untuk Manajer Log Masuk
+Description[is]=Kerfisstjóraheimildir eru nauðsynlegar til að sýsla með þemu fyrir innskráningarstjóra
 Description[it]=È richiesta l'autorizzazione amministrativa per gestire i temi del gestore degli accessi
 Description[ja]=ログインマネージャにおけるテーマを管理するには管理者権限が必要です
 Description[kk]=Жүйеге кіру менеджерінің нақышын өзгерту үшін әкімшінің құқықтары керек
--- workspace/statusnotifierwatcher/statusnotifierwatcher.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/statusnotifierwatcher/statusnotifierwatcher.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,7 @@
 Name[fy]=Tastân melder behearder folger
 Name[hi]=स्थिति संकेत प्रबंधक
 Name[hr]=Upravitelj glasnika stanja
+Name[hu]=Állapotértesítés-kezelő
 Name[ia]=Gerente de Notificator de Stato
 Name[id]=Manajer Notifikasi Status
 Name[is]=Stöðutilkynningaþjónn
@@ -44,6 +45,7 @@
 Name[sv]=Hantering av statusunderrättelser
 Name[tg]=Мудири ҳолатҳои система
 Name[th]=ตัวจัดการการแจ้งสถานะให้ทราบ
+Name[tr]=Durum Bildirici Yönetcisi
 Name[uk]=Керування сповіщенням про стан
 Name[x-test]=xxStatus Notifier Managerxx
 Name[zh_CN]=状态通知管理器
--- workspace/doc/kcontrol/workspaceoptions/index.docbook	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/doc/kcontrol/workspaceoptions/index.docbook	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -12,8 +12,8 @@
 <!-- TRANS:ROLES_OF_TRANSLATORS -->
 </authorgroup>
 
-<date>2009-10-01</date>
-<releaseinfo>&kde; 4.4</releaseinfo>
+<date>2010-08-20</date>
+<releaseinfo>&kde; 4.5</releaseinfo>
 
 <keywordset>
 <keyword>KDE</keyword>
@@ -27,7 +27,7 @@
 <sect1 id="workspace">
 <title>Workspace</title>
 
-<para>This is a module to configure the behaviour of the Plasma workspace.
+<para>This is a module to configure the behavior of the Plasma workspace.
 </para>
 
 <sect2 id="form-factor">
@@ -57,7 +57,7 @@
 <sect2 id="dashboard">
 <title>Dashboard</title>
 <para>
-In the dashboard section you can configure the behaviour of the Plasma dashboard. 
+In the dashboard section you can configure the behavior of the Plasma dashboard. 
 Right now there are two options:
 </para>
 
@@ -80,6 +80,17 @@
 
 </sect2>
 
+<sect2 id="informational-tips">
+<title>Informational Tips</title>
+<para>
+<guilabel>Informational Tips</guilabel> are displayed hovering items in the 
+Plasma panel or on the desktop by default after 0.7 seconds.</para>
+<para>
+Clicking the up and down arrows or pressing the up or down cursor keys on the keyboard
+increases/decreases the delay before informational tips are shown. The number
+can also be entered with the keyboard. The minimum value of -0.1 also means 
+<guilabel>Do not show</guilabel>.</para>
+</sect2>
 </sect1>
 </article>
 
--- workspace/systemsettings/categories/settings-startup-and-shutdown.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-startup-and-shutdown.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -52,6 +52,7 @@
 Name[sr@latin]=Podizanje i gašenje
 Name[sv]=Start och avslutning
 Name[th]=การเริ่มการทำงานและการปิดเครื่อง
+Name[tr]=Başlatma ve Kapatma
 Name[uk]=Запуск і вихід
 Name[x-test]=xxStartup and Shutdownxx
 Name[zh_CN]=开机和关机
--- workspace/systemsettings/categories/settings-permissions.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-permissions.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -54,6 +54,7 @@
 Name[sr@latin]=Dozvole
 Name[sv]=Rättigheter
 Name[th]=สิทธิ์ที่อนุญาต
+Name[tr]=İzinler
 Name[uk]=Права доступу
 Name[x-test]=xxPermissionsxx
 Name[zh_CN]=权限
--- workspace/systemsettings/categories/settings-account-details.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-account-details.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -55,6 +55,7 @@
 Name[sv]=Kontoinformation
 Name[tg]=Тафсилоти ҳисоб
 Name[th]=รายละเอียดบัญชีผู้ใช้
+Name[tr]=Hesap Ayrıntıları
 Name[uk]=Параметри облікового запису
 Name[x-test]=xxAccount Detailsxx
 Name[zh_CN]=账户细节
--- workspace/systemsettings/categories/settings-input-devices.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-input-devices.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -54,6 +54,7 @@
 Name[sr@latin]=Uređaji
 Name[sv]=Inmatningsenheter
 Name[th]=อุปกรณ์ป้อนข้อมูล
+Name[tr]=Girdi Aygıtları
 Name[uk]=Пристрої введення
 Name[x-test]=xxInput Devicesxx
 Name[zh_CN]=输入设备
--- workspace/systemsettings/categories/settings-workspace-appearance-and-behavior.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-workspace-appearance-and-behavior.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -52,6 +52,7 @@
 Name[sr@latin]=Izgled i ponašanje radnog prostora
 Name[sv]=Arbetsytans utseende och beteende
 Name[th]=รูปลักษณ์และพฤติกรรมของพื้นที่ทำงาน
+Name[tr]=Çalışma Alanı Görünümü ve Davranışları
 Name[uk]=Вигляд і поведінка робочого простору
 Name[x-test]=xxWorkspace Appearance and Behaviorxx
 Name[zh_CN]=工作空间外观和行为
--- workspace/systemsettings/categories/settings-lost-and-found.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-lost-and-found.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -54,6 +54,7 @@
 Name[sr@latin]=Izgubljeno-nađeno
 Name[sv]=Hittegods
 Name[th]=ไม่สามารถจัดหมวดหมู่ได้
+Name[tr]=Kayıplar ve Bulunanlar
 Name[uk]=Втрачено і знайдено
 Name[x-test]=xxLost and Foundxx
 Name[zh_CN]=未知类别
--- workspace/systemsettings/categories/settings-removable-devices.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-removable-devices.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -27,6 +27,7 @@
 Name[he]=התקנים נשלפים
 Name[hi]=हटाने लायक औज़ार
 Name[hr]=Uklonjivi uređaji
+Name[hu]=Cserélhető eszközök
 Name[ia]=Dispositivos removibile
 Name[id]=Divais Dapat Dilepaskan
 Name[is]=Útskiptanleg tæki
--- workspace/systemsettings/categories/settings-application-and-system-notifications.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-application-and-system-notifications.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -53,6 +53,7 @@
 Name[sv]=Program- och systemunderrättelser
 Name[tg]=Барномаҳо ва огоҳномаҳои система
 Name[th]=การแจ้งให้ทราบของโปรแกรมและระบบ
+Name[tr]=Uygulama ve Sistem Bildirimleri
 Name[uk]=Сповіщення програм і системи
 Name[x-test]=xxApplication and System Notificationsxx
 Name[zh_CN]=应用程序和系统通知
--- workspace/systemsettings/categories/settings-shortcuts-and-gestures.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-shortcuts-and-gestures.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -52,6 +52,7 @@
 Name[sr@latin]=Prečice i gestovi
 Name[sv]=Genvägar och gester
 Name[th]=ปุ่มพิมพ์ลัดและการขยับเมาส์แบบต่าง ๆ
+Name[tr]=Kısayollar ve Fare Hareketleri
 Name[uk]=Скорочення і жести
 Name[x-test]=xxShortcuts and Gesturesxx
 Name[zh_CN]=快捷键和手势
--- workspace/systemsettings/categories/settings-application-appearance-and-behavior.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-application-appearance-and-behavior.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -52,6 +52,7 @@
 Name[sv]=Gemensamt utseende och beteende
 Name[tg]=Намуди зоҳирӣ ва рафтори умумӣ
 Name[th]=รูปลักษณ์และพฤติกรรมส่วนรวม
+Name[tr]=Genel Görünüm ve Davranışlar
 Name[uk]=Загальний вигляд і поведінка
 Name[x-test]=xxCommon Appearance and Behaviorxx
 Name[zh_CN]=公共外观和行为
--- workspace/systemsettings/categories/settings-locale.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-locale.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -54,6 +54,7 @@
 Name[sr@latin]=Lokalitet
 Name[sv]=Plats
 Name[th]=ภาษาระบบ
+Name[tr]=Yerel
 Name[uk]=Локаль
 Name[x-test]=xxLocalexx
 Name[zh_CN]=语系
--- workspace/systemsettings/categories/settings-application-appearance.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-application-appearance.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -53,6 +53,7 @@
 Name[sv]=Programutseende
 Name[tg]=Намуди зоҳирии барнома
 Name[th]=รูปลักษณ์ของโปรแกรม
+Name[tr]=Uygulama Görünümü
 Name[uk]=Вигляд вікон програм
 Name[x-test]=xxApplication Appearancexx
 Name[zh_CN]=应用程序外观
--- workspace/systemsettings/categories/settings-network-and-connectivity.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-network-and-connectivity.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -53,6 +53,7 @@
 Name[sr@latin]=Mreža i povezivost
 Name[sv]=Nätverk och anslutningar
 Name[th]=เครือข่ายและการเชื่อมต่อ
+Name[tr]=Ağ ve Bağlanılabilirlik
 Name[uk]=Мережа і з'єднання
 Name[x-test]=xxNetwork and Connectivityxx
 Name[zh_CN]=网络和连接
--- workspace/systemsettings/categories/settings-display.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-display.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -51,6 +51,7 @@
 Name[sr@latin]=Prikaz i monitor
 Name[sv]=Bildskärm
 Name[th]=ระบบแสดงผลและจอภาพ
+Name[tr]=Ekran ve Moniör
 Name[uk]=Показ зображення і монітор
 Name[x-test]=xxDisplay and Monitorxx
 Name[zh_CN]=显示
--- workspace/systemsettings/categories/settings-desktop-appearance.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/systemsettings/categories/settings-desktop-appearance.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -54,6 +54,7 @@
 Name[sr@latin]=Izgled radnog prostora
 Name[sv]=Arbetsytans utseende
 Name[th]=รูปลักษณ์ของพื้นที่ทำงาน
+Name[tr]=Çalışma Alanı Görünümü
 Name[uk]=Вигляд робочого простору
 Name[x-test]=xxWorkspace Appearancexx
 Name[zh_CN]=工作空间外观
--- workspace/kwrited/kwrited.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwrited/kwrited.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,7 @@
 Name[ga]=Deamhan Scríofa
 Name[hi]=राइट डेमन
 Name[hr]=KDE servis za pisanje
+Name[hu]=Adatkiíró szolgáltatás
 Name[ia]=Demone pro Scriber
 Name[id]=Jurik Tulis
 Name[is]=Skriftarpúki
@@ -45,6 +46,7 @@
 Name[sv]=Skrivdemon
 Name[tg]=Модули нависанда
 Name[th]=ดีมอน Write
+Name[tr]=Write Servisi
 Name[uk]=Фонова служба запису
 Name[x-test]=xxWrite Daemonxx
 Name[zh_CN]=Write 守护程序
@@ -93,7 +95,7 @@
 Comment[kn]=write(1) ಅಥವಾ wall(1) ರ ಮೂಲಕ ಸ್ಥಳೀಯ ಬಳಕೆದಾರರಿಂದ ಕಳುಹಿಸಲ್ಪಟ್ಟ ಸಂದೇಶಗಳಿಗಾಗಿ ಗಮನಿಸಿ
 Comment[ko]=write(1)이나 wall(1)을 통해 사용자가 보낸 메시지 감시하기
 Comment[ku]=Peyamên bikarhênerên herêmî ên wekî digel write(1) an jî wall (1) şandine temaşe bike
-Comment[lt]=Stebėti vietinių naudotojų išsiųstus laiškus su write(1) arba wall(1)
+Comment[lt]=Stebėti vietinių vartotojų išsiųstus laiškus su write(1) arba wall(1)
 Comment[lv]=Novēro ziņojumus no lokālajiem lietotājiem, kuri sūtīti izmantojot write(1) vai wall(1)
 Comment[mai]=स्थानीय प्रयोक्तासभक द्वारा राइट(1) अथवा वाल(1) केर जरिआ भेजल गए संदेशसभ क' लेल देखू
 Comment[mk]=Следи за пораки од локалните корисници пратени со write(1) или wall(1)
--- workspace/kwrited/kwrited-autostart.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwrited/kwrited-autostart.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -130,7 +130,7 @@
 Comment[kn]=write(1) ಅಥವಾ wall(1) ರ ಮೂಲಕ ಸ್ಥಳೀಯ ಬಳಕೆದಾರರಿಂದ ಕಳುಹಿಸಲ್ಪಟ್ಟ ಸಂದೇಶಗಳಿಗಾಗಿ ಗಮನಿಸಿ
 Comment[ko]=write(1)이나 wall(1)을 통해 사용자가 보낸 메시지 감시하기
 Comment[ku]=Peyamên bikarhênerên herêmî ên wekî digel write(1) an jî wall (1) şandine temaşe bike
-Comment[lt]=Stebėti vietinių naudotojų išsiųstus laiškus su write(1) arba wall(1)
+Comment[lt]=Stebėti vietinių vartotojų išsiųstus laiškus su write(1) arba wall(1)
 Comment[lv]=Novēro ziņojumus no lokālajiem lietotājiem, kuri sūtīti izmantojot write(1) vai wall(1)
 Comment[mai]=स्थानीय प्रयोक्तासभक द्वारा राइट(1) अथवा वाल(1) केर जरिआ भेजल गए संदेशसभ क' लेल देखू
 Comment[mk]=Следи за пораки од локалните корисници пратени со write(1) или wall(1)
--- workspace/kwrited/kwrited.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwrited/kwrited.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Comment[hr]=Lokalni servis za sistemske poruke
 Comment[ia]=Servicio de message de systema local
 Comment[id]=Layanan pesan sistem lokal
+Comment[is]=Staðvær kerfisskilaboðaþjónusta
 Comment[it]=Servizio dei messaggi di sistema locale
 Comment[ja]=ローカルシステムメッセージサービス
 Comment[kk]=Жергілікті жүйеде хабарласу қызметі
--- workspace/wallpapers/Blue_Wood/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Blue_Wood/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -48,6 +48,7 @@
 Name[sv]=Blått trä
 Name[tg]=Blue Wood
 Name[th]=เปลือกไม้สีฟ้า
+Name[tr]=Mavi Ağaç
 Name[uk]=Синє дерево
 Name[x-test]=xxBlue Woodxx
 Name[zh_CN]=蓝木头
--- workspace/wallpapers/Grass/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Grass/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -45,6 +45,7 @@
 Name[sr@latin]=Trava
 Name[sv]=Gräs
 Name[th]=หญ้า
+Name[tr]=Çimen
 Name[uk]=Трава
 Name[x-test]=xxGrassxx
 Name[zh_CN]=草地
--- workspace/wallpapers/Hanami/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Hanami/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -27,6 +27,7 @@
 Name[kn]=ಹನಾಮಿ
 Name[ko]=하나미
 Name[lt]=Hanami
+Name[lv]=Ziedoši ķirši
 Name[nb]=Hanami
 Name[nds]=Hanami
 Name[nl]=Hanami
@@ -43,6 +44,7 @@
 Name[sr@latin]=Hanami
 Name[sv]=Hanami
 Name[th]=ฮานามิ
+Name[tr]=Hanami
 Name[uk]=Ханамі
 Name[x-test]=xxHanamixx
 Name[zh_CN]=Hanami
--- workspace/wallpapers/Autumn/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Autumn/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,7 +17,7 @@
 Name[ga]=Autumn
 Name[hi]=शरद
 Name[hr]=Autumn
-Name[hu]=Ösz
+Name[hu]=Ősz
 Name[ia]=Autumno
 Name[id]=Musim Gugur
 Name[is]=Haust
--- workspace/wallpapers/Air/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Air/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -30,7 +30,6 @@
 Name[id]=Udara
 Name[is]=Loft
 Name[it]=Aria
-Name[ja]=大気
 Name[kk]=Air
 Name[km]=ខ្យល់
 Name[kn]=ಗಾಳಿ
--- workspace/wallpapers/Quadros/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Quadros/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[ga]=Quadros
 Name[hi]=क्वाद्रो
 Name[hr]=Quadros
+Name[hu]=Quadros
 Name[ia]=Quadros
 Name[id]=Quadros
 Name[is]=Kvadros
--- workspace/wallpapers/Media_Life/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/wallpapers/Media_Life/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,7 @@
 Name[ga]=Media Life
 Name[hi]=मिडिया लाइफ
 Name[hr]=Trajanje medija
+Name[hu]=Media Life
 Name[ia]=Media Life
 Name[id]=Hidup Media
 Name[is]=Lífmiðlun
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-SmartCardReader.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-SmartCardReader.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -24,6 +24,7 @@
 Name[he]=סוג קורא
 Name[hi]=रीडर प्रकार
 Name[hr]=Vrsta čitača
+Name[hu]=Olvasótípus
 Name[ia]=Typo de Lector
 Name[id]=Tipe Pembaca
 Name[is]=Gerð lesara
@@ -88,6 +89,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-Video.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-Video.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -91,6 +91,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-Battery.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-Battery.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -356,6 +356,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-NetworkInterface.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-NetworkInterface.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -291,6 +291,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-Button.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-Button.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -219,6 +219,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-Processor.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-Processor.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -286,6 +286,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-AudioInterface.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-AudioInterface.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -357,6 +357,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-AcAdapter.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-AcAdapter.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -90,6 +90,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-OpticalDrive.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-OpticalDrive.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -627,6 +627,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-PortableMediaPlayer.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-PortableMediaPlayer.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -158,6 +158,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-StorageAccess.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-StorageAccess.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -156,6 +156,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-Camera.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-Camera.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -158,6 +158,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-Block.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-Block.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -220,6 +220,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-StorageVolume.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-StorageVolume.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -425,6 +425,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-DvbInterface.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-DvbInterface.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -288,6 +288,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-OpticalDisc.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-OpticalDisc.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -173,7 +173,7 @@
 Name[ml]=ശൂന്യം
 Name[nb]=Tom
 Name[nds]=Leddig
-Name[nl]=Blanko
+Name[nl]=Blanco
 Name[nn]=Tom
 Name[pa]=ਖਾਲੀ
 Name[pl]=Puste
@@ -827,6 +827,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-StorageDrive.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-StorageDrive.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -356,6 +356,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/device-actions/solid-device-SerialInterface.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/device-actions/solid-device-SerialInterface.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -220,6 +220,7 @@
 Name[he]=התקן Solid
 Name[hi]=सोलिड औज़ार
 Name[hr]=Solid uređaj
+Name[hu]=Solid-eszköz
 Name[ia]=Dispositivo Solid
 Name[id]=Divais Solid
 Name[is]=Solid tæki
--- workspace/solid/solid-actions-kcm/ActionEditor.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/solid-actions-kcm/ActionEditor.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -30,7 +30,7 @@
     rootModel = new PredicateModel( topItem, this );
     // Prepare the dialog
     setInitialSize( QSize(600, 600) ); // Set a decent initial size
-    setModal( true );
+    // setModal( true );
     // Set up the interface
     ui.setupUi( mainWidget() );
     ui.TvPredicateTree->setHeaderHidden( true );
--- workspace/solid/networking/kded/networkstatus.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/networking/kded/networkstatus.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gu]=નેટવર્ક સ્થિતિ
 Name[hi]=नेटवर्क स्थिति
 Name[hr]=Stanje mreže
+Name[hu]=Hálózat állapota
 Name[ia]=Stato de Rete
 Name[id]=Status Jaringan
 Name[is]=Staða nets
@@ -48,6 +49,7 @@
 Name[sv]=Nätverksstatus
 Name[tg]=Ҳолати шабака
 Name[th]=สถานะเครือข่าย
+Name[tr]=Ağ Durumu
 Name[uk]=Стан мережі
 Name[x-test]=xxNetwork Statusxx
 Name[zh_CN]=网络状态
--- workspace/solid/kcm/kcm_solid.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/solid/kcm/kcm_solid.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,6 +28,7 @@
 Name[ga]=Foinsí Eolais
 Name[hi]=जानकारी स्रोत
 Name[hr]=Izvori informacija
+Name[hu]=Információforrások
 Name[ia]=Fonte de Information
 Name[id]=Sumber Informasi
 Name[is]=Upplýsingaveitur
@@ -56,6 +57,7 @@
 Name[sr@latin]=Izvori podataka
 Name[sv]=Informationskällor
 Name[th]=แหล่งที่ใช้เป็นข้อมูล
+Name[tr]=Bilgi Kaynakları
 Name[uk]=Джерела інформації
 Name[x-test]=xxInformation Sourcesxx
 Name[zh_CN]=信息来源
--- workspace/powerdevil/powerdevil.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/powerdevil/powerdevil.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -120,6 +120,7 @@
 Comment[sv]=Strömsparhantering
 Comment[tg]=Идоракунии барқ
 Comment[th]=การจัดการพลังงาน
+Comment[tr]=Güç Yönetimi
 Comment[uk]=Керування живленням
 Comment[x-test]=xxPower Managementxx
 Comment[zh_CN]=电源管理
--- workspace/krunner/interfaces/default/interface.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/krunner/interfaces/default/interface.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -530,9 +530,14 @@
     if (m_runnerManager->singleMode()) {
         runnerId = m_runnerManager->singleModeRunnerId();
     }
+
     if (!query.isEmpty() || m_runnerManager->singleMode()) {
         m_queryRunning = m_resultsScene->launchQuery(query, runnerId) || m_queryRunning; //lazy OR?
     }
+
+    if (!m_queryRunning && m_delayedRun) {
+        runDefaultResultItem();
+    }
 }
 
 void Interface::matchCountChanged(int count)
--- workspace/krunner/krunnerdialog.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/krunner/krunnerdialog.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -428,29 +428,38 @@
 void KRunnerDialog::mousePressEvent(QMouseEvent *e)
 {
     if (e->button() == Qt::LeftButton) {
-        m_vertResize = e->y() > height() - qMax(5, m_bottomBorderHeight);
-        m_rightResize = e->x() > width() - qMax(5, m_rightBorderWidth);
-        const bool leftResize = e->x() < qMax(5, m_leftBorderWidth);
-        if (!m_floating && (leftResize || m_rightResize || m_vertResize)) {
-            // let's do a resize! :)
-            m_lastPressPos = m_vertResize ? e->globalY() : e->globalX();
-            grabMouse();
-            m_resizing = true;
-        } else if (m_floating) {
+        m_lastPressPos = -1;
+
+        if (m_floating) {
+            m_vertResize = e->y() > height() - qMax(5, m_bottomBorderHeight);
+            kDebug() << m_vertResize << e->y() << height() << qMax(5, m_bottomBorderHeight);
+            if (m_vertResize) {
+                m_lastPressPos = e->globalY();
+                m_resizing = true;
+                grabMouse();
+            } else {
 #ifdef Q_WS_X11
-            // We have to release the mouse grab before initiating the move operation.
-            // Ideally we would call releaseMouse() to do this, but when we only have an
-            // implicit passive grab, Qt is unaware of it, and will refuse to release it.
-            XUngrabPointer(x11Info().display(), CurrentTime);
+                // We have to release the mouse grab before initiating the move operation.
+                // Ideally we would call releaseMouse() to do this, but when we only have an
+                // implicit passive grab, Qt is unaware of it, and will refuse to release it.
+                XUngrabPointer(x11Info().display(), CurrentTime);
 
-            // Ask the window manager to start an interactive move operation.
-            NETRootInfo rootInfo(x11Info().display(), NET::WMMoveResize);
-            rootInfo.moveResizeRequest(winId(), e->globalX(), e->globalY(), NET::Move);
-
+                // Ask the window manager to start an interactive move operation.
+                NETRootInfo rootInfo(x11Info().display(), NET::WMMoveResize);
+                rootInfo.moveResizeRequest(winId(), e->globalX(), e->globalY(), NET::Move);
 #endif
+            }
         } else {
-            grabMouse();
-            m_lastPressPos = e->globalX();
+            m_vertResize = e->y() > height() - qMax(5, m_bottomBorderHeight);
+            m_rightResize = e->x() > width() - qMax(5, m_rightBorderWidth);
+            const bool leftResize = e->x() < qMax(5, m_leftBorderWidth);
+            m_lastPressPos = m_vertResize ? e->globalY() : e->globalX();
+
+            if (leftResize || m_rightResize || m_vertResize) {
+                // let's do a resize! :)
+                grabMouse();
+                m_resizing = true;
+            }
         }
 
         e->accept();
@@ -459,7 +468,7 @@
 
 void KRunnerDialog::mouseReleaseEvent(QMouseEvent *)
 {
-    if (!m_floating) {
+    if (m_lastPressPos != -1) {
         releaseMouse();
         unsetCursor();
         m_lastPressPos = -1;
@@ -499,11 +508,9 @@
 void KRunnerDialog::mouseMoveEvent(QMouseEvent *e)
 {
     //kDebug() << e->x() << m_leftBorderWidth << width() << m_rightBorderWidth;
-    if (m_floating) {
-        return;
-    }
-
-    if (m_lastPressPos != -1) {
+    if (m_lastPressPos == -1) {
+        checkCursor(e->pos());
+    } else {
         if (m_resizing) {
             if (m_vertResize) {
                 const int deltaY = e->globalY() - m_lastPressPos;
@@ -541,8 +548,6 @@
             move(newX, y());
             checkBorders(r);
         }
-    } else {
-        checkCursor(e->pos());
     }
 }
 
--- workspace/krunner/lock/kscreenlocker.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/krunner/lock/kscreenlocker.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Comment[gu]=સ્ક્રીનક્રિન સેવર
 Comment[hi]=स्क्रीन सेवर
 Comment[hr]=Čuvar zaslona
+Comment[hu]=Képernyővédő
 Comment[ia]=Salvator de Schermo
 Comment[id]=Penyimpan Layar
 Comment[is]=Skjáhvíla
@@ -48,6 +49,7 @@
 Comment[sv]=Skärmsläckare
 Comment[tg]=Пардаи экран
 Comment[th]=โปรแกรมรักษาจอภาพ
+Comment[tr]=Ekran Koruyucu
 Comment[uk]=Зберігач екрана
 Comment[x-test]=xxScreen Saverxx
 Comment[zh_CN]=屏幕保护程序
@@ -136,6 +138,7 @@
 Comment[gu]=સ્ક્રિન સેવર શરૂ કરાયેલ છે
 Comment[he]=שומר מסך החל
 Comment[hr]=Zaštita zaslona je pokrenuta
+Comment[hu]=A képernyővédő elindult
 Comment[ia]=Le salvator de schermo ha essite initiate
 Comment[id]=Penyimpan layar telah dijalankan
 Comment[is]=Skjáhvílan hefur verið ræst
@@ -200,6 +203,7 @@
 Name[he]=מסך נעול
 Name[hi]=स्क्रीन तालाबंद
 Name[hr]=Zaslon zaključan
+Name[hu]=A képernyő zárolt
 Name[ia]=Schermo Blocate
 Name[id]=Layar dikunci
 Name[is]=Skjár læstur
@@ -261,6 +265,7 @@
 Comment[he]=המסך ננעל
 Comment[hi]=स्क्रीन तालाबंद कर दिया  गया है
 Comment[hr]=Zaslon je zaključan
+Comment[hu]=A képernyő zárolt
 Comment[ia]=Le schermo ha essite blocate
 Comment[id]=Layar telah dikunci
 Comment[is]=Skjánum hefur verið læst
@@ -447,6 +452,7 @@
 Name[he]=משחרר מסך
 Name[hi]=स्क्रीन तालाबंद
 Name[hr]=Zaslon otključan
+Name[hu]=A képernyő feloldva
 Name[ia]=Schermo disblocate
 Name[id]=Layar tidak dikunci
 Name[is]=Skjár aflæstur
@@ -507,6 +513,7 @@
 Comment[gl]=A pantalla desatrancouse
 Comment[he]=מסך השתחרר
 Comment[hr]=Zaslon je otključan
+Comment[hu]=A képernyő feloldva
 Comment[ia]=Le schermo ha essite disblocate
 Comment[id]=Layar telah tidak dikunci
 Comment[is]=Skjánum hefur verið aflæst
@@ -571,6 +578,7 @@
 Name[he]=פתיחת נעילת המסך נכשלה
 Name[hi]=स्क्रीन ताला नहीं खुला
 Name[hr]=Neuspjelo otključavanje zaslona
+Name[hu]=A képernyő feloldása nem sikerült
 Name[ia]=Disbloco de Schermo falleva
 Name[id]=Gagal membuka kunci
 Name[is]=Aflæsing skjásins mistókst
--- workspace/libs/plasmagenericshell/scripting/containment.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/plasmagenericshell/scripting/containment.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -97,8 +97,8 @@
     QVariant readConfig(const QString &key, const QVariant &def = QString()) const { return Applet::readConfig(key, def); }
     void writeConfig(const QString &key, const QVariant &value) { Applet::writeConfig(key, value); }
 
-    QVariant readGlobalConfig(const QString &key, const QVariant &def = QString()) const { return Applet::readConfig(key, def); }
-    void writeGlobalConfig(const QString &key, const QVariant &value) { Applet::writeConfig(key, value); }
+    QVariant readGlobalConfig(const QString &key, const QVariant &def = QString()) const { return Applet::readGlobalConfig(key, def); }
+    void writeGlobalConfig(const QString &key, const QVariant &value) { Applet::writeGlobalConfig(key, value); }
 
     void reloadConfig() { Applet::reloadConfig(); }
 
--- workspace/libs/plasmagenericshell/scripting/widget.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/plasmagenericshell/scripting/widget.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -76,8 +76,8 @@
     QVariant readConfig(const QString &key, const QVariant &def = QString()) const { return Applet::readConfig(key, def); }
     void writeConfig(const QString &key, const QVariant &value) { Applet::writeConfig(key, value); }
 
-    QVariant readGlobalConfig(const QString &key, const QVariant &def = QString()) const { return Applet::readConfig(key, def); }
-    void writeGlobalConfig(const QString &key, const QVariant &value) { Applet::writeConfig(key, value); }
+    QVariant readGlobalConfig(const QString &key, const QVariant &def = QString()) const { return Applet::readGlobalConfig(key, def); }
+    void writeGlobalConfig(const QString &key, const QVariant &value) { Applet::writeGlobalConfig(key, value); }
 
     void reloadConfig() { Applet::reloadConfig(); }
 
--- workspace/libs/plasmagenericshell/scripting/scriptengine.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/plasmagenericshell/scripting/scriptengine.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -336,6 +336,10 @@
 
 bool ScriptEngine::isPanel(const Plasma::Containment *c)
 {
+    if (!c) {
+        return false;
+    }
+
     return c->containmentType() == Plasma::Containment::PanelContainment ||
            c->containmentType() == Plasma::Containment::CustomPanelContainment;
 }
--- workspace/libs/kephal/service/kephal.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/kephal/service/kephal.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -24,6 +24,7 @@
 Name[ga]=Bainisteoireacht Scáileán
 Name[hi]=डिस्पले प्रबंधन
 Name[hr]=Upravitelj zaslona
+Name[hu]=Képernyőkezelés
 Name[ia]=Gestion de Monstrator
 Name[id]=Manajemen Tampilan
 Name[is]=Skjáastjórnun
@@ -51,6 +52,7 @@
 Name[sv]=Skärmhantering
 Name[tg]=Идоракунии экран
 Name[th]=การจัดการระบบแสดงผล
+Name[tr]=Ekran Yönetimi
 Name[uk]=Керування дисплеєм
 Name[x-test]=xxDisplay Managementxx
 Name[zh_CN]=显示管理
@@ -72,6 +74,7 @@
 Comment[ga]=Bainistigh scáileáin agus aschuir fhíse
 Comment[he]=מנהל תצוגות ופלטי וידאו
 Comment[hr]=Upravlja zaslonskim i video izlazima
+Comment[hu]=Képernyők és videokimenetek kezelése
 Comment[ia]=Il gere egressos de video e monstratores
 Comment[id]=Atur keluaran tampilan dan video
 Comment[is]=Sýslar með skjái og vídeóúttök
--- workspace/libs/kworkspace/CMakeLists.txt	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/kworkspace/CMakeLists.txt	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -9,7 +9,7 @@
                         kactivityinfo.cpp
    )
 
-if(SOPRANO_PLUGIN_RAPTORPARSER_FOUND)
+if(SOPRANO_PLUGIN_RAPTORPARSER_FOUND AND SHAREDDESKTOPONTOLOGIES_ROOT_DIR)
 
 soprano_add_ontology(
    kworkspace_LIB_SRCS
@@ -37,7 +37,7 @@
 
 ADD_DEFINITIONS(-DHAVE_SOPRANO_PLUGIN_RAPTORPARSER=1)
 
-endif(SOPRANO_PLUGIN_RAPTORPARSER_FOUND)
+endif(SOPRANO_PLUGIN_RAPTORPARSER_FOUND AND SHAREDDESKTOPONTOLOGIES_ROOT_DIR)
 
 
 
--- workspace/libs/oxygen/oxygentileset.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/oxygen/oxygentileset.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -116,14 +116,24 @@
         r.getRect(&x0, &y0, &w, &h);
 
         // calculate pixmaps widths
-        qreal wRatio( qreal( _w1 )/qreal( _w1 + _w3 ) );
-        int wLeft = (t&Right) ? qMin( _w1, int(w*wRatio) ):_w1;
-        int wRight = (t&Left) ? qMin( _w3, int(w*(1.0-wRatio)) ):_w3;
+        int wLeft(0);
+        int wRight(0);
+        if( _w1+_w3 > 0 )
+        {
+            qreal wRatio( qreal( _w1 )/qreal( _w1 + _w3 ) );
+            wLeft = (t&Right) ? qMin( _w1, int(w*wRatio) ):_w1;
+            wRight = (t&Left) ? qMin( _w3, int(w*(1.0-wRatio)) ):_w3;
+        }
 
         // calculate pixmap heights
-        qreal hRatio( qreal( _h1 )/qreal( _h1 + _h3 ) );
-        int hTop = (t&Bottom) ? qMin( _h1, int(h*hRatio) ):_h1;
-        int hBottom = (t&Top) ? qMin( _h3, int(h*(1.0-hRatio)) ):_h3;
+        int hTop(0);
+        int hBottom(0);
+        if( _h1+_h3 > 0 )
+        {
+            qreal hRatio( qreal( _h1 )/qreal( _h1 + _h3 ) );
+            hTop = (t&Bottom) ? qMin( _h1, int(h*hRatio) ):_h1;
+            hBottom = (t&Top) ? qMin( _h3, int(h*(1.0-hRatio)) ):_h3;
+        }
 
         // calculate corner locations
         w -= wLeft + wRight;
--- workspace/libs/plasmaclock/clockapplet.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/plasmaclock/clockapplet.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -191,7 +191,7 @@
         if (!QDBusConnection::sessionBus().interface()->isServiceRegistered("org.kde.kttsd")) {
             QString error;
             if (KToolInvocation::startServiceByDesktopName("kttsd", QStringList(), &error)) {
-                KPassivePopup::message(i18n("Starting KTTSD Failed"), error, static_cast<QWidget *>(0));
+                KPassivePopup::message(i18n("Starting Jovie Text-to-Speech Service Failed"), error, static_cast<QWidget *>(0));
                 return;
             }
         }
--- workspace/libs/ksysguard/processcore/actions.actions	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/ksysguard/processcore/actions.actions	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -24,6 +24,7 @@
 Name[he]=KSysGuard
 Name[hi]=केडीई तंत्र रक्षक
 Name[hr]=KSysGuard
+Name[hu]=KSysGuard
 Name[ia]=KSysGuard
 Name[id]=KSysGuard
 Name[is]=KDE kerfisvörður
@@ -91,6 +92,7 @@
 Name[hr]=Uništi ili prekini (itd.) proces
 Name[ia]=Occider o stoppar etc un processo
 Name[id]=Matikan atau stop dll sebuah proses
+Name[is]=Drepa eða stöðva ferli
 Name[it]=Termina, ferma o fai altro a un processo
 Name[ja]=プロセスを停止/強制終了
 Name[kk]=Процесті доғару не тоқтату
--- workspace/libs/ksysguard/scripts/smaps/smaps.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/libs/ksysguard/scripts/smaps/smaps.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,8 @@
 Name[ga]=Faisnéis Mhionsonraithe Chuimhne
 Name[gu]=વિગત થયેલ મેમરી જાણકારી
 Name[hi]=विस्तृत मेमोरी जानकारी
+Name[hr]=Detaljne informacije o memoriji
+Name[hu]=Részletes memóriainformációk
 Name[ia]=Information de memoria detaliate
 Name[id]=Informasi Memori Lengkap
 Name[is]=Nánari upplýsingar um minnisnotkun
@@ -44,6 +46,7 @@
 Name[sr@latin]=Detaljni podaci o memoriji
 Name[sv]=Detaljerad minnesinformation
 Name[th]=ข้อมูลเกี่ยวกับหน่วยความจำ
+Name[tr]=Ayrıntılı Bellek Bilgileri
 Name[uk]=Докладні відомості щодо пам'яті
 Name[x-test]=xxDetailed Memory Informationxx
 Name[zh_CN]=内存的详细信息
--- workspace/kscreensaver/kblank_screensaver/kblank.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kscreensaver/kblank_screensaver/kblank.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -128,7 +128,7 @@
 Name[hne]=सेटअप...
 Name[hr]=Postavke…
 Name[hsb]=Připrawić...
-Name[hu]=Beállítás...
+Name[hu]=Beállítás…
 Name[ia]=Disposition ...
 Name[id]=Pengaturan...
 Name[is]=Stillingar...
--- workspace/kscreensaver/krandom_screensaver/krandom.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kscreensaver/krandom_screensaver/krandom.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -129,7 +129,7 @@
 Name[hne]=सेटअप...
 Name[hr]=Postavke…
 Name[hsb]=Připrawić...
-Name[hu]=Beállítás...
+Name[hu]=Beállítás…
 Name[ia]=Disposition ...
 Name[id]=Pengaturan...
 Name[is]=Stillingar...
--- workspace/freespacenotifier/freespacenotifier.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/freespacenotifier/freespacenotifier.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -45,6 +45,7 @@
 Name[sr@latin]=Izveštavač o slobodnom prostoru
 Name[sv]=Information om ledigt utrymme
 Name[th]=แจ้งให้ทราบถึงเนื้อที่ว่าง
+Name[tr]=Boş Alan Bildirici
 Name[uk]=Сповіщення про вільне місце
 Name[x-test]=xxFree Space Notifierxx
 Name[zh_CN]=空闲空间通知器
@@ -67,6 +68,7 @@
 Comment[hr]=Upozori kada nestaje prostora u mojoj korisničkoj mapi
 Comment[ia]=Il avisa quando il termina le spatio su tu dossier domo
 Comment[id]=Memperingatkan jika kehabisan ruang kosong di folder rumah anda
+Comment[is]=Varar við þegar lítið pláss er eftir í heimamöppunni þinni
 Comment[it]=Avvisa quando si sta finendo lo spazio nella tua cartella Home
 Comment[ja]=ホームフォルダの空き領域が少なくなったとき警告します
 Comment[kk]=Мекен қапшығыңызда орын тапшылығы туралы ескерту
--- workspace/freespacenotifier/freespacenotifier.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/freespacenotifier/freespacenotifier.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -45,6 +45,7 @@
 Comment[sr@latin]=KDE‑ov demon izveštavača o slobodnom prostoru
 Comment[sv]=KDE:s demon för information om ledigt utrymme
 Comment[th]=ดีมอนของ KDE สำหรับแจ้งให้ทราบถึงเนื้อที่ว่าง
+Comment[tr]=KDE Boş Alan Bildirme Servisi
 Comment[uk]=Фонова служба сповіщення про переповнення диска KDE
 Comment[x-test]=xxKDE Free Space Notifier Daemonxx
 Comment[zh_CN]=KDE 空闲空间通知守护程序
@@ -295,6 +296,7 @@
 Name[sr@latin]=Ponestaje prostora na disku
 Name[sv]=Diskutrymmet håller på att ta slut
 Name[th]=พื้นที่ว่างของดิสก์กำลังจะหมด
+Name[tr]=Düşük disk alanı üzerinde çalışıyor
 Name[uk]=Замало місця на диску
 Name[x-test]=xxRunning low on disk spacexx
 Name[zh_CN]=磁盘空间过低
@@ -340,6 +342,7 @@
 Comment[sr@latin]=Ponestaje vam prostora na disku
 Comment[sv]=Diskutrymmet håller på att ta slut
 Comment[th]=พื้นที่ว่างของดิสก์ของคุณกำลังจะหมด
+Comment[tr]=Düşük disk alanı üzerinde çalışıyorsunuz
 Comment[uk]=На вашому диску залишилося замало місця
 Comment[x-test]=xxYou are running low on disk spacexx
 Comment[zh_CN]=您现在的磁盘空间过低
--- workspace/kstyles/oxygen/oxygenframeshadow.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/oxygenframeshadow.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -144,7 +144,7 @@
         { return _area; }
 
         //! update geometry
-        virtual void updateGeometry( void );
+        virtual void updateGeometry( void ) = 0;
 
         //! update state
         virtual void updateState( bool, bool, qreal, AnimationMode )
@@ -152,15 +152,6 @@
 
         protected:
 
-        //! shadow sizes
-        enum
-        {
-            SHADOW_SIZE_TOP = 5,
-            SHADOW_SIZE_BOTTOM = 5,
-            SHADOW_SIZE_LEFT = 5,
-            SHADOW_SIZE_RIGHT = 5
-        };
-
         //! event handler
         virtual bool event(QEvent *e);
 
@@ -202,6 +193,9 @@
         virtual ~SunkenFrameShadow()
         {}
 
+        //! update geometry
+        virtual void updateGeometry( void );
+
         //! update state
         void updateState( bool focus, bool hover, qreal opacity, AnimationMode mode );
 
@@ -212,6 +206,15 @@
 
         private:
 
+        //! shadow sizes
+        enum
+        {
+            SHADOW_SIZE_TOP = 3,
+            SHADOW_SIZE_BOTTOM = 3,
+            SHADOW_SIZE_LEFT = 3,
+            SHADOW_SIZE_RIGHT = 3
+        };
+
         //! helper
         StyleHelper& _helper;
 
@@ -257,6 +260,15 @@
 
         private:
 
+        //! shadow sizes
+        enum
+        {
+            SHADOW_SIZE_TOP = 5,
+            SHADOW_SIZE_BOTTOM = 5,
+            SHADOW_SIZE_LEFT = 5,
+            SHADOW_SIZE_RIGHT = 5
+        };
+
         //! helper
         StyleHelper& _helper;
 
--- workspace/kstyles/oxygen/oxygen.kcfg	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/oxygen.kcfg	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -7,11 +7,14 @@
   <group name="Style"> 
     
     <!-- cache size -->
-    <entry name="MaxCacheSize" type = "Int" >
-       <default>100</default>
+    <entry name="MaxCacheSize" type = "Int">
+       <default>512</default>
     </entry>
+    <entry name="AnimationSteps" type = "Int">
+       <default>10</default>
+    </entry>
 
-    <entry name="ToolTipTransparent" type = "Bool" >
+    <entry name="ToolTipTransparent" type = "Bool">
        <default>true</default>
     </entry>
     <entry name="ToolTipDrawStyledFrames" type = "Bool">
--- workspace/kstyles/oxygen/animations/oxygenanimationdata.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenanimationdata.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -31,6 +31,7 @@
 {
 
     qreal AnimationData::OpacityInvalid = -1;
+    int AnimationData::steps_ = 0;
 
     //_________________________________________________________________________________
     void AnimationData::setupAnimation( const Animation::Pointer& animation, const QByteArray& property )
--- workspace/kstyles/oxygen/animations/oxygendatamap.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygendatamap.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -100,7 +100,7 @@
             if( iter == QMap<Key, Value>::end() ) return false;
 
             // delete value from map if found
-            if( iter.value() ) delete iter.value().data();
+            if( iter.value() ) iter.value().data()->deleteLater();
             QMap<Key, Value>::erase( iter );
 
             return true;
--- workspace/kstyles/oxygen/animations/oxygenspinboxdata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenspinboxdata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -93,7 +93,7 @@
 
         //! opacity
         void setUpArrowOpacity( qreal value )
-        { upArrowData_.opacity_ = value; }
+        { upArrowData_.opacity_ = digitize( value ); }
 
         //! animation
         Animation::Pointer upArrowAnimation( void ) const
@@ -110,7 +110,7 @@
 
         //! opacity
         void setDownArrowOpacity( qreal value )
-        { downArrowData_.opacity_ = value; }
+        { downArrowData_.opacity_ = digitize( value ); }
 
         //! animation
         Animation::Pointer downArrowAnimation( void ) const
--- workspace/kstyles/oxygen/animations/oxygenscrollbardata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenscrollbardata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -114,7 +114,7 @@
 
         //! addLine opacity
         virtual void setAddLineOpacity( qreal value )
-        { addLineData_.opacity_ = value; }
+        { addLineData_.opacity_ = digitize( value ); }
 
         //! addLine opacity
         virtual qreal addLineOpacity( void ) const
@@ -122,7 +122,7 @@
 
         //! subLine opacity
         virtual void setSubLineOpacity( qreal value )
-        { subLineData_.opacity_ = value; }
+        { subLineData_.opacity_ = digitize( value ); }
 
         //! subLine opacity
         virtual qreal subLineOpacity( void ) const
--- workspace/kstyles/oxygen/animations/oxygendockseparatordata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygendockseparatordata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -91,7 +91,7 @@
         { return horizontalData_.opacity_; }
 
         void setHorizontalOpacity( qreal value )
-        { horizontalData_.opacity_ = value; }
+        { horizontalData_.opacity_ = digitize( value ); }
 
         //@}
 
@@ -112,7 +112,7 @@
         { return verticalData_.opacity_; }
 
         void setVerticalOpacity( qreal value )
-        { verticalData_.opacity_ = value; }
+        { verticalData_.opacity_ = digitize( value ); }
 
         //@}
 
--- workspace/kstyles/oxygen/animations/oxygentoolbardata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygentoolbardata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -87,7 +87,7 @@
 
         //! animation opacity
         virtual void setOpacity( qreal value )
-        { opacity_ = value; }
+        { opacity_ = digitize( value ); }
 
         //! animation progress
         virtual qreal progress( void ) const
@@ -95,7 +95,7 @@
 
         //! animation progress
         virtual void setProgress( qreal value )
-        { progress_ = value; }
+        { progress_ = digitize( value ); }
 
         protected slots:
 
--- workspace/kstyles/oxygen/animations/oxygenanimations.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenanimations.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -66,6 +66,9 @@
     void Animations::setupEngines( void )
     {
 
+        // animation steps
+        AnimationData::setSteps( OxygenStyleConfigData::animationSteps() );
+
         {
             // default enability, duration and maxFrame
             bool animationsEnabled( OxygenStyleConfigData::animationsEnabled() );
--- workspace/kstyles/oxygen/animations/oxygengenericdata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygengenericdata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -68,7 +68,7 @@
 
         //! opacity
         virtual void setOpacity( qreal value )
-        { opacity_ = value; }
+        { opacity_ = digitize( value ); }
 
         private:
 
--- workspace/kstyles/oxygen/animations/oxygenanimationdata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenanimationdata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -32,6 +32,8 @@
 #include <QtCore/QWeakPointer>
 #include <QtGui/QWidget>
 
+#include <cmath>
+
 #include "oxygenanimation.h"
 
 namespace Oxygen
@@ -59,6 +61,10 @@
         //! duration
         virtual void setDuration( int ) = 0;
 
+        //! steps
+        static void setSteps( int value )
+        { steps_ = value; }
+
         //! enability
         virtual bool enabled( void ) const
         { return enabled_; }
@@ -85,6 +91,13 @@
         //! setup animation
         virtual void setupAnimation( const Animation::Pointer& animation, const QByteArray& property );
 
+        //! apply step
+        virtual qreal digitize( const qreal& value ) const
+        {
+            if( steps_ > 0 ) return std::floor( value*steps_ )/steps_;
+            else return value;
+        }
+
         private:
 
         //! guarded target
@@ -93,6 +106,9 @@
         //! enability
         bool enabled_;
 
+        //! steps
+        static int steps_;
+
     };
 
 }
--- workspace/kstyles/oxygen/animations/oxygenmenubardata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenmenubardata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -121,7 +121,7 @@
 
         //! current opacity
         virtual void setCurrentOpacity( qreal value )
-        { current_.opacity_ = value; }
+        { current_.opacity_ = digitize( value ); }
 
         //! current rect
         virtual const QRect& currentRect( void ) const
@@ -133,7 +133,7 @@
 
         //! previous opacity
         virtual void setPreviousOpacity( qreal value )
-        { previous_.opacity_ = value; }
+        { previous_.opacity_ = digitize( value ); }
 
         //! previous rect
         virtual const QRect& previousRect( void ) const
@@ -293,7 +293,7 @@
 
         //! animation opacity
         virtual void setOpacity( qreal value )
-        { opacity_ = value; }
+        { opacity_ = digitize( value ); }
 
         //! animation progress
         virtual qreal progress( void ) const
@@ -301,7 +301,7 @@
 
         //! animation progress
         virtual void setProgress( qreal value )
-        { progress_ = value; }
+        { progress_ = digitize( value ); }
 
         protected slots:
 
--- workspace/kstyles/oxygen/animations/oxygentabbardata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygentabbardata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -70,7 +70,7 @@
 
         //! current opacity
         virtual void setCurrentOpacity( qreal value )
-        { current_.opacity_ = value; }
+        { current_.opacity_ = digitize( value ); }
 
         //! current index
         virtual int currentIndex( void ) const
@@ -95,7 +95,7 @@
 
         //! previous opacity
         virtual void setPreviousOpacity( qreal value )
-        { previous_.opacity_ = value; }
+        { previous_.opacity_ = digitize( value ); }
 
         //! previous index
         virtual int previousIndex( void ) const
--- workspace/kstyles/oxygen/animations/oxygenmdiwindowdata.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/animations/oxygenmdiwindowdata.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -88,7 +88,7 @@
 
         //! opacity
         void setCurrentOpacity( qreal value )
-        { currentData_.opacity_ = value; }
+        { currentData_.opacity_ = digitize( value ); }
 
         //! animation
         Animation::Pointer currentAnimation( void ) const
@@ -104,7 +104,7 @@
 
         //! opacity
         void setPreviousOpacity( qreal value )
-        { previousData_.opacity_ = value; }
+        { previousData_.opacity_ = digitize( value ); }
 
         //! animation
         Animation::Pointer previousAnimation( void ) const
--- workspace/kstyles/oxygen/oxygenframeshadow.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/oxygenframeshadow.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -69,8 +69,8 @@
         else if( widget->parent() && widget->parent()->inherits( "QComboBoxPrivateContainer" ) )
         {
 
-                accepted = true;
-                flat = true;
+            accepted = true;
+            flat = true;
 
         }
 
@@ -236,6 +236,7 @@
         else shadow = new SunkenFrameShadow( area, helper );
         shadow->setParent(widget);
         shadow->updateGeometry();
+        shadow->show();
     }
 
     //____________________________________________________________________________________
@@ -338,7 +339,7 @@
     }
 
     //____________________________________________________________________________________
-    void FrameShadowBase::updateGeometry()
+    void SunkenFrameShadow::updateGeometry()
     {
 
         QWidget *widget = parentWidget();
@@ -350,22 +351,23 @@
 
             case Top:
             cr.setHeight( SHADOW_SIZE_TOP );
-            cr.adjust( -3, -3, 3, 0 );
+            cr.adjust( -1, -1, 1, 0 );
             break;
 
             case Left:
             cr.setWidth(SHADOW_SIZE_LEFT);
-            cr.adjust(-3, SHADOW_SIZE_TOP, 0, -SHADOW_SIZE_BOTTOM);
+            cr.adjust(-1, SHADOW_SIZE_TOP, 0, -SHADOW_SIZE_BOTTOM);
             break;
 
+
             case Bottom:
             cr.setTop(cr.bottom() - SHADOW_SIZE_BOTTOM + 1);
-            cr.adjust( -3, 0, 3, 3 );
+            cr.adjust( -1, 0, 1, 1 );
             break;
 
             case Right:
             cr.setLeft(cr.right() - SHADOW_SIZE_RIGHT + 1);
-            cr.adjust(0, SHADOW_SIZE_TOP, 3, -SHADOW_SIZE_BOTTOM);
+            cr.adjust(0, SHADOW_SIZE_TOP, 1, -SHADOW_SIZE_BOTTOM);
             break;
 
             case Unknown:
@@ -380,10 +382,20 @@
     void SunkenFrameShadow::updateState( bool focus, bool hover, qreal opacity, AnimationMode mode )
     {
         bool changed( false );
-        if( _focus != focus ) { _focus = focus; changed = true; }
-        if( _hover != hover ) { _hover = hover; changed = true; }
-        if( _opacity != opacity ) { _opacity = opacity; changed = true; }
-        if( _mode != mode ) { _mode = mode; changed = true; }
+        if( _focus != focus ) { _focus = focus; changed |= true; }
+        if( _hover != hover ) { _hover = hover; changed |= !_focus; }
+        if( _mode != mode )
+        {
+
+            _mode = mode;
+            changed |=
+                (_mode == AnimationNone) ||
+                (_mode == AnimationFocus) ||
+                (_mode == AnimationHover && !_focus );
+
+        }
+
+        if( _opacity != opacity ) { _opacity = opacity; changed |= (_mode != AnimationNone ); }
         if( changed )
         {
 
@@ -409,7 +421,6 @@
         if (QFrame *frame = qobject_cast<QFrame *>(parentWidget()))
         { if (frame->frameStyle() != (QFrame::StyledPanel | QFrame::Sunken)) return; }
 
-
         QWidget *parent = parentWidget();
         QRect r = parent->contentsRect();
         r.translate(mapFromParent(QPoint(0, 0)));
--- workspace/kstyles/oxygen/oxygenstyle.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/oxygenstyle.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -4467,11 +4467,9 @@
         Q_UNUSED( opt );
         Q_UNUSED( kOpt );
 
-        if( const QAbstractItemView *aiv = qobject_cast<const QAbstractItemView*>(widget) )
+        if( qobject_cast<const QAbstractItemView*>(widget) )
         {
-            if( OxygenStyleConfigData::viewDrawFocusIndicator() &&
-                aiv->selectionMode() != QAbstractItemView::SingleSelection &&
-                aiv->selectionMode() != QAbstractItemView::NoSelection)
+            if( OxygenStyleConfigData::viewDrawFocusIndicator() )
             {
 
                 const QRect r( rect.adjusted( 2, 0, -2, -2 ) );
--- workspace/kstyles/oxygen/transitions/oxygentransitions.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/transitions/oxygentransitions.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -49,6 +49,9 @@
     void Transitions::setupEngines( void )
     {
 
+        // animation steps
+        TransitionWidget::setSteps( OxygenStyleConfigData::animationSteps() );
+
         // default enability, duration and maxFrame
         bool animationsEnabled( OxygenStyleConfigData::animationsEnabled() );
 
--- workspace/kstyles/oxygen/transitions/oxygentransitiondata.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/transitions/oxygentransitiondata.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -44,6 +44,6 @@
 
     //_________________________________________________________________
     TransitionData::~TransitionData( void )
-    {}
+    { if( transition() ) transition().data()->deleteLater(); }
 
 }
--- workspace/kstyles/oxygen/transitions/oxygentransitionwidget.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/transitions/oxygentransitionwidget.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -42,6 +42,8 @@
     bool TransitionWidget::paintEnabled( void )
     { return paintEnabled_; }
 
+    int TransitionWidget::steps_ = 0;
+
     //________________________________________________
     TransitionWidget::TransitionWidget( QWidget* parent, int duration ):
         QWidget( parent ),
--- workspace/kstyles/oxygen/transitions/oxygentransitionwidget.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kstyles/oxygen/transitions/oxygentransitionwidget.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -31,6 +31,8 @@
 #include <QtCore/QWeakPointer>
 #include <QtGui/QWidget>
 
+#include <cmath>
+
 namespace Oxygen
 {
 
@@ -92,6 +94,10 @@
         int duration( void ) const
         { return ( animation_ ) ? animation_.data()->duration() : 0; }
 
+        //! steps
+        static void setSteps( int value )
+        { steps_ = value; }
+
         //!@name opacity
         //@{
 
@@ -99,7 +105,7 @@
         { return opacity_; }
 
         virtual void setOpacity( qreal value )
-        { opacity_ = value; }
+        { opacity_ = digitize( value ); }
 
         //@}
 
@@ -190,6 +196,13 @@
         //! fade pixmap
         virtual void fade( const QPixmap& source, QPixmap& target, qreal opacity, const QRect& ) const;
 
+        //! apply step
+        virtual qreal digitize( const qreal& value ) const
+        {
+            if( steps_ > 0 ) return std::floor( value*steps_ )/steps_;
+            else return value;
+        }
+
         private:
 
         //! Flags
@@ -219,6 +232,9 @@
         //! current state opacity
         qreal opacity_;
 
+        //! steps
+        static int steps_;
+
     };
 
 }
--- workspace/khotkeys/kcm_hotkeys/khotkeys.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/khotkeys/kcm_hotkeys/khotkeys.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -55,6 +55,7 @@
 Name[sv]=Egna webbgenvägar
 Name[tg]=Истинодҳои интихобӣ
 Name[th]=ทางลัดกำหนดเอง
+Name[tr]=Özel Kısayollar
 Name[uk]=Нетипові скорочення
 Name[x-test]=xxCustom Shortcutsxx
 Name[zh_CN]=自定义快捷键
--- workspace/khotkeys/data/konqueror_gestures_kde321.khotkeys	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/khotkeys/data/konqueror_gestures_kde321.khotkeys	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -2996,7 +2996,7 @@
 Name[kn]=ಹಾಳೆಯನ್ನು (ಟಾಬ್) ಮುಚ್ಚು
 Name[ko]=탭 닫기
 Name[ku]=Hilfirînê Bigire
-Name[lt]=Uždaryti kortelę
+Name[lt]=Užverti kortelę
 Name[lv]=Aizvērt cilni
 Name[mai]=टैब बन्न करू
 Name[mk]=Затвори ливче
--- workspace/khotkeys/data/kde32b1.khotkeys	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/khotkeys/data/kde32b1.khotkeys	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -3065,7 +3065,7 @@
 Comment=After pressing Win+E (Tux+E) a WWW browser will be launched, and it will open http://www.kde.org . You may run all kind of commands you can run in minicli (Alt+F2).
 Comment[ar]=بعد الضغط على Win+E  أو ( Tux+E) سيفتح المتصفح وستنقل مباشرة إلى http://www.kde.org تستطيع تشغيل كل الاوامر باضغط على (Alt+F2)
 Comment[bg]=След като натиснете Win+E (Tux+E), ще бъде стартиран уеб браузър, който ще отвори http://www.kde.org . Можете да стартирате всякакви команди (Alt+F2).
-Comment[ca]=Després de prémer Win+E (Tux+E), s'executarà el navegador web i s'obrirà http://www.kde.org . Podeu executar tot tipus d'ordres que es puguin executar en el minicli (Alt+F2).
+Comment[ca]=Després de prémer Win+E (Tux+E), s'executarà el navegador web i s'obrirà http://www.kde.org. Podeu executar tot tipus d'ordres que es puguin executar en el minicli (Alt+F2).
 Comment[ca@valencia]=Després de prémer Win+E (Tux+E), s'executarà el navegador web i s'obrirà http://www.kde.org . Podeu executar tot tipus d'ordes que es puguen executar en el minicli (Alt+F2).
 Comment[cs]=Po stisknutí Win-e se spustí webový prohlížeč a načte stránky http://www.kde.org. Můžete spouštět všechny typy příkazů, které lze používat ve spouštěči (Alt-F2).
 Comment[csb]=Pò wcësniãcô Win+E (Tux+E) bãdze zreszony przezérnik WWW, w jaczim bãdze òtemkłô starna http://www.kde.org . W mini-terminalu (Alt+F2) mòże zrëszëc wszëtczé ôrtë pòlétów.
--- workspace/kinfocenter/sidepanel.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/sidepanel.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -74,7 +74,7 @@
   emit activatedSlot(rootIndex);
 }
 
-QModelIndex SidePanel::mapToProxySource(QModelIndex index)
+QModelIndex SidePanel::mapToProxySource(const QModelIndex& index)
 {
   QModelIndex tmp = m_proxyModel->mapToSource(index);
   if(tmp.isValid() == true) return tmp;
--- workspace/kinfocenter/Categories/deviceinfocategory.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Categories/deviceinfocategory.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -5,11 +5,23 @@
 Icon=folder-documents
 
 Name=Lost And Found
+Name[ca]=Perdut i trobat
 Name[da]=Hittegods
+Name[de]=Nicht zuzuordnen
+Name[el]=Χάθηκαν και Βρέθηκαν
+Name[en_GB]=Lost And Found
 Name[es]=Objetos perdidos
 Name[et]=Kaotatud ja leitud
+Name[fr]=Objets trouvés
 Name[ga]=Earraí Caillte
+Name[hr]=Izgubljeno i nađeno
+Name[hu]=Elveszett és megtalált
+Name[ia]=Trovate e Perdite
+Name[is]=Tapað og fundið
 Name[it]=Oggetti smarriti
+Name[ko]=기타 프로그램
+Name[lv]=Pazudis un atrasts
+Name[nb]=Mistet og funnet
 Name[nds]=Passt narms sünst
 Name[nl]=Verloren en gevonden
 Name[pt]=Perdidos e Achados
@@ -20,6 +32,7 @@
 Name[sr@ijekavianlatin]=Izgubljeno-nađeno
 Name[sr@latin]=Izgubljeno-nađeno
 Name[sv]=Hittegods
+Name[tr]=Kayıplar ve Bulunanlar
 Name[uk]=Втрачено і знайдено
 Name[x-test]=xxLost And Foundxx
 Name[zh_CN]=未知类别
--- workspace/kinfocenter/Categories/lostfoundcategory.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Categories/lostfoundcategory.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -43,7 +43,7 @@
 Name[kn]=ಸಾಧನದ ಮಾಹಿತಿ
 Name[ko]=장치 정보
 Name[ku]=Agahiya Cîhazê
-Name[lt]=Įrenginio informacija
+Name[lt]=Informacija apie įrenginius
 Name[lv]=Ierīču informācija
 Name[mai]=डिवायस सूचना
 Name[mk]=Информации за уреди
--- workspace/kinfocenter/Categories/networkinfocategory.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Categories/networkinfocategory.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -5,11 +5,24 @@
 Icon=folder-documents
 
 Name=Network Information
+Name[ca]=Informació de la xarxa
 Name[da]=Netværksinformation
+Name[de]=Netzwerkinformationen
+Name[el]=Πληροφορίες δικτύου
+Name[en_GB]=Network Information
 Name[es]=Información de la red
 Name[et]=Võrguteave
+Name[fr]=Informations sur le réseau
 Name[ga]=Faisnéis Líonra
+Name[hr]=Mrežne informacije
+Name[hu]=Hálózatjellemzők
+Name[ia]=Information de Rete
+Name[is]=Netupplýsingar
 Name[it]=Informazioni sulla rete
+Name[ko]=네트워크 정보
+Name[lt]=Informacija apie tinklą
+Name[lv]=Tīkla informācija
+Name[nb]=Nettverksinformasjon
 Name[nds]=Nettwark-Informatschonen
 Name[nl]=Netwerkinformatie
 Name[pt]=Informação da Rede
@@ -20,6 +33,7 @@
 Name[sr@ijekavianlatin]=Podaci o mreži
 Name[sr@latin]=Podaci o mreži
 Name[sv]=Nätverksinformation
+Name[tr]=Ağ Bilgileri
 Name[uk]=Інформація щодо мережі
 Name[x-test]=xxNetwork Informationxx
 Name[zh_CN]=网络信息
--- workspace/kinfocenter/Categories/graphicalinfocategory.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Categories/graphicalinfocategory.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -5,11 +5,22 @@
 Icon=folder-documents
 
 Name=Graphical Information
+Name[ca]=Informació gràfica
 Name[da]=Grafikinformation
+Name[de]=Grafische Informationen
+Name[el]=Γραφικές πληροφορίες
+Name[en_GB]=Graphical Information
 Name[es]=Información gráfica
 Name[et]=Monitoriteave
+Name[fr]=Informations graphiques
 Name[ga]=Faisnéis Ghrafach
+Name[hr]=Grafičke informacije
+Name[ia]=Information Graphic
+Name[is]=Myndrænar upplýsingar
 Name[it]=Informazioni grafiche
+Name[ko]=그래픽 정보
+Name[lv]=Grafiskā informācija
+Name[nb]=Grafisk informasjon
 Name[nds]=Graafsche Informatschonen
 Name[nl]=Grafische informatie
 Name[pt]=Informação Gráfica
@@ -20,6 +31,7 @@
 Name[sr@ijekavianlatin]=Podaci o grafici
 Name[sr@latin]=Podaci o grafici
 Name[sv]=Grafisk information
+Name[tr]=Grafiksel Bilgiler
 Name[uk]=Графічна інформація
 Name[x-test]=xxGraphical Informationxx
 Name[zh_CN]=图形化信息
--- workspace/kinfocenter/Categories/kinfocentercategory.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Categories/kinfocentercategory.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -2,11 +2,21 @@
 Type=ServiceType
 X-KDE-ServiceType=KInfoCenterCategory
 Name=KInfoCenter Category
+Name[ca]=Categoria del KInfoCenter
 Name[da]=KInfoCenter-kategori
+Name[el]=Κατηγορία KInfoCenter
+Name[en_GB]=KInfoCentre Category
 Name[es]=Categoría de KInfoCenter
 Name[et]=KDE infokeskuse kategooria
+Name[fr]=Catégorie de KInfoCenter
 Name[ga]=Catagóir KInfoCenter
+Name[hr]=Kategorija KInfoCentera
+Name[ia]=Categoria de KInfoCenter
+Name[is]=Flokkur í KInfoCenter
 Name[it]=Categoria del centro d'informazione
+Name[ko]=KInfoCenter 분류
+Name[lv]=KInfoCenter kategorija
+Name[nb]=KInfoCenter-kategori
 Name[nds]=KDE-Infozentrum-Kategorie
 Name[nl]=Categorie KInfoCenter
 Name[pt]=Categoria do KInfoCenter
@@ -17,6 +27,7 @@
 Name[sr@ijekavianlatin]=Kategorija K‑infocentra
 Name[sr@latin]=Kategorija K‑infocentra
 Name[sv]=Kategori i informationscentralen
+Name[tr]=KDE Bilgi Merkezi Kategorisi
 Name[uk]=Категорія KInfoCenter
 Name[x-test]=xxKInfoCenter Categoryxx
 Name[zh_CN]=KDE 信息中心分类
--- workspace/kinfocenter/infokcmmodel.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/infokcmmodel.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -33,6 +33,11 @@
   createTreeItems();  
 }
 
+InfoKcmModel::~InfoKcmModel()
+{
+  delete m_root;
+}
+
 void InfoKcmModel::createTreeItems() 
 { 
   KService::List categoryList = KServiceTypeTrader::self()->query("KInfoCenterCategory");
--- workspace/kinfocenter/sidepanel.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/sidepanel.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -64,7 +64,7 @@
     /** 
     * Map a QAbstractItemModel index to a QSortFilterProxyModel index
     */
-    QModelIndex mapToProxySource(QModelIndex);
+    QModelIndex mapToProxySource(const QModelIndex&);
 
     // void filterSideMenu(QString);
 
--- workspace/kinfocenter/kcmtreeitem.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/kcmtreeitem.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -25,7 +25,6 @@
 
 //KDE
 #include <KDebug>
-
 KcmTreeItem::KcmTreeItem(const KService::Ptr module, KcmTreeItem *parent) : m_parent(parent), m_module(module), 
   m_moduleInfo(new KCModuleInfo(m_module))
 {
@@ -38,7 +37,7 @@
 KcmTreeItem::~KcmTreeItem()
 {
   qDeleteAll(m_children);
-  delete m_parent;
+  delete m_moduleInfo;
 }
 
 void KcmTreeItem::addChild(KcmTreeItem *child) 
--- workspace/kinfocenter/infokcmmodel.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/infokcmmodel.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -52,7 +52,9 @@
     * @param parent objects parent
     */
     InfoKcmModel(QObject *parent);
-    
+
+    ~InfoKcmModel();
+
     /** 
     * Get index of item in model 
     *
--- workspace/kinfocenter/Modules/infosummary/kcm_infosummary.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Modules/infosummary/kcm_infosummary.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,6 +28,7 @@
 Name[gu]=સારાંશ
 Name[hi]=संक्षेप
 Name[hr]=Sažetak
+Name[hu]=Áttekintő
 Name[ia]=Summario
 Name[id]=Kesimpulan
 Name[is]=Samantekt
@@ -82,6 +83,7 @@
 Comment[gu]=હાર્ડવેર જાણકારી સારાંશ
 Comment[hi]=हार्डवेयर जानकारी संक्षेप
 Comment[hr]=Sažetak informacija o hardveru
+Comment[hu]=Hardverjellemzők áttekintése
 Comment[ia]=Summario de information de hardware
 Comment[id]=Kesimpulan Informasi Peranti Keras
 Comment[is]=Samantekt vélbúnaðarupplýsinga
@@ -111,6 +113,7 @@
 Comment[sv]=Översikt av hårdvaruinformation
 Comment[tg]=Сахтафзор
 Comment[th]=ข้อมูลสรุปของฮาร์ดแวร์
+Comment[tr]=Donanım Bilgileri Özeti
 Comment[uk]=Резюме відомостей щодо обладнання
 Comment[x-test]=xxHardware Information Summaryxx
 Comment[zh_CN]=硬件信息摘要
--- workspace/kinfocenter/Modules/devinfo/devinfo.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/Modules/devinfo/devinfo.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,6 +28,7 @@
 Name[ga]=Amharcán Gléasanna
 Name[hi]=औजार प्रदर्शक
 Name[hr]=Preglednik uređaja
+Name[hu]=Eszközmegjelenítő
 Name[ia]=Visor de Dispositivo
 Name[id]=Penampil Divais
 Name[is]=Tækjaskoðun
@@ -56,6 +57,7 @@
 Name[sv]=Enhetsvisning
 Name[tg]=Намоишгари тасвирҳо
 Name[th]=ตัวแสดงอุปกรณ์
+Name[tr]=Aygıt Gösterici
 Name[uk]=Переглядач пристроїв
 Name[x-test]=xxDevice Viewerxx
 Name[zh_CN]=设备查看器
@@ -79,6 +81,7 @@
 Comment[ga]=Amharcán Gléasanna
 Comment[hi]=औजार प्रदर्शक
 Comment[hr]=Preglednik uređaja
+Comment[hu]=Eszközmegjelenítő
 Comment[ia]=Visor de dispositivo
 Comment[id]=Penampil Divais
 Comment[is]=Tækjaskoðun
@@ -106,6 +109,7 @@
 Comment[sr@latin]=Prikazivač uređaja
 Comment[sv]=Enhetsvisning
 Comment[th]=ตัวแสดงอุปกรณ์
+Comment[tr]=Aygıt Gösterici
 Comment[uk]=Переглядач пристроїв
 Comment[x-test]=xxDevice Viewerxx
 Comment[zh_CN]=设备查看器
--- workspace/kinfocenter/ToolTips/tooltipmanager.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/ToolTips/tooltipmanager.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -129,7 +129,7 @@
     showToolTip( d->item );
 }
 
-void ToolTipManager::showToolTip( QModelIndex menuItem )
+void ToolTipManager::showToolTip( const QModelIndex& menuItem )
 {
     if (QApplication::mouseButtons() & Qt::LeftButton) {
         return;
@@ -177,17 +177,17 @@
     KToolTip::showTip(QPoint(x, y), tip);
 }
 
-QWidget * ToolTipManager::createTipContent( QModelIndex item )
+QWidget * ToolTipManager::createTipContent( const QModelIndex& item )
 {
     QWidget * tipContent = new QWidget();
     QGridLayout* tipLayout = new QGridLayout();
 
-    QLayout * primaryLine = generateToolTipLine( &item, tipContent, QSize(32,32), true );
+    QLayout * primaryLine = generateToolTipLine( item, tipContent, QSize(32,32), true );
     tipLayout->addLayout( primaryLine, 0, 0 );
 
     for ( int done = 0; d->view->model()->rowCount( item ) > done; done = 1 + done ) {
         QModelIndex childItem = d->view->model()->index( done, 0, item );
-        QLayout * subLine = generateToolTipLine( &childItem, tipContent, QSize(24,24), false );
+        QLayout * subLine = generateToolTipLine( childItem, tipContent, QSize(24,24), false );
         tipLayout->addLayout( subLine, done + 2, 0 );
     }
 
@@ -203,10 +203,10 @@
     return tipContent;
 }
 
-QLayout * ToolTipManager::generateToolTipLine( QModelIndex * item, QWidget * toolTip, QSize iconSize, bool comment )
+QLayout * ToolTipManager::generateToolTipLine( const QModelIndex & item, QWidget * toolTip, const QSize& iconSize, bool comment )
 {
     SidePanel *sidePanel = static_cast<SidePanel*>(d->view);
-    KcmTreeItem *menuItem = static_cast<KcmTreeItem*>( sidePanel->mapToProxySource(*item).internalPointer() );
+    KcmTreeItem *menuItem = static_cast<KcmTreeItem*>( sidePanel->mapToProxySource(item).internalPointer() );
     
     QString text = menuItem->data(); 
     if ( comment ) {
--- workspace/kinfocenter/ToolTips/tooltipmanager.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kinfocenter/ToolTips/tooltipmanager.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -71,9 +71,9 @@
     void requestToolTip(const QModelIndex& index);
 
 private:
-    void showToolTip( QModelIndex menuItem );
-    QWidget * createTipContent( QModelIndex item );
-    QLayout * generateToolTipLine( QModelIndex * item, QWidget * toolTip, QSize iconSize, bool comment );
+    void showToolTip( const QModelIndex& menuItem );
+    QWidget * createTipContent( const QModelIndex& item );
+    QLayout * generateToolTipLine( const QModelIndex& item, QWidget * toolTip, const QSize& iconSize, bool comment );
 
     class Private;
     ToolTipManager::Private* d;
--- workspace/kwin/effects/desktopgrid/desktopgrid.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/desktopgrid/desktopgrid.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -586,7 +586,7 @@
             }
         if( d != highlightedDesktop ) // Highlight desktop
             {
-            if ( (me->buttons() & Qt::LeftButton) && !wasWindowMove )
+            if ( (me->buttons() & Qt::LeftButton) && !wasWindowMove && d <= effects->numberOfDesktops() )
                 {
                 EffectWindowList windows = effects->stackingOrder();
                 EffectWindowList stack;
@@ -640,7 +640,7 @@
             EffectWindow* w = isDesktop ? NULL : windowAt( me->pos());
             if ( w != NULL )
                 isDesktop = w->isDesktop();
-            if( w != NULL && ( w->isMovable() || w->isMovableAcrossScreens() ))
+            if( w != NULL && ( w->isMovable() || w->isMovableAcrossScreens() || isUsingPresentWindows() ))
                 { // Prepare it for moving
                 windowMoveDiff = w->pos() - unscalePos( me->pos(), NULL );
                 windowMove = w;
@@ -747,6 +747,10 @@
 
 void DesktopGridEffect::grabbedKeyboardEvent( QKeyEvent* e )
     {
+    if( timeline.value() != 1 ) // Block user input during animations
+        return;
+    if( windowMove != NULL )
+        return;
     if( e->type() == QEvent::KeyPress )
         {
         // check for global shortcuts
@@ -1250,6 +1254,11 @@
         case LayoutPager:
             orientation = Qt::Horizontal;
             gridSize = effects->desktopGridSize();
+            // sanity check: pager may report incorrect size in case of one desktop
+            if( numDesktops == 1 )
+                {
+                gridSize = QSize( 1, 1 );
+                }
             break;
         case LayoutAutomatic:
             y = sqrt( float( numDesktops ) ) + 0.5;
--- workspace/kwin/effects/glide/glide_config.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/glide/glide_config.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -48,6 +48,7 @@
 Name[sr@latin]=Uletanje
 Name[sv]=Glid
 Name[th]=ร่อนหน้าต่าง
+Name[tr]=Kaydır
 Name[uk]=Ковзання
 Name[x-test]=xxGlidexx
 Name[zh_CN]=滑行
--- workspace/kwin/effects/glide/glide.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/glide/glide.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -41,6 +41,7 @@
 Name[sr@latin]=Uletanje
 Name[sv]=Glid
 Name[th]=ร่อนหน้าต่าง
+Name[tr]=Kaydır
 Name[uk]=Ковзання
 Name[x-test]=xxGlidexx
 Name[zh_CN]=滑行
@@ -85,6 +86,7 @@
 Comment[sr@latin]=Prozori uleću pri otvaranju i izleću pri zatvaranju
 Comment[sv]=Glideffekt för fönster när de öppnas och stängs
 Comment[th]=ลูกเล่นที่ดูคล้ายการร่อนหน้าต่างเมื่อมีการเปิดหรือปิดหน้าต่าง
+Comment[tr]=Açılırken ve kapatılırken pencere Kaydırma efekti
 Comment[uk]=Ефекти ковзання вікон під час відкриття та закриття
 Comment[x-test]=xxWindows Glide Effect as they are open and closedxx
 Comment[zh_CN]=打开或关闭窗口时，使其呈现滑移效果
--- workspace/kwin/effects/presentwindows/presentwindows.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/presentwindows/presentwindows.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -325,7 +325,11 @@
             {
             m_motionManager.apply( w, data );
 
-            effects->paintWindow( w, mask | PAINT_WINDOW_LANCZOS, region, data );
+            if( !m_motionManager.areWindowsMoving() )
+                {
+                mask |= PAINT_WINDOW_LANCZOS;
+                }
+            effects->paintWindow( w, mask, region, data );
 
             QRect rect = m_motionManager.transformedGeometry( w ).toRect();
             if( m_showIcons )
--- workspace/kwin/effects/blur/blur.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/blur/blur.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -224,7 +224,7 @@
     const QRect screen(0, 0, displayWidth(), displayHeight());
     bool scaled = !qFuzzyCompare(data.xScale, 1.0) && !qFuzzyCompare(data.yScale, 1.0);
     bool translated = data.xTranslate || data.yTranslate;
-    bool transformed = scaled || translated;
+    bool transformed = scaled || translated || mask & PAINT_WINDOW_TRANSFORMED;
     bool hasAlpha = w->hasAlpha() || (w->hasDecoration() && effects->decorationsHaveAlpha());
     bool valid = target->valid() && shader->isValid();
 
--- workspace/kwin/effects/blur/blurshader.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/blur/blurshader.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -258,14 +258,14 @@
     stream << "\n";
     stream << "void main(void)\n";
     stream << "{\n";
-    stream << "    gl_TexCoord[0] = gl_TextureMatrix[0] * gl_MultiTexCoord0;\n\n";
+    stream << "    vec2 center = vec4(gl_TextureMatrix[0] * gl_MultiTexCoord0).st;\n\n";
 
     for (int i = 0; i < center; i++)
-        stream << "    samplePos" << i << " = gl_TexCoord[0].st + pixelSize * vec2("
+        stream << "    samplePos" << i << " = center + pixelSize * vec2("
                << -(1.5 + (center - i - 1) * 2.0) << ");\n";
-    stream << "    samplePos" << center << " = gl_TexCoord[0].st;\n";
+    stream << "    samplePos" << center << " = center;\n";
     for (int i = center + 1; i < size; i++)
-        stream << "    samplePos" << i << " = gl_TexCoord[0].st + pixelSize * vec2("
+        stream << "    samplePos" << i << " = center + pixelSize * vec2("
                << 1.5 + (i - center - 1) * 2.0 << ");\n";
     stream << "\n";
     stream << "    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;\n";
--- workspace/kwin/effects/resize/resize.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/resize/resize.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -22,6 +22,7 @@
 Name[he]=שנה גודל חלון
 Name[hi]=विंडो आकार बदलें
 Name[hr]=Promjena veličine prozora
+Name[hu]=Ablak átméretezése
 Name[ia]=Redimensionar Fenestra
 Name[id]=Ubah Ukuran Jendela
 Name[is]=Breyta stærð glugga
--- workspace/kwin/effects/dialogparent/dialogparent.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/effects/dialogparent/dialogparent.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -113,7 +113,7 @@
 Comment[mr]=वर्तमान सक्रीय संवादचे मुख्य चौकट काळसर करतो
 Comment[nb]=Gjør mor-vinduet til den aktive dialogen mørkere
 Comment[nds]=Maakt dat Moderfinstern vun den aktiven Dialoog düüsterer
-Comment[nl]=Maakt het venster dat bij het actieve dialoog hoort donkerder
+Comment[nl]=Maakt het venster dat bij de ouder van de actieve dialoog hoort donkerder
 Comment[nn]=Gjer foreldrevindauget til det aktive dialogvindauget mørkare
 Comment[pa]=ਮੌਜੂਦਾ ਐਕਟਿਵ ਡਾਈਲਾਗ ਉੱਤੇ ਮੁੱਢਲੇ ਵਿੰਡੋ ਦਾ ਪਰਛਾਵਾਂ
 Comment[pl]=Przyciemnia okna rodzica aktywnego okna dialogowego
--- workspace/kwin/clients/tabstrip/tabstrip.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/clients/tabstrip/tabstrip.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[he]=רצועת לשוניות
 Name[hi]=टैबपट्टी
 Name[hr]=Kartični prikaz
+Name[hu]=Tabstrip
 Name[ia]=Banda de Scheda (Tabstrip)
 Name[id]=Tabstrip
 Name[is]=Tabstrip
--- workspace/kwin/clients/aurorae/themes/example-deco/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/clients/aurorae/themes/example-deco/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -23,6 +23,7 @@
 Name[he]=דוגמא
 Name[hi]=उदाहरण
 Name[hr]=Primjer
+Name[hu]=Példa
 Name[ia]=Exemplo
 Name[id]=Contoh
 Name[is]=Dæmi
--- workspace/kwin/clients/aurorae/src/lib/auroraetab.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/clients/aurorae/src/lib/auroraetab.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -57,11 +57,22 @@
 
 void AuroraeTab::activeChanged()
 {
+    if (scene() == NULL) {
+        return;
+    }
     const ThemeConfig &config = m_theme->themeConfig();
     if (!config.useTextShadow()) {
         return;
     }
-    const bool active = static_cast<AuroraeScene*>(scene())->isActive();
+    AuroraeScene *s = static_cast<AuroraeScene*>(scene());
+    if (s->tabCount() > 1) {
+        // graphics effect seems to be not side effect free and drops scheduled updates
+        // rendering tabs unreadable, therefore disabled.
+        m_effect->setEnabled(false);
+    } else {
+        m_effect->setEnabled(true);
+    }
+    const bool active = s->isActive();
     m_effect->setXOffset(config.textShadowOffsetX());
     m_effect->setYOffset(config.textShadowOffsetY());
     m_effect->setColor(active ? config.activeTextShadowColor() : config.inactiveTextShadowColor());
--- workspace/kwin/clients/aurorae/src/lib/auroraescene.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/clients/aurorae/src/lib/auroraescene.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -820,6 +820,12 @@
     static_cast<QGraphicsLinearLayout*>(m_title->layout())->addItem(tab);
     tab->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
     m_title->layout()->invalidate();
+    // have to call active changed on each tab to update shadow effect
+    foreach (QGraphicsItem *item, items()) {
+        if (AuroraeTab *tab = dynamic_cast<AuroraeTab*>(item)) {
+            tab->activeChanged();
+        }
+    }
 }
 
 void AuroraeScene::addTabs(const QStringList &captions)
@@ -841,10 +847,16 @@
                 removeItem(tab);
                 --m_tabCount;
                 m_title->layout()->invalidate();
-                return;
+                break;
             }
         }
     }
+    // have to call active changed on each tab to update shadow effect
+    foreach (QGraphicsItem *item, items()) {
+        if (AuroraeTab *tab = dynamic_cast<AuroraeTab*>(item)) {
+            tab->activeChanged();
+        }
+    }
 }
 
 int AuroraeScene::tabCount() const
--- workspace/kwin/clients/oxygen/oxygenshadowcache.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/clients/oxygen/oxygenshadowcache.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -72,7 +72,7 @@
 
         // check if tileset already in cache
         int hash( key.hash() );
-        if( shadowCache_.contains(hash) ) return shadowCache_.object(hash);
+        if( enabled_ && shadowCache_.contains(hash) ) return shadowCache_.object(hash);
 
         // create tileset otherwise
         qreal size( shadowSize() );
@@ -94,7 +94,7 @@
 
         // check if tileset already in cache
         int hash( key.hash() );
-        if( animatedShadowCache_.contains(hash) ) return animatedShadowCache_.object(hash);
+        if( enabled_ && animatedShadowCache_.contains(hash) ) return animatedShadowCache_.object(hash);
 
         // create shadow and tileset otherwise
         qreal size( shadowSize() );
--- workspace/kwin/kcmkwin/kwindecoration/kwindecoration.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/kcmkwin/kwindecoration/kwindecoration.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -56,6 +56,7 @@
 Name[sr@latin]=Dekoracije prozora
 Name[sv]=Fönsterdekorationer
 Name[th]=ส่วนตกแต่งหน้าต่าง
+Name[tr]=Pencere Dekorasyonları
 Name[uk]=Обрамлення вікон
 Name[x-test]=xxWindow Decorationsxx
 Name[zh_CN]=窗口装饰
--- workspace/kwin/kcmkwin/kwindesktop/desktop.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/kcmkwin/kwindesktop/desktop.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -58,6 +58,7 @@
 Name[sr@latin]=Virtuelne površi
 Name[sv]=Virtuella skrivbord
 Name[th]=พื้นที่ทำงานเสมือน
+Name[tr]=Sanal Masaüstleri
 Name[uk]=Віртуальні стільниці
 Name[x-test]=xxVirtual Desktopsxx
 Name[zh_CN]=虚拟桌面
--- workspace/kwin/kcmkwin/kwinrules/kwinrules.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/kcmkwin/kwinrules/kwinrules.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,6 +28,8 @@
 Name[ga]=Rialacha Fuinneog
 Name[gu]=વિન્ડો નિયમો
 Name[hi]=विंडो निय
+Name[hr]=Pravila prozora
+Name[hu]=Ablakszabályok
 Name[ia]=Regulas de Window
 Name[id]=Aturan Jendela
 Name[is]=Gluggahegðunarreglur
@@ -56,6 +58,7 @@
 Name[sr@latin]=Pravila prozora
 Name[sv]=Fönsterregler
 Name[th]=กฎต่าง ๆ ของหน้าต่าง
+Name[tr]=Pencere Kuralları
 Name[uk]=Правила вікон
 Name[x-test]=xxWindow Rulesxx
 Name[zh_CN]=窗口规则
--- workspace/kwin/kcmkwin/kwintabbox/kwintabbox.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/kcmkwin/kwintabbox/kwintabbox.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -27,6 +27,7 @@
 Name[ga]=Malartóir Tascanna
 Name[hi]=कार्य बदल
 Name[hr]=Prebacivač zadataka
+Name[hu]=Feladatváltó
 Name[ia]=Commutator de Carga
 Name[id]=Pengganti Tugas
 Name[is]=Verkefnaskiptir
@@ -55,6 +56,7 @@
 Name[sr@latin]=Prebacivanje zadataka
 Name[sv]=Aktivitetsbyte
 Name[th]=ตัวสลับงาน
+Name[tr]=Görev Seçici
 Name[uk]=Перемикання задач
 Name[x-test]=xxTask Switcherxx
 Name[zh_CN]=任务切换器
--- workspace/kwin/kwin.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/kwin.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Comment[gu]=KWin વિન્ડો સંચાલક
 Comment[hi]=केविन विंडो प्रबंधक
 Comment[hr]=Upravitelj prozora KWin
+Comment[hu]=KWin ablakkezelő
 Comment[ia]=Gerente de Fenestra KWin
 Comment[id]=Manajer Jendela KWin
 Comment[is]=KWin gluggastjóri
@@ -47,6 +48,7 @@
 Comment[sv]=Kwin fönsterhanterare
 Comment[tg]=Мудири тирезаҳои KWin
 Comment[th]=ตัวจัดการหน้าต่าง KWin
+Comment[tr]=KWin Pencere Yöneticisi
 Comment[uk]=Керування вікнами KWin
 Comment[x-test]=xxKWin Window Managerxx
 Comment[zh_CN]=KWin 窗口管理器
@@ -3936,7 +3938,7 @@
 Name[kn]=ಕಿಟಕಿಯ ಮುಚ್ಚುವಿಕೆ
 Name[ko]=창 닫기
 Name[ku]=Paceyê Bigire
-Name[lt]=Uždaryti langą
+Name[lt]=Užverti langą
 Name[lv]=Loga aizvēršana
 Name[mk]=Затвори прозорец
 Name[ml]=ജാലകം അടയ്ക്കുക
@@ -6914,6 +6916,7 @@
 Name[fy]=Tegelje ynskeakele
 Name[ga]=Tíliú Cumasaithe
 Name[hi]=टायलिग सक्षम
+Name[hr]=Slaganje omogućeno
 Name[ia]=tegulas Habilitate
 Name[id]=Pengubinan Diaktifkan
 Name[is]=Flísalagningahamur virkur
@@ -6938,6 +6941,7 @@
 Name[sr@latin]=Popločavanje uključeno
 Name[sv]=Sida vid sida aktiverad
 Name[th]=การปูหน้าต่างถูกเปิดใช้งาน
+Name[tr]=Döşeme Etkinleştirildi
 Name[uk]=Мозаїчне розташування увімкнено
 Name[x-test]=xxTiling Enabledxx
 Name[zh_CN]=平铺已启用
@@ -6955,6 +6959,7 @@
 Comment[fr]=Le mode des fenêtres en mosaïque a été activé.
 Comment[fy]=Tegel modus is ynskeakele
 Comment[ga]=Cumasaíodh an mód tílithe
+Comment[hr]=Omogućeno je slaganje
 Comment[ia]=Le modo de tegula ha essite habilitate
 Comment[id]=Mode pengubinan telah diaktifkan
 Comment[is]=Flísalagningahamur hefur verið gerður virkur
@@ -6979,6 +6984,7 @@
 Comment[sr@latin]=Uključen je režim popločavanja
 Comment[sv]=Sida vid sida har aktiverats
 Comment[th]=โหมดปูหน้าต่างถูกเปิดใช้งาน
+Comment[tr]=Döşeme kipi etkinleştirildi
 Comment[uk]=Було увімкнено режим мозаїчного розташування
 Comment[x-test]=xxTiling mode has been enabledxx
 Comment[zh_CN]=已启用平铺模式
@@ -7001,6 +7007,7 @@
 Name[fy]=Tegelje útskeakele
 Name[ga]=Tíliú Díchumasaithe
 Name[hi]=टायलिंग अक्षम
+Name[hr]=Slaganje onemogućeno
 Name[ia]=tegulas dishabilitate
 Name[id]=Pengubinan Dinonaktifkan
 Name[is]=Flísalagningahamur óvirkur
@@ -7025,6 +7032,7 @@
 Name[sr@latin]=Popločavanje isključeno
 Name[sv]=Sida vid sida inaktiverad
 Name[th]=การปูหน้าต่างถูกปิดการใช้งาน
+Name[tr]=Döşeme Pasifleştirildi
 Name[uk]=Мозаїчне розташування вимкнено
 Name[x-test]=xxTiling Disabledxx
 Name[zh_CN]=平铺已禁用
@@ -7067,6 +7075,7 @@
 Comment[sr@latin]=Isključen je režim popločavanja
 Comment[sv]=Sida vid sida har inaktiverats
 Comment[th]=โหมดการปูหน้าต่างถูกปิดการใช้งาน
+Comment[tr]=Döşeme kipi pasifleştirildi
 Comment[uk]=Було вимкнено режим мозаїчного розташування
 Comment[x-test]=xxTiling mode has been disabledxx
 Comment[zh_CN]=已禁用平铺模式
@@ -7089,6 +7098,7 @@
 Name[fy]=Tegel utlis feroare
 Name[ga]=Athraíodh Leagan Amach na dTíleanna
 Name[hi]=टायलिंग खाका बदला
+Name[hr]=Promijenjen je raspored slaganja
 Name[ia]=Layout a tegulas Cambiate
 Name[id]=Tata Letak Pengubinan Diubah
 Name[it]=Schema di affiancamento modificato
@@ -7111,6 +7121,7 @@
 Name[sr@latin]=Raspored popločavanja promenjen
 Name[sv]=Utläggning sida vid sida ändrad
 Name[th]=รูปแบบการจัดเรียงของการปูหน้าต่างถูกเปลี่ยนแปลง
+Name[tr]=Döşeme Düzeni Değiştirildi
 Name[uk]=Мозаїчне компонування змінено
 Name[x-test]=xxTiling Layout Changedxx
 Name[zh_CN]=平铺布局已更改
@@ -7130,6 +7141,7 @@
 Comment[fy]=Tegel utlis is feroare
 Comment[ga]=Athraíodh leagan amach na dtíleanna
 Comment[hi]=टायलिंग खाका बदला गया
+Comment[hr]=Promijenjen je raspored slaganja
 Comment[ia]=Le Layout a tegulas ha essite cambiate
 Comment[id]=Tata Letak Pengubinan telah diubah
 Comment[it]=Lo schema di affiancamento è stato modificato
@@ -7152,6 +7164,7 @@
 Comment[sr@latin]=Promenjen je raspored popločavanja
 Comment[sv]=Utläggning sida vid sida har ändrats
 Comment[th]=รูปแบบการจัดเรียงของการปูหน้าต่างได้ถูกเปลี่ยนแปลง
+Comment[tr]=Döşeme Düzeni değiştirildi
 Comment[uk]=Було змінено мозаїчне компонування
 Comment[x-test]=xxTiling Layout has been changedxx
 Comment[zh_CN]=已更改平铺布局
--- workspace/kwin/lanczosfilter.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/lanczosfilter.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -53,19 +53,20 @@
     private:
         void init();
         void updateOffscreenSurfaces();
-        QVector<QVector4D> createKernel(float delta);
-        QVector<QVector2D> createOffsets(int count, float width, Qt::Orientation direction);
+        void createKernel(float delta, int *kernelSize);
+        void createOffsets(int count, float width, Qt::Orientation direction);
 #ifdef KWIN_HAVE_OPENGL_COMPOSITING
         GLTexture *m_offscreenTex;
         GLRenderTarget *m_offscreenTarget;
         GLShader *m_shader;
 #endif
         QBasicTimer m_timer;
+        QVector2D m_offsets[25];
+        QVector4D m_kernel[25];
         bool m_inited;
         int m_uTexUnit;
         int m_uOffsets;
         int m_uKernel;
-        int m_uKernelSize;
 };
 
 } // namespace
--- workspace/kwin/lanczos-fragment.glsl	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/lanczos-fragment.glsl	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -1,12 +1,11 @@
 uniform sampler2D texUnit;
 uniform vec2 offsets[25];
 uniform vec4 kernel[25];
-uniform int kernelSize;
 
 void main(void)
 {
     vec4 sum = texture2D(texUnit, gl_TexCoord[0].st) * kernel[0];
-    for (int i = 1; i < kernelSize; i++) {
+    for (int i = 1; i < 25; i++) {
         sum += texture2D(texUnit, gl_TexCoord[0].st - offsets[i]) * kernel[i];
         sum += texture2D(texUnit, gl_TexCoord[0].st + offsets[i]) * kernel[i];
     }
--- workspace/kwin/lanczosfilter.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/lanczosfilter.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -78,7 +78,6 @@
             {
             m_shader->bind();
             m_uTexUnit    = m_shader->uniformLocation("texUnit");
-            m_uKernelSize = m_shader->uniformLocation("kernelSize");
             m_uKernel     = m_shader->uniformLocation("kernel");
             m_uOffsets    = m_shader->uniformLocation("offsets");
             m_shader->unbind();
@@ -134,7 +133,7 @@
     return sinc( x ) * sinc( x / a );
     }
 
-QVector<QVector4D> LanczosFilter::createKernel( float delta )
+void LanczosFilter::createKernel( float delta, int *size )
     {
     const float a = 2.0;
 
@@ -146,7 +145,6 @@
     const float factor = 1.0 / delta;
 
     QVector<float> values( kernelSize );
-    QVector<QVector4D> kernel( kernelSize );
     float sum = 0;
 
     for ( int i = 0; i < kernelSize; i++ ) {
@@ -155,23 +153,24 @@
         values[i] = val;
     }
 
+    memset(m_kernel, 0, 25 * sizeof(QVector4D));
+
     // Normalize the kernel
     for ( int i = 0; i < kernelSize; i++ ) {
         const float val = values[i] / sum;
-        kernel[i] = QVector4D( val, val, val, val );
+        m_kernel[i] = QVector4D( val, val, val, val );
     }
 
-    return kernel;
+    *size = kernelSize;
     }
 
-QVector<QVector2D> LanczosFilter::createOffsets( int count, float width, Qt::Orientation direction )
+void LanczosFilter::createOffsets( int count, float width, Qt::Orientation direction )
     {
-    QVector<QVector2D> offsets( count );
+    memset(m_offsets, 0, 25 * sizeof(QVector2D));
     for ( int i = 0; i < count; i++ ) {
-        offsets[i] = ( direction == Qt::Horizontal ) ?
+        m_offsets[i] = ( direction == Qt::Horizontal ) ?
                 QVector2D( i / width, 0 ) : QVector2D( 0, i / width );
     }
-    return offsets;
     }
 
 void LanczosFilter::performPaint( EffectWindowImpl* w, int mask, QRegion region, WindowPaintData& data )
@@ -215,14 +214,14 @@
 
             // Set up the shader for horizontal scaling
             float dx = sw / float(tw);
-            QVector<QVector4D> kernel = createKernel( dx );
-            QVector<QVector2D> offsets = createOffsets( kernel.size(), sw, Qt::Horizontal );
+            int kernelSize;
+            createKernel( dx, &kernelSize );
+            createOffsets( kernelSize, sw, Qt::Horizontal );
 
             m_shader->bind();
             glUniform1i( m_uTexUnit, 0 );
-            glUniform1i( m_uKernelSize, kernel.size() );
-            glUniform2fv( m_uOffsets, offsets.size(), (const GLfloat*)offsets.constData() );
-            glUniform4fv( m_uKernel, kernel.size(), (const GLfloat*)kernel.constData() );
+            glUniform2fv( m_uOffsets, 25, (const GLfloat*)m_offsets );
+            glUniform4fv( m_uKernel, 25, (const GLfloat*)m_kernel );
 
             // Draw the window back into the FBO, this time scaled horizontally
             glClear( GL_COLOR_BUFFER_BIT );
@@ -243,12 +242,11 @@
 
             // Set up the shader for vertical scaling
             float dy = sh / float(th);
-            kernel = createKernel( dy );
-            offsets = createOffsets( kernel.size(), m_offscreenTex->height(), Qt::Vertical );
+            createKernel( dy, &kernelSize );
+            createOffsets( kernelSize, m_offscreenTex->height(), Qt::Vertical );
 
-            glUniform1i( m_uKernelSize, kernel.size() );
-            glUniform2fv( m_uOffsets, offsets.size(), (const GLfloat*)offsets.constData() );
-            glUniform4fv( m_uKernel, kernel.size(), (const GLfloat*)kernel.constData() );
+            glUniform2fv( m_uOffsets, 25, (const GLfloat*)m_offsets );
+            glUniform4fv( m_uKernel, 25, (const GLfloat*)m_kernel );
 
             float sx2 = tw / float(m_offscreenTex->width());
             float sy2 = 1 - (sh / float(m_offscreenTex->height()));
--- workspace/kwin/tiling.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kwin/tiling.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -175,7 +175,6 @@
     {
     if( tilingLayouts.value( c->desktop() ) == NULL )
         {
-        c->setGeometry( moveResizeGeom );
         return;
         }
     tilingLayouts[ c->desktop() ]->clientMoved( c, moveResizeGeom, orig );
--- workspace/kdm/kfrontend/pics/stripes.png.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kdm/kfrontend/pics/stripes.png.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -4,6 +4,7 @@
 Name[ar]=أشرطة
 Name[ca]=Bandes
 Name[ca@valencia]=Bandes
+Name[cs]=Proužky
 Name[da]=Striber
 Name[de]=Streifen
 Name[el]=Ρίγες
@@ -39,6 +40,7 @@
 Name[sr@ijekavianlatin]=Pruge
 Name[sr@latin]=Pruge
 Name[sv]=Ränder
+Name[tr]=Çizgiler
 Name[uk]=Смуги
 Name[x-test]=xxStripesxx
 Name[zh_CN]=Stripes
--- workspace/kdm/kfrontend/sessions/lxde.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kdm/kfrontend/sessions/lxde.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -99,6 +99,7 @@
 Comment[sv]=Lättviktig X11 skrivbordsmiljö
 Comment[tg]=Муҳити мизи кории Lightweight X11
 Comment[th]=Lightweight X11 desktop environment - ระบบพื้นที่ทำงานขนาดเบา
+Comment[tr]=Hafif bir X11 masaüstü ortamı
 Comment[uk]=Невибагливе стільничне середовище X11
 Comment[x-test]=xxLightweight X11 desktop environmentxx
 Comment[zh_CN]=轻量级 X11 桌面环境
--- workspace/kdm/kfrontend/kgverify.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/kdm/kfrontend/kgverify.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -279,6 +279,7 @@
 //    timer.stop();
     gSendInt(G_AutoLogin);
     coreState = CoreBusy;
+    sockNot->setEnabled(true);
 }
 
 QString // public
--- workspace/ksysguard/example/ksysguard.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/ksysguard/example/ksysguard.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Comment[gu]=સિસ્ટમ મોનિટર
 Comment[hi]=तंत्र मॉनीटर
 Comment[hr]=Nadzornik sustava
+Comment[hu]=Rendszermonitor
 Comment[ia]=Monitor de Systema
 Comment[id]=Monitor Sistem
 Comment[is]=Kerfiseftirlit
@@ -48,6 +49,7 @@
 Comment[sv]=Systemövervakare
 Comment[tg]=Монитори система
 Comment[th]=ติดตามการทำงานของระบบ
+Comment[tr]=Sistem İzleyici
 Comment[uk]=Нагляд за системою
 Comment[x-test]=xxSystem Monitorxx
 Comment[zh_CN]=系统监视器
--- workspace/plasma/screensaver/containments/screensaver/desktop.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/screensaver/containments/screensaver/desktop.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -35,6 +35,7 @@
 {
         setContainmentType(CustomContainment);
         connect(this, SIGNAL(appletAdded(Plasma::Applet *, const QPointF &)), SLOT(newApplet(Plasma::Applet *, const QPointF &)));
+        setHasConfigurationInterface(true);
 }
 
 SaverDesktop::~SaverDesktop()
--- workspace/plasma/screensaver/shell/plasmaapp.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/screensaver/shell/plasmaapp.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -299,6 +299,8 @@
             kDebug() << "view created";
         }
     }
+    //activate the new views (yes, this is a lazy way to do it)
+    setActive(m_active);
 }
 
 void PlasmaApp::setIdleOpacity(qreal opacity)
@@ -325,6 +327,9 @@
 
 void PlasmaApp::setActive(bool activate)
 {
+    m_active = activate;
+    //note: allow this to run even if the value isn't changed,
+    //because some views may need updating.
     if (activate) {
         emit setViewOpacity(m_activeOpacity);
         emit showViews();
--- workspace/plasma/screensaver/shell/plasmaapp.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/screensaver/shell/plasmaapp.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -134,6 +134,7 @@
 
     qreal m_activeOpacity;
     qreal m_idleOpacity;
+    bool m_active;
 };
 
 #endif // multiple inclusion guard
--- workspace/plasma/netbook/containments/sal/services/plasma-sal-education.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/containments/sal/services/plasma-sal-education.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -107,6 +107,7 @@
 Comment[he]=יישומים חינוכיים
 Comment[hi]=शेक्षणिक अनुप्रयोग
 Comment[hr]=Edukacijske aplikacije
+Comment[hu]=Oktatóalkalmazások
 Comment[ia]=Applicationes de Instruction
 Comment[id]=Aplikasi edukasi
 Comment[is]=Kennslu- og fræðsluforrit
--- workspace/plasma/netbook/containments/sal/services/plasma-sal-games.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/containments/sal/services/plasma-sal-games.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -113,6 +113,7 @@
 Comment[he]=אוסף משחקי כיף
 Comment[hi]=मस्ती भरे खेल
 Comment[hr]=Zbirka zabavnih igara
+Comment[hu]=Szórakoztató játékgyűjtemény
 Comment[ia]=Un collection de jocos divertente
 Comment[id]=Koleksi permainan seru
 Comment[is]=Safn sniðugra leikja
--- workspace/plasma/netbook/containments/sal/services/plasma-sal-contacts.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/containments/sal/services/plasma-sal-contacts.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -22,6 +22,7 @@
 Name[he]=אנשי קשר
 Name[hi]=संपर्क
 Name[hr]=Kontakti
+Name[hu]=Névjegyek
 Name[ia]=Contactos
 Name[id]=Kontak
 Name[is]=Tengiliðir
--- workspace/plasma/netbook/containments/newspaper/plasma-containment-newspaper.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/containments/newspaper/plasma-containment-newspaper.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -16,6 +16,7 @@
 Name[fy]=Krante aktiviteit
 Name[ga]=Gníomhaíocht Nuachtáin
 Name[hi]=समाचार पत्र क्रिया
+Name[hr]=Novinska aktivnost
 Name[ia]=Activitate de jornal
 Name[id]=Aktivitas Koran
 Name[is]=Verkferlar tengdir blaðaútgáfu
@@ -44,6 +45,7 @@
 Name[sr@latin]=novinska aktivnost
 Name[sv]=Tidningsaktivitet
 Name[th]=กิจกรรมแบบหนังสือพิมพ์
+Name[tr]=Gazete Eylemi
 Name[uk]=Газетний простір дій
 Name[x-test]=xxNewspaper Activityxx
 Name[zh_CN]=报纸活动容器
--- workspace/plasma/netbook/containments/netpanel/plasma-containment-netpanel.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/containments/netpanel/plasma-containment-netpanel.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -23,6 +23,7 @@
 Name[hr]=Ploča za Netbooke
 Name[ia]=Pannello pro Netbooks
 Name[id]=Panel untuk Komputer Mini
+Name[is]=Spjald fyrir smáfartölvur
 Name[it]=Pannello per ultraportatili
 Name[ja]=ネットブックのパネル
 Name[kk]=Нетбуктерге арналған панель
--- workspace/plasma/netbook/shell/data/layouts/plasma-layout-org.kde.plasma-netbook.defaultPage.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/shell/data/layouts/plasma-layout-org.kde.plasma-netbook.defaultPage.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Name[ga]=Leathanach a haon
 Name[hi]=पेज एक
 Name[hr]=Stranica jedan
+Name[hu]=Első oldal
 Name[ia]=Pagina uno
 Name[id]=Halaman satu
 Name[is]=Síða eitt
@@ -45,6 +46,7 @@
 Name[sr@latin]=Prva stranica
 Name[sv]=Sida ett
 Name[th]=หน้าหนึ่ง
+Name[tr]=Sayfa Bir
 Name[uk]=Перша сторінка
 Name[x-test]=xxPage onexx
 Name[zh_CN]=Page one
@@ -94,6 +96,7 @@
 Comment[sv]=Standardsida för nätdator
 Comment[tg]=Саҳифаи стандартии Netbook
 Comment[th]=หน้าปริยายของเน็ตบุ้ก
+Comment[tr]=Öntanımlı Netbook Sayfası
 Comment[uk]=Типова сторінка субноутбука
 Comment[x-test]=xxDefault Netbook Pagexx
 Comment[zh_CN]=默认上网本页面
--- workspace/plasma/netbook/shell/data/layouts/org.kde.plasma-netbook.defaultPage/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/shell/data/layouts/org.kde.plasma-netbook.defaultPage/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Name[ga]=Leathanach a haon
 Name[hi]=पेज एक
 Name[hr]=Stranica jedan
+Name[hu]=Első oldal
 Name[ia]=Pagina uno
 Name[id]=Halaman satu
 Name[is]=Síða eitt
@@ -45,6 +46,7 @@
 Name[sr@latin]=Prva stranica
 Name[sv]=Sida ett
 Name[th]=หน้าหนึ่ง
+Name[tr]=Sayfa Bir
 Name[uk]=Перша сторінка
 Name[x-test]=xxPage onexx
 Name[zh_CN]=Page one
@@ -94,6 +96,7 @@
 Comment[sv]=Standardsida för nätdator
 Comment[tg]=Саҳифаи стандартии Netbook
 Comment[th]=หน้าปริยายของเน็ตบุ้ก
+Comment[tr]=Öntanımlı Netbook Sayfası
 Comment[uk]=Типова сторінка субноутбука
 Comment[x-test]=xxDefault Netbook Pagexx
 Comment[zh_CN]=默认上网本页面
--- workspace/plasma/netbook/shell/data/layouts/plasma-layout-org.kde.plasma-netbook.defaultPanel.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/shell/data/layouts/plasma-layout-org.kde.plasma-netbook.defaultPanel.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,7 @@
 Name[gu]=મૂળભૂત નેટબુક પેનલ
 Name[hi]=डिफ़ॉल्ट नेटबुक पटल
 Name[hr]=Zadani Netbook panel
+Name[hu]=Alapértelmezett netbook panel
 Name[ia]=Pannello de Netbook Predefinite
 Name[id]=Panel Netbook Standar
 Name[is]=Sjálfgefið spjald fyrir smáfartölvur
@@ -45,6 +46,7 @@
 Name[sv]=Standardpanel för nätdator
 Name[tg]=Панели стандартии Netbook
 Name[th]=พาเนลปริยายของเน็ตบุ้ก
+Name[tr]=Öntanımlı Netbook Paneli
 Name[uk]=Типова панель субноутбука
 Name[x-test]=xxDefault Netbook Panelxx
 Name[zh_CN]=默认上网本面板
--- workspace/plasma/netbook/shell/data/layouts/plasma-layout-org.kde.plasma-netbook.defaultSal.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/shell/data/layouts/plasma-layout-org.kde.plasma-netbook.defaultSal.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Name[ga]=Cuardaigh agus tosaigh
 Name[hi]=खोज व लाँच
 Name[hr]=Pretraži i pokreni
+Name[hu]=Keresés és indítás
 Name[ia]=Cercar e Lancear
 Name[id]=Cari dan jalankan
 Name[is]=Leit að forritum og ræsing
@@ -46,6 +47,7 @@
 Name[sr@latin]=Traženje i pokretanje
 Name[sv]=Sök och starta
 Name[th]=การค้นหาและเรียกใช้งาน
+Name[tr]=Bul ve çalıştır
 Name[uk]=Рушій пошуку і запуску
 Name[x-test]=xxSearch and launchxx
 Name[zh_CN]=搜索与启动
--- workspace/plasma/netbook/shell/data/layouts/org.kde.plasma-netbook.defaultPanel/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/shell/data/layouts/org.kde.plasma-netbook.defaultPanel/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,7 @@
 Name[gu]=મૂળભૂત નેટબુક પેનલ
 Name[hi]=डिफ़ॉल्ट नेटबुक पटल
 Name[hr]=Zadani Netbook panel
+Name[hu]=Alapértelmezett netbook panel
 Name[ia]=Pannello de Netbook Predefinite
 Name[id]=Panel Netbook Standar
 Name[is]=Sjálfgefið spjald fyrir smáfartölvur
@@ -45,6 +46,7 @@
 Name[sv]=Standardpanel för nätdator
 Name[tg]=Панели стандартии Netbook
 Name[th]=พาเนลปริยายของเน็ตบุ้ก
+Name[tr]=Öntanımlı Netbook Paneli
 Name[uk]=Типова панель субноутбука
 Name[x-test]=xxDefault Netbook Panelxx
 Name[zh_CN]=默认上网本面板
--- workspace/plasma/netbook/shell/data/layouts/org.kde.plasma-netbook.defaultSal/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/shell/data/layouts/org.kde.plasma-netbook.defaultSal/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Name[ga]=Cuardaigh agus tosaigh
 Name[hi]=खोज व लाँच
 Name[hr]=Pretraži i pokreni
+Name[hu]=Keresés és indítás
 Name[ia]=Cercar e Lancear
 Name[id]=Cari dan jalankan
 Name[is]=Leit að forritum og ræsing
@@ -46,6 +47,7 @@
 Name[sr@latin]=Traženje i pokretanje
 Name[sv]=Sök och starta
 Name[th]=การค้นหาและเรียกใช้งาน
+Name[tr]=Bul ve çalıştır
 Name[uk]=Рушій пошуку і запуску
 Name[x-test]=xxSearch and launchxx
 Name[zh_CN]=搜索与启动
--- workspace/plasma/netbook/desktoptheme/air-netbook/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/netbook/desktoptheme/air-netbook/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gl]=Air para ultraportátiles
 Name[he]=‏Air לנטבוקים
 Name[hr]=Zrak za netbooke
+Name[hu]=Air netbookokra
 Name[ia]=Air pro netbooks
 Name[id]=Air untuk komputer mini
 Name[is]=Air fyrir smáfartölvur
--- workspace/plasma/desktop/containments/panel/plasma-containment-panel.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/containments/panel/plasma-containment-panel.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,7 @@
 Name[gu]=ખાલી પેનલ
 Name[hi]=खाली पटल
 Name[hr]=Prazan panel
+Name[hu]=Üres panel
 Name[ia]=Pannello vacue
 Name[id]=Panel Kosong
 Name[is]=Autt spjald
@@ -44,6 +45,7 @@
 Name[sr@latin]=prazan panel
 Name[sv]=Tom panel
 Name[th]=พาเนลว่าง
+Name[tr]=Boş Panel
 Name[uk]=Порожня панель
 Name[x-test]=xxEmpty Panelxx
 Name[zh_CN]=空面板
--- workspace/plasma/desktop/containments/desktop/plasma-containment-desktopdashboard.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/containments/desktop/plasma-containment-desktopdashboard.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -16,6 +16,7 @@
 Name[ga]=Painéal na Deisce
 Name[gu]=ડેસ્કટોપ ડેશબોર્ડ
 Name[hi]=डेस्कटॉप डैशबोर्ड
+Name[hr]=Nadzorna ploča radne površine
 Name[ia]=Dashboard de Scriptorio
 Name[id]=Dasbor Desktop
 Name[is]=Stjórnborð skjáborðsins
@@ -26,6 +27,7 @@
 Name[kn]=ಯಂತ್ರೋಪಕರಣ ಪಟ್ಟಿ  (ಡಾಶ್ ಬೋರ್ಡ್)
 Name[ko]=데스크톱 대시보드
 Name[lt]=Darbastalio prietaisų skydelis
+Name[lv]=Darbvirsmas panelis
 Name[nb]=Skrivebord-kontrollpult
 Name[nds]=Schriefdisch-Klockpaneel
 Name[nl]=Dashboard van bureaublad
@@ -42,6 +44,7 @@
 Name[sr@latin]=instrument-tabla površi
 Name[sv]=Skrivbordets instrumentpanel
 Name[th]=พื้นที่แดชบอร์ด
+Name[tr]=Masaüstü Kontrol Paneli
 Name[uk]=Панель приладів стільниці
 Name[x-test]=xxDesktop Dashboardxx
 Name[zh_CN]=桌面部件板
--- workspace/plasma/desktop/shell/panelview.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/panelview.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -205,6 +205,9 @@
 
     void updateStruts();
 
+    bool migratedFrom(int screenId) const;
+    void migrateTo(int screenId);
+
 protected:
     void moveEvent(QMoveEvent *event);
     void resizeEvent(QResizeEvent *event);
--- workspace/plasma/desktop/shell/controllerwindow.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/controllerwindow.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -35,6 +35,7 @@
 #include <Plasma/FrameSvg>
 #include <Plasma/Dialog>
 #include <Plasma/WindowEffects>
+#include <Plasma/View>
 
 #include "widgetsexplorer/widgetexplorer.h"
 #include "activitymanager/activitymanager.h"
@@ -157,6 +158,13 @@
 {
     if (m_graphicsWidget) {
         m_graphicsWidget->removeEventFilter(this);
+        if (m_graphicsWidget == m_widgetExplorer) {
+            m_widgetExplorer->deleteLater();
+            m_widgetExplorer = 0;
+        } else if (m_graphicsWidget == m_activityManager) {
+            m_activityManager->deleteLater();
+            m_activityManager = 0;
+        }
     }
 
     m_graphicsWidget = widget;
@@ -208,8 +216,6 @@
         int left, top, right, bottom;
         getContentsMargins(&left, &top, &right, &bottom);
 
-        QDesktopWidget *desktop = QApplication::desktop();
-
         QRect screenRect;
         //Try to use the screenId directly from the containment, because it won't fail.
         //If we dont' have containment. try to get the screen by using QWidget::pos(), but it
@@ -386,7 +392,6 @@
         m_watchedWidget = m_widgetExplorer;
         setGraphicsWidget(m_widgetExplorer);
     }
-
 }
 
 void ControllerWindow::showActivityManager()
@@ -415,7 +420,6 @@
         m_activityManager->show();
         setGraphicsWidget(m_activityManager);
     }
-
 }
 
 bool ControllerWindow::isControllerViewVisible() const
@@ -432,12 +436,13 @@
 {
     Q_UNUSED(id)
 
-    //if the active window isn't the plasma desktop and the widgets explorer is visible,
-    //then close the panel controller
-    if (QApplication::activeWindow() == 0 || (QApplication::activeWindow()->winId() != KWindowSystem::activeWindow())) {
-        if (m_view && m_view->isVisible() && !isActiveWindow()) {
-            //close();
-        }
+    // if the active window isn't a Plasma::View and the widgets explorer is visible,
+    // or the activityManager is visible, and we are no longer the active window but still
+    // visible on-screen, then close up shop
+    if ((m_activityManager ||
+         (m_widgetExplorer && !qobject_cast<Plasma::View *>(QApplication::activeWindow()))) &&
+        isControllerViewVisible() && !isActiveWindow()) {
+        close();
     }
 }
 
--- workspace/plasma/desktop/shell/plasmaapp.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/plasmaapp.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -152,13 +152,18 @@
     void wallpaperCheckedIn();
     void wallpaperCheckInTimeout();
     void dashboardClosed();
+    void relocatePanels();
 
 private:
     DesktopCorona *m_corona;
+
     QList<PanelView*> m_panels;
     QList<QWeakPointer<Plasma::Containment> > m_panelsWaiting;
+    QList<QWeakPointer<Plasma::Containment> > m_panelRelocationCandidates;
+
+    QList<DesktopView*> m_desktops;
     QList<QWeakPointer<Plasma::Containment> > m_desktopsWaiting;
-    QList<DesktopView*> m_desktops;
+
     QTimer m_panelViewCreationTimer;
     QTimer m_desktopViewCreationTimer;
     QWeakPointer<InteractiveConsole> m_console;
--- workspace/plasma/desktop/shell/panelapplethandle.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/panelapplethandle.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -56,6 +56,7 @@
 protected Q_SLOTS:
     void configureApplet();
     void closeApplet();
+    void appletDestroyed();
     void updatePalette();
 
 Q_SIGNALS:
--- workspace/plasma/desktop/shell/data/layouts/org.kde.plasma-desktop.defaultPanel/metadata.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/data/layouts/org.kde.plasma-desktop.defaultPanel/metadata.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Name[gu]=મૂળભૂત પેનલ
 Name[hi]=डिफ़ॉल्ट पटल
 Name[hr]=Zadani panel
+Name[hu]=Alapértelmezett panel
 Name[ia]=Pannello Predefinite
 Name[id]=Panel Standar
 Name[is]=Sjálfgefið spjald
@@ -46,6 +47,7 @@
 Name[sv]=Standardpanel
 Name[tg]=Панели стандартӣ
 Name[th]=พาเนลปริยาย
+Name[tr]=Öntanımlı Panel
 Name[uk]=Типова панель
 Name[x-test]=xxDefault Panelxx
 Name[zh_CN]=默认面板
--- workspace/plasma/desktop/shell/data/layouts/plasma-layout-org.kde.plasma-desktop.defaultPanel.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/data/layouts/plasma-layout-org.kde.plasma-desktop.defaultPanel.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -18,6 +18,7 @@
 Name[gu]=મૂળભૂત પેનલ
 Name[hi]=डिफ़ॉल्ट पटल
 Name[hr]=Zadani panel
+Name[hu]=Alapértelmezett panel
 Name[ia]=Pannello Predefinite
 Name[id]=Panel Standar
 Name[is]=Sjálfgefið spjald
@@ -46,6 +47,7 @@
 Name[sv]=Standardpanel
 Name[tg]=Панели стандартӣ
 Name[th]=พาเนลปริยาย
+Name[tr]=Öntanımlı Panel
 Name[uk]=Типова панель
 Name[x-test]=xxDefault Panelxx
 Name[zh_CN]=默认面板
--- workspace/plasma/desktop/shell/data/plasma-desktop.notifyrc	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/data/plasma-desktop.notifyrc	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -198,6 +198,7 @@
 Comment[hr]=Novi widget postao je dostupan na mreži
 Comment[ia]=Un nove elemento graphic (widget) ha devenite disponibile in le rete
 Comment[id]=Sebuah widget baru telah tersedia di dalam jaringan.
+Comment[is]=Ný græja er orðin tiltæk á netinu.
 Comment[it]=Un nuovo oggetto è stato reso disponibile in rete.
 Comment[ja]=新しいウィジェットがネットワーク上に公開されました。
 Comment[kk]=Желіде жаңа виджет жарық көрді.
--- workspace/plasma/desktop/shell/panelview.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/panelview.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -1196,6 +1196,31 @@
     recreateUnhideTrigger();
 }
 
+bool PanelView:: migratedFrom(int screenId) const
+{
+    KConfigGroup cg = config();
+    QList<int> migrations;
+    migrations = cg.readEntry("Migrations", migrations);
+    return migrations.contains(screenId);
+}
+
+void PanelView::migrateTo(int screenId)
+{
+    KConfigGroup cg = config();
+    QList<int> migrations;
+    migrations = cg.readEntry("Migrations", migrations);
+
+    const int index = migrations.indexOf(screenId);
+    if (index == -1) {
+        migrations.append(screenId);
+    } else {
+        migrations = migrations.mid(0, migrations.length() - index - 1);
+    }
+
+    cg.writeEntry("Migrations", migrations);
+    setScreen(screenId);
+}
+
 void PanelView::enterEvent(QEvent *event)
 {
     // allow unhiding to happen again even if we were delay-unhidden
@@ -1396,6 +1421,7 @@
     //avoid hide-show loops
     if (m_visibilityMode == LetWindowsCover) {
         m_triggerEntered = true;
+        KWindowSystem::clearState(winId(), NET::KeepBelow);
         KWindowSystem::raiseWindow(winId());
         QTimer::singleShot(0, this, SLOT(resetTriggerEnteredSuppression()));
     }
@@ -1447,6 +1473,7 @@
     }
 
     if (m_visibilityMode == LetWindowsCover) {
+        KWindowSystem::setState(winId(), NET::KeepBelow);
         KWindowSystem::lowerWindow(winId());
         createUnhideTrigger();
     } else {
--- workspace/plasma/desktop/shell/activitymanager/activityicon.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/activitymanager/activityicon.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -52,7 +52,7 @@
 
 QPixmap ActivityIcon::pixmap(const QSize &size)
 {
-    return m_activity->pixmap(size);
+    return m_activity ? m_activity->pixmap(size) : QPixmap();
 }
 
 QMimeData* ActivityIcon::mimeData()
@@ -65,6 +65,10 @@
 {
     AbstractIcon::paint(painter, option, widget);
 
+    if (!m_activity) {
+        return;
+    }
+
     const QRectF rect = contentsRect();
     QSize cornerIconSize(KIconLoader::SizeSmall, KIconLoader::SizeSmall);
     qreal iconX = rect.x() + qMax<double>(0.0, (rect.width() - iconSize()) / 2.0); //icon's centered
@@ -95,6 +99,10 @@
 
 void ActivityIcon::mouseReleaseEvent(QGraphicsSceneMouseEvent *event)
 {
+    if (!m_activity) {
+        return;
+    }
+
     //check whether one of our corner icons was clicked
     //FIXME this is duplicate code, should get cleaned up later
     const QRectF rect = contentsRect();
@@ -108,7 +116,7 @@
         if (m_activity->isRunning()) {
             m_activity->close();
         } else {
-            m_activity->destroy();
+            QTimer::singleShot(0, m_activity, SLOT(destroy()));
         }
         return;
     }
@@ -126,6 +134,7 @@
     if (removable == m_removable) {
         return;
     }
+
     m_removable = removable;
     update();
 }
@@ -135,3 +144,11 @@
     return m_activity;
 }
 
+void ActivityIcon::activityRemoved()
+{
+    m_activity = 0;
+    deleteLater();
+}
+
+#include "activityicon.moc"
+
--- workspace/plasma/desktop/shell/activitymanager/activitylist.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/activitymanager/activitylist.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -101,8 +101,11 @@
 
 void ActivityList::activityRemoved(const QString &id)
 {
-    Plasma::AbstractIcon* icon = m_allAppletsHash.take(id);
-    delete icon;
+    ActivityIcon *icon = qobject_cast<ActivityIcon *>(m_allAppletsHash.take(id));
+
+    if (icon) {
+        icon->activityRemoved();
+    }
 /*
     if (m_allAppletsHash.count() == 1) {
         ActivityIcon *icon = qobject_cast<ActivityIcon*>(m_allAppletsHash.values().first());
--- workspace/plasma/desktop/shell/activitymanager/activityicon.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/activitymanager/activityicon.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -36,6 +36,7 @@
 
         void setRemovable(bool removable);
         Activity* activity();
+        void activityRemoved();
 
         QPixmap pixmap(const QSize &size);
         QMimeData* mimeData();
--- workspace/plasma/desktop/shell/plasmaapp.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/plasmaapp.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -664,7 +664,7 @@
     QList<Kephal::Screen *> screens = Kephal::Screens::self()->screens();
     screens.removeAll(primary);
 
-    // Now we process panels: if there is room on another sreen for the panel,
+    // Now we process panels: if there is room on another screen for the panel,
     // we migrate the panel there, otherwise the view is deleted. The primary
     // screen is preferred in all cases.
     QMutableListIterator<PanelView*> pIt(m_panels);
@@ -684,7 +684,7 @@
             }
 
             if (moveTo) {
-                panel->containment()->setScreen(moveTo->id());
+                panel->migrateTo(moveTo->id());
             } else {
                 pIt.remove();
                 delete panel;
@@ -704,6 +704,12 @@
             m_panelViewCreationTimer.start();
         }
     }
+
+    foreach (PanelView *view, m_panels) {
+        if (view->migratedFrom(screen->id())) {
+            view->migrateTo(screen->id());
+        }
+    }
 }
 
 bool PlasmaApp::canRelocatePanel(PanelView * view, Kephal::Screen *screen)
@@ -740,7 +746,7 @@
         if (pv != view &&
             pv->screen() == screen->id() &&
             pv->location() == view->location() &&
-            !pv->geometry().intersects(newGeom)) {
+            pv->geometry().intersects(newGeom)) {
             return false;
             break;
         }
@@ -919,11 +925,6 @@
     const QList<QWeakPointer<Plasma::Containment> > containments = m_panelsWaiting;
     m_panelsWaiting.clear();
 
-    Kephal::Screen *primary = Kephal::Screens::self()->primaryScreen();
-    QList<Kephal::Screen *> screens = Kephal::Screens::self()->screens();
-    screens.removeAll(primary);
-
-    QList<Plasma::Containment *> relocationCandidates;
     foreach (QWeakPointer<Plasma::Containment> containmentPtr, containments) {
         Plasma::Containment *containment = containmentPtr.data();
         if (!containment) {
@@ -942,16 +943,32 @@
 
         // try to relocate the panel if it is on a now-non-existent screen
         if (containment->screen() >= Kephal::ScreenUtils::numScreens()) {
-            relocationCandidates << containment;
+            m_panelRelocationCandidates << containment;
             continue;
         }
 
         createPanelView(containment);
     }
 
+    if (!m_panelRelocationCandidates.isEmpty()) {
+        QTimer::singleShot(0, this, SLOT(relocatePanels()));
+    }
+}
+
+void PlasmaApp::relocatePanels()
+{
     // we go through relocatables last so that all other panels can be set up first,
     // preventing panel creation ordering to trip up the canRelocatePanel algorithm
-    foreach (Plasma::Containment *containment, relocationCandidates) {
+    Kephal::Screen *primary = Kephal::Screens::self()->primaryScreen();
+    QList<Kephal::Screen *> screens = Kephal::Screens::self()->screens();
+    screens.removeAll(primary);
+
+    foreach (QWeakPointer<Plasma::Containment> c, m_panelRelocationCandidates) {
+        Plasma::Containment *containment = c.data();
+        if (!containment) {
+            continue;
+        }
+
         Kephal::Screen *moveTo = 0;
         PanelView *panelView = createPanelView(containment);
         if (canRelocatePanel(panelView, primary)) {
@@ -966,12 +983,14 @@
         }
 
         if (moveTo) {
-            containment->setScreen(moveTo->id(), -1);
+            panelView->migrateTo(moveTo->id());
         } else {
             m_panels.removeAll(panelView);
             delete panelView;
         }
     }
+
+    m_panelRelocationCandidates.clear();
 }
 
 PanelView *PlasmaApp::createPanelView(Plasma::Containment *containment)
--- workspace/plasma/desktop/shell/panelapplethandle.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/panelapplethandle.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -92,6 +92,10 @@
         moveToApplet();
         return;
     }
+    Plasma::Applet *oldApplet = m_applet.data();
+    if (oldApplet) {
+        disconnect(oldApplet, SIGNAL(destroyed()), this, SLOT(appletDestroyed()));
+    }
 
     m_applet = applet;
     m_hideTimer->stop();
@@ -112,6 +116,8 @@
         QAction *configAction = applet->action("configure");
         m_configureButton->setVisible(configAction && configAction->isEnabled());
 
+        connect(applet, SIGNAL(destroyed()), this, SLOT(appletDestroyed()));
+
         moveToApplet();
     }
 }
@@ -138,25 +144,38 @@
 void PanelAppletHandle::startHideTimeout()
 {
     m_hideTimer->start(800);
-    if (m_applet) {
-        Plasma::WindowEffects::slideWindow(this, m_applet.data()->location());
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        Plasma::WindowEffects::slideWindow(this, applet->location());
     }
 }
 
 void PanelAppletHandle::configureApplet()
 {
-    if (m_applet) {
-        m_applet.data()->showConfigurationInterface();
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        applet->showConfigurationInterface();
     }
 }
 
 void PanelAppletHandle::closeApplet()
 {
-    if (m_applet) {
-        m_applet.data()->destroy();
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        applet->destroy();
     }
 }
 
+void PanelAppletHandle::appletDestroyed()
+{
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        disconnect(applet, SIGNAL(destroyed()), this, SLOT(appletDestroyed()));
+        m_applet.clear();
+    }
+    hide();
+}
+
 void PanelAppletHandle::enterEvent(QEvent *event)
 {
     Q_UNUSED(event)
@@ -173,17 +192,26 @@
 
 void PanelAppletHandle::mousePressEvent(QMouseEvent *event)
 {
-    emit mousePressed(m_applet.data(), event);
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        emit mousePressed(applet, event);
+    }
 }
 
 void PanelAppletHandle::mouseMoveEvent(QMouseEvent *event)
 {
-    emit mouseMoved(m_applet.data(), event);
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        emit mouseMoved(applet, event);
+    }
 }
 
 void PanelAppletHandle::mouseReleaseEvent(QMouseEvent *event)
 {
-    emit mouseReleased(m_applet.data(), event);
+    Plasma::Applet *applet = m_applet.data();
+    if (applet) {
+        emit mouseReleased(applet, event);
+    }
 }
 
 
--- workspace/plasma/desktop/shell/activity.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/shell/activity.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -31,6 +31,7 @@
 #include <KConfig>
 #include <KIcon>
 #include <KMessageBox>
+#include <KStandardDirs>
 #include <KWindowSystem>
 #include <kephal/screens.h>
 
@@ -116,7 +117,9 @@
         foreach (Plasma::Containment *c, m_containments) {
             c->destroy(false);
         }
-        //FIXME delete your saved ones too
+
+        const QString name = "activities/" + m_id;
+        QFile::remove(KStandardDirs::locateLocal("appdata", name));
     }
 }
 
@@ -241,8 +244,7 @@
 
 void Activity::close()
 {
-    QString name = "activities/";
-    name += m_id;
+    const QString name = "activities/" + m_id;
     KConfig external(name, KConfig::SimpleConfig, "appdata");
     foreach (const QString &group, external.groupList()) {
         KConfigGroup cg(&external, group);
--- workspace/plasma/desktop/applets/trash/plasma-applet-trash.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/trash/plasma-applet-trash.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,7 +28,7 @@
 Name[hne]=घुरुवा
 Name[hr]=Otpad
 Name[hsb]=Papjernik
-Name[hu]=Szemétkosár
+Name[hu]=Kuka
 Name[ia]=Corbe
 Name[id]=Tempat Sampah
 Name[is]=Ruslafata
--- workspace/plasma/desktop/applets/windowlist/WindowList.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/windowlist/WindowList.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -41,7 +41,6 @@
 
 WindowList::WindowList(QObject *parent, const QVariantList &args) : Plasma::Applet(parent, args)
 {
-    KGlobal::locale()->insertCatalog("windowlist");
     setAspectRatioMode(Plasma::ConstrainedSquare);
 
     const int iconSize = IconSize(KIconLoader::Desktop);
--- workspace/plasma/desktop/applets/windowlist/plasma-applet-windowlist.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/windowlist/plasma-applet-windowlist.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -21,6 +21,7 @@
 Name[he]=רשימת חלונות
 Name[hi]=विंडोज़ सूची
 Name[hr]=Lista prozora
+Name[hu]=Ablaklista
 Name[ia]=Lista de Fenestra
 Name[id]=Senarai Jendela
 Name[is]=Gluggalisti
@@ -78,6 +79,7 @@
 Comment[ga]=Plasmoid a thaispeánann liosta d'fhuinneoga oscailte.
 Comment[he]=‏Plasmoid להצגת רשימת חלונות פתוחים.
 Comment[hr]=Plasmoid koji prikazuje listu otvorenih prozora
+Comment[hu]=Plazmoid a megnyitott ablakok listájának megjelenítésére.
 Comment[ia]=Plasmoid per monstrar lista de fenestras aperite.
 Comment[id]=Plasmoid untuk menampilkan senarai jendela terbuka.
 Comment[is]=Plasmíð sem birtir lista yfir alla opna glugga
--- workspace/plasma/desktop/applets/kickoff/simpleapplet/plasma-applet-simplelauncher.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/kickoff/simpleapplet/plasma-applet-simplelauncher.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,7 +28,7 @@
 Name[hne]=अनुपरयोग चालू करइया मेनु
 Name[hr]=Izbornik pokretača aplikacija
 Name[hsb]=Meni startowarja aplikacijow
-Name[hu]=Programindító menü
+Name[hu]=Alkalmazásindító menü
 Name[ia]=Menu de Lanceator de Application
 Name[id]=Menu Peluncur Aplikasi
 Name[is]=Valmynd forritaræsingar
@@ -99,7 +99,7 @@
 Comment[hne]=परंपरा वाले मेनु आधारित अनुपरयोग चालू करइया
 Comment[hr]=Tradicionalni pokretač baziran na izbornicima
 Comment[hsb]=Tradicionalny, na meniju bazowacy startowar aplikacijow
-Comment[hu]=Hagyományos programindító menü
+Comment[hu]=Hagyományos alkalmazásindító menü
 Comment[ia]=Lanceator de application basate super menu traditional
 Comment[id]=Menu tradisional berbasis peluncur aplikasi
 Comment[is]=Venjuleg valmyndabyggð forritaræsing
--- workspace/plasma/desktop/applets/kickoff/applet/plasma-applet-launcher.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/kickoff/applet/plasma-applet-launcher.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -30,7 +30,7 @@
 Name[hne]=अनुपरयोग चालू करइया
 Name[hr]=Pokretač aplikacija
 Name[hsb]=Startowar za aplikacije
-Name[hu]=Programindító
+Name[hu]=Alkalmazásindító
 Name[ia]=Lanceator de Application
 Name[id]=Peluncur Aplikasi
 Name[is]=Forrita-Ræsir
--- workspace/plasma/desktop/applets/kickoff/core/recentapplications.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/kickoff/core/recentapplications.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -73,6 +73,7 @@
         }
 
         recentGroup.writeEntry("Applications", recentApplications);
+        recentGroup.config()->sync();
     }
     void addEntry(const QString& id, ServiceInfo& info) {
         // if this service is already in the list then remove the existing
--- workspace/plasma/desktop/applets/pager/pager.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/pager/pager.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -101,7 +101,6 @@
       m_colorScheme(0),
       m_verticalFormFactor(false),
       m_dragId(0),
-      m_dirtyDesktop(-1),
       m_dragStartDesktop(-1),
       m_dragHighlightedDesktop(-1),
       m_dragSwitchDesktop(-1),
@@ -642,7 +641,6 @@
     }
 
     m_currentDesktop = desktop;
-    m_dirtyDesktop = -1;
     m_desktopDown = false;
 
     if (!m_timer->isActive()) {
@@ -652,11 +650,6 @@
 
 void Pager::windowAdded(WId id)
 {
-    Q_UNUSED(id)
-
-    KWindowInfo info = KWindowSystem::windowInfo(id, NET::WMGeometry | NET::WMFrameExtents | NET::WMWindowType | NET::WMDesktop | NET::WMState | NET::XAWMState);
-    m_dirtyDesktop = info.desktop() - 1;
-
     if (!m_timer->isActive()) {
         m_timer->start(FAST_UPDATE_DELAY);
     }
@@ -666,9 +659,6 @@
 {
     Q_UNUSED(id)
 
-    KWindowInfo info = KWindowSystem::windowInfo(id, NET::WMGeometry | NET::WMFrameExtents | NET::WMWindowType | NET::WMDesktop | NET::WMState | NET::XAWMState);
-    m_dirtyDesktop = info.desktop() - 1;
-
     if (!m_timer->isActive()) {
         m_timer->start(FAST_UPDATE_DELAY);
     }
@@ -678,9 +668,6 @@
 {
     Q_UNUSED(id)
 
-    KWindowInfo info = KWindowSystem::windowInfo(id, NET::WMGeometry | NET::WMFrameExtents | NET::WMWindowType | NET::WMDesktop | NET::WMState | NET::XAWMState);
-    m_dirtyDesktop = info.desktop() - 1;
-
     if (!m_timer->isActive()) {
         m_timer->start(FAST_UPDATE_DELAY);
     }
@@ -697,7 +684,6 @@
     m_addDesktopAction->setEnabled(num < MAXDESKTOPS);
 #endif
 
-    m_dirtyDesktop = -1;
     m_desktopCount = num;
 
     m_rects.clear();
@@ -707,8 +693,6 @@
 
 void Pager::desktopNamesChanged()
 {
-    m_dirtyDesktop = -1;
-
     m_rects.clear();
     recalculateGeometry();
 
@@ -719,8 +703,6 @@
 
 void Pager::stackingOrderChanged()
 {
-    m_dirtyDesktop = -1;
-
     if (!m_timer->isActive()) {
         m_timer->start(FAST_UPDATE_DELAY);
     }
@@ -730,13 +712,6 @@
 {
     Q_UNUSED(id)
 
-    if (properties & NET::WMGeometry) {
-        KWindowInfo info = KWindowSystem::windowInfo(id, NET::WMGeometry | NET::WMFrameExtents | NET::WMWindowType | NET::WMDesktop | NET::WMState | NET::XAWMState);
-        m_dirtyDesktop = info.desktop() - 1;
-    } else {
-        m_dirtyDesktop = -1;
-    }
-
     if (properties & NET::WMGeometry ||
         properties & NET::WMDesktop) {
         if (!m_timer->isActive()) {
@@ -747,8 +722,6 @@
 
 void Pager::showingDesktopChanged(bool showing)
 {
-    m_dirtyDesktop = -1;
-
     Q_UNUSED(showing)
     if (!m_timer->isActive()) {
         m_timer->start(UPDATE_DELAY);
@@ -757,8 +730,6 @@
 
 void Pager::desktopsSizeChanged()
 {
-    m_dirtyDesktop = -1;
-
     m_rects.clear();
     recalculateGeometry();
 
--- workspace/plasma/desktop/applets/pager/pager.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/desktop/applets/pager/pager.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -168,7 +168,6 @@
         QPointF m_dragOriginalPos;
         QPointF m_dragCurrentPos;
         WId m_dragId;
-        int m_dirtyDesktop;
         int m_dragStartDesktop;
         int m_dragHighlightedDesktop;
 
--- workspace/plasma/generic/containmentactions/test/plasma-containmentactions-test.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/containmentactions/test/plasma-containmentactions-test.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -110,6 +110,7 @@
 Comment[hr]=Lažan priključak za testiranje
 Comment[ia]=Un plugin vacue de provar
 Comment[id]=Plugin rekaan untuk pengujian
+Comment[is]=Tilraunaíforrit fyrir prófanir
 Comment[it]=Un'estensione di prova
 Comment[ja]=テスト用のダミープラグイン
 Comment[kk]=Сынақ үшін жай плагин
--- workspace/plasma/generic/containmentactions/applauncher/plasma-containmentactions-applauncher.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/containmentactions/applauncher/plasma-containmentactions-applauncher.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -30,7 +30,7 @@
 Name[hne]=अनुपरयोग चालू करइया
 Name[hr]=Pokretač aplikacija
 Name[hsb]=Startowar za aplikacije
-Name[hu]=Programindító
+Name[hu]=Alkalmazásindító
 Name[ia]=Lanceator de Application
 Name[id]=Peluncur Aplikasi
 Name[is]=Forrita-Ræsir
@@ -103,6 +103,7 @@
 Comment[he]=משגר יישומים פשוט
 Comment[hi]=सरल अनुप्रयोग चालक
 Comment[hr]=Jednostavan pokretač aplikacija
+Comment[hu]=Egyszerű alkalmazásindító
 Comment[ia]=Simple Lanceator de application
 Comment[id]=Peluncur aplikasi sederhana
 Comment[is]=Einfaldur forritaræsir
--- workspace/plasma/generic/containmentactions/switchwindow/plasma-containmentactions-switchwindow.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/containmentactions/switchwindow/plasma-containmentactions-switchwindow.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -20,6 +20,7 @@
 Name[he]=עבור חלון
 Name[hi]=विंडो बदलें
 Name[hr]=Prebaci prozor
+Name[hu]=Ablakváltás
 Name[ia]=Commutar Fenestra
 Name[id]=Pindah Jendela
 Name[is]=Skipta um glugga
@@ -80,6 +81,7 @@
 Comment[hr]=Prikaži listu prozora na koju se moguće prebaciti
 Comment[ia]=Monstrar un lista de fenestras ubi commutar
 Comment[id]=Tampilkan senarai jendela yang akan dipindahkan
+Comment[is]=Sýna lista yfir glugga sem hægt er að skipta yfir í
 Comment[it]=Mostra un elenco di finestre a cui passare
 Comment[ja]=他のウィンドウに切り替えるためにウィンドウのリストを表示します
 Comment[kk]=Ауысатын терезелер тізімін ұсыну
--- workspace/plasma/generic/containmentactions/switchdesktop/plasma-containmentactions-switchdesktop.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/containmentactions/switchdesktop/plasma-containmentactions-switchdesktop.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -22,6 +22,7 @@
 Name[he]=עבור שולחן עבודה
 Name[hi]=डेस्कटॉप बदलें
 Name[hr]=Prebaci radnu površinu
+Name[hu]=Asztalváltás
 Name[ia]=Commutar Scriptorio
 Name[id]=Pindah Desktop
 Name[is]=Skipta um skjáborð
@@ -83,6 +84,7 @@
 Comment[he]=עבור לשולחן עבודה וירטואלי אחר
 Comment[hi]=दूसरे आभासी डेस्कटॉप्स पर स्विच करें
 Comment[hr]=Prebaci na drugu virtualnu radnu površinu
+Comment[hu]=Váltás másik virtuális asztalra
 Comment[ia]=Commutar a altere scriptorio virtual
 Comment[id]=Berpindah ke desktop virtual lain
 Comment[is]=Skiptir milli sýndarskjáborða
--- workspace/plasma/generic/containmentactions/paste/plasma-containmentactions-paste.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/containmentactions/paste/plasma-containmentactions-paste.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -84,6 +84,7 @@
 Comment[hr]=Stvara widget iz sadržaja međuspremnika
 Comment[ia]=Il crea elemento graphic (Widget) ex le contentos del area de transferentia (clipboard)
 Comment[id]=Membuat widget dari isi papan klip
+Comment[is]=Búa til græju úr innihaldi klippispjaldsins
 Comment[it]=Crea un oggetto dai contenuti degli appunti
 Comment[ja]=クリップボードの内容からウィジェットを作成します
 Comment[kk]=Алмасу буферіндегісінен виджетті құру
--- workspace/plasma/generic/containmentactions/switchactivity/plasma-containmentactions-switchactivity.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/containmentactions/switchactivity/plasma-containmentactions-switchactivity.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -20,6 +20,7 @@
 Name[he]=עבור פעילות
 Name[hi]=क्रिया बदलें
 Name[hr]=Prebaci aktivnost
+Name[hu]=Aktivitásváltás
 Name[ia]=Commutar Activitate
 Name[id]=Aktivitas Pindah
 Name[is]=Skipta um virkni
@@ -80,6 +81,7 @@
 Comment[gl]=Troca de actividade
 Comment[he]=עבור לפעילות אחרת
 Comment[hr]=Prebaci na drugu aktivnost
+Comment[hu]=Váltás másik aktivitásra
 Comment[ia]=Commutar a altere activitate
 Comment[id]=Pindah ke aktivitas lain
 Comment[is]=Skipta í aðra virkni
--- workspace/plasma/generic/dataengines/devicenotifications/plasma-dataengine-devicenotifications.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/devicenotifications/plasma-dataengine-devicenotifications.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -17,6 +17,8 @@
 Name[fy]=Meldingen fan apparaten
 Name[ga]=Fógraí Gléasanna
 Name[hi]=औज़ार सूचनाएँ
+Name[hr]=Obavijesti uređaja
+Name[hu]=Eszközüzenetek
 Name[ia]=Notificationes de dispositivo
 Name[id]=Notifikasi Divais
 Name[is]=Tilkynningar um tæki
@@ -43,6 +45,7 @@
 Name[sr@latin]=Obaveštenja o uređajima
 Name[sv]=Enhetsunderrättelser
 Name[th]=การแจ้งให้ทราบต่าง ๆ เกี่ยวกับอุปกรณ์
+Name[tr]=Aygıt Bildirimleri
 Name[uk]=Сповіщення про пристрої
 Name[x-test]=xxDevice Notificationsxx
 Name[zh_CN]=设备通知
@@ -61,6 +64,7 @@
 Comment[fi]=Passiivisia laitehuomautuksia käyttäjälle.
 Comment[fr]=Notifications visuelles passives pour l'utilisateur.
 Comment[fy]=Passieve meldingen fan apparaten foar de brûker.
+Comment[hr]=Pasivne obavijesti uređaja za korisnika.
 Comment[ia]=Notificationes de dispositivo passive pro le usator.
 Comment[id]=Notifikasi divais pasif untuk pengguna.
 Comment[is]=Hlutlausar sjónrænar tilkynningar til notandans.
@@ -87,6 +91,7 @@
 Comment[sr@latin]=Pasivna obaveštenja o uređajima za korisnika.
 Comment[sv]=Passiva enhetsunderrättelser för användaren.
 Comment[th]=ระบบการแจ้งให้ผู้ใช้งานทราบถึงเหตุการณ์ต่าง ๆ เกี่ยวกับอุปกรณ์
+Comment[tr]=Kullanıcı için pasif aygıt bildirimleri.
 Comment[uk]=Пасивні сповіщення користувача щодо пристроїв.
 Comment[x-test]=xxPassive device notifications for the user.xx
 Comment[zh_CN]=为用户提供被动出现的设备通知。
--- workspace/plasma/generic/dataengines/soliddevice/plasma-dataengine-soliddevice.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/soliddevice/plasma-dataengine-soliddevice.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -38,7 +38,7 @@
 Name[kn]=ಸಾಧನದ ಮಾಹಿತಿ
 Name[ko]=장치 정보
 Name[ku]=Agahiya Cîhazê
-Name[lt]=Įrenginio informacija
+Name[lt]=Informacija apie įrenginius
 Name[lv]=Ierīču informācija
 Name[mai]=डिवायस सूचना
 Name[mk]=Информации за уреди
--- workspace/plasma/generic/dataengines/systemmonitor/systemmonitor.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/systemmonitor/systemmonitor.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -56,6 +56,9 @@
 
 bool SystemMonitorEngine::sourceRequestEvent(const QString &name)
 {
+    // NB: do not follow this example in your own data engines!
+    // This is kept for backwards compatilibility.
+    // Visualizations should instead listen to sourceAdded()
     if (m_sensors.isEmpty()) {
         // we don't have our first data yet, so let's trust the requester, at least fo rnow
         // when we get our list of sensors later, then we'll know for sure and remove
@@ -151,6 +154,15 @@
             const QString newSensor = newSensorInfo[0];
             sensors.insert(newSensor);
             m_sensors.append(newSensor);
+            {
+                // HACK: for backwards compability
+                // in case this source was created in sourceRequestEvent, stop it being
+                // automagically removed when disconnected from
+                Plasma::DataContainer *s = containerForSource( newSensor );
+                if ( s ) {
+                    disconnect( s, SIGNAL(becameUnused(QString)), this, SLOT(removeSource(QString)) );
+                }
+            }
             DataEngine::Data d;
             d.insert("value", QVariant());
             d.insert("type", newSensorInfo[1]);
--- workspace/plasma/generic/dataengines/weather/weatherengine.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/weatherengine.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -29,48 +29,32 @@
 #include <KServiceTypeTrader>
 
 #include <Plasma/DataEngineManager>
+#include <Plasma/DataContainer>
 
 #include "ions/ion.h"
 
-class WeatherEngine::Private
+// Constructor
+WeatherEngine::WeatherEngine(QObject *parent, const QVariantList& args)
+        :  Plasma::DataEngine(parent, args),
+           m_networkAvailable(false)
 {
-public:
-    Private()
-            : m_networkAvailable(false) {
-    }
+    Q_UNUSED(args)
 
-    /**
-     * Get instance of a loaded ion.
-     * @returns a IonInterface instance of a loaded plugin.
-     */
-    IonInterface* ionForSource(const QString& name) const {
-        int offset = name.indexOf('|');
+    m_reconnectTimer.setSingleShot(true);
+    connect(&m_reconnectTimer, SIGNAL(timeout()), this, SLOT(startReconnect()));
 
-        if (offset < 1) {
-            return NULL;
-        }
+    // Globally notify all plugins to remove their sources (and unload plugin)
+    connect(this, SIGNAL(sourceRemoved(QString)), this, SLOT(removeIonSource(QString)));
+    connect(qApp, SIGNAL(aboutToQuit()), this, SLOT(unloadIons()));
+}
 
-        QString ionName = name.left(offset);
-        return qobject_cast<IonInterface *>(Plasma::DataEngineManager::self()->engine(ionName));
-    }
+// Destructor
+WeatherEngine::~WeatherEngine()
+{
+    // Cleanup all private data.
+    unloadIons();
+}
 
-    /**
-     * Get plugin name from datasource.
-     * @returns The plugin name given a datasource.
-     */
-    QString ionNameForSource(const QString& source) const {
-        int offset = source.indexOf('|');
-        if (offset < 1) {
-            return QString();
-        }
-
-        return QString(source.left(offset));
-    }
-
-    QStringList m_ions;
-    bool m_networkAvailable;
-};
-
 /**
  * Loads an ion plugin given a plugin name found via KService.
  */
@@ -93,9 +77,9 @@
     Plasma::DataEngine *ion = Plasma::DataEngineManager::self()->loadEngine(foundPlugin.pluginName());
     ion->setObjectName(plugName);
     connect(ion, SIGNAL(sourceAdded(QString)), this, SLOT(newIonSource(QString)));
-    connect(ion, SIGNAL(resetCompleted(IonInterface *, bool)), this, SLOT(resetCompleted(IonInterface *, bool)));
+    connect(ion, SIGNAL(forceUpdate(IonInterface*,QString)), this, SLOT(forceUpdate(IonInterface*,QString)));
 
-    d->m_ions << plugName;
+    m_ions << plugName;
 
     return ion;
 }
@@ -108,14 +92,14 @@
 void WeatherEngine::unloadIon(const QString &name)
 {
     Plasma::DataEngineManager::self()->unloadEngine(name);
-    d->m_ions.removeOne(name);
+    m_ions.removeOne(name);
 }
 
 void WeatherEngine::init()
 {
     // Get the list of available plugins but don't load them
     Solid::Networking::Status status = Solid::Networking::status();
-    d->m_networkAvailable = (status == Solid::Networking::Connected ||
+    m_networkAvailable = (status == Solid::Networking::Connected ||
                              status == Solid::Networking::Unknown);
     connect(Solid::Networking::notifier(), SIGNAL(statusChanged(Solid::Networking::Status)),
             this, SLOT(networkStatusChanged(Solid::Networking::Status)));
@@ -156,12 +140,12 @@
  */
 void WeatherEngine::removeIonSource(const QString& source)
 {
-    IonInterface *ion = d->ionForSource(source);
+    IonInterface *ion = ionForSource(source);
     if (ion) {
         ion->removeSource(source);
         // If plugin has no more sources let's unload the plugin
         if (ion->isEmpty()) {
-            unloadIon(d->ionNameForSource(source));
+            unloadIon(ionNameForSource(source));
         }
     }
     kDebug() << "removeIonSource()";
@@ -176,32 +160,13 @@
     setData(source, data);
 }
 
-// Constructor
-WeatherEngine::WeatherEngine(QObject *parent, const QVariantList& args)
-        :  Plasma::DataEngine(parent, args), d(new Private())
-{
-    Q_UNUSED(args)
-
-    // Globally notify all plugins to remove their sources (and unload plugin)
-    connect(this, SIGNAL(sourceRemoved(QString)), this, SLOT(removeIonSource(QString)));
-    connect(qApp, SIGNAL(aboutToQuit()), this, SLOT(unloadIons()));
-}
-
-// Destructor
-WeatherEngine::~WeatherEngine()
-{
-    // Cleanup all private data.
-    unloadIons();
-    delete d;
-}
-
 void WeatherEngine::unloadIons()
 {
-    foreach (const QString &ion, d->m_ions) {
+    foreach (const QString &ion, m_ions) {
         Plasma::DataEngineManager::self()->unloadEngine(ion);
     }
 
-    d->m_ions.clear();
+    m_ions.clear();
 }
 
 /**
@@ -209,24 +174,25 @@
  */
 bool WeatherEngine::sourceRequestEvent(const QString &source)
 {
-    Plasma::DataEngine *ion = d->ionForSource(source);
+    Plasma::DataEngine *ion = ionForSource(source);
 
     if (!ion) {
-        ion = loadIon(d->ionNameForSource(source));
+        ion = loadIon(ionNameForSource(source));
         if (!ion) {
             return false;
         }
     }
 
-    kDebug() << "sourceRequestEvent(): Network is: " << d->m_networkAvailable;
-    if (!d->m_networkAvailable) {
+    // we should connect to the ion anyway, even if the network
+    // is down. when it comes up again, then it will be refreshed
+    ion->connectSource(source, this);
+
+    kDebug() << "sourceRequestEvent(): Network is: " << m_networkAvailable;
+    if (!m_networkAvailable) {
         setData(source, Data());
         return true;
     }
 
-    QByteArray str = source.toLocal8Bit();
-
-    ion->connectSource(source, this);
     if (!containerForSource(source)) {
         // it is an async reply, we need to set up the data anyways
         setData(source, Data());
@@ -239,54 +205,72 @@
  */
 bool WeatherEngine::updateSourceEvent(const QString& source)
 {
-    IonInterface *ion = d->ionForSource(source);
-
-    QByteArray str = source.toLocal8Bit();
-
+    IonInterface *ion = ionForSource(source);
     if (!ion) {
         return false;
     }
 
-    kDebug() << "updateSourceEvent(): Network is: " << d->m_networkAvailable;
-    if (!d->m_networkAvailable) {
+    kDebug() << "updateSourceEvent(): Network is: " << m_networkAvailable;
+    if (!m_networkAvailable) {
         return false;
     }
 
     return ion->updateSourceEvent(source);
 }
 
-void WeatherEngine::triggerReset() const
+void WeatherEngine::networkStatusChanged(Solid::Networking::Status status)
 {
-    kDebug() << "triggerReset()";
-    foreach(const QString &i, d->m_ions) {
+    kDebug();
+    m_networkAvailable = status == Solid::Networking::Connected || status == Solid::Networking::Unknown;
+    if (m_networkAvailable) {
+        // allow the network to settle down and actually come up
+        m_reconnectTimer.start(5000);
+    }
+}
+
+void WeatherEngine::startReconnect()
+{
+    foreach (const QString &i, m_ions) {
         IonInterface * ion = qobject_cast<IonInterface *>(Plasma::DataEngineManager::self()->engine(i));
+        kDebug() << "resetting" << ion;
         if (ion) {
             ion->reset();
         }
     }
 }
 
-void WeatherEngine::networkStatusChanged(Solid::Networking::Status status)
+void WeatherEngine::forceUpdate(IonInterface *i, const QString &source)
 {
-    d->m_networkAvailable = (status == Solid::Networking::Connected || status == Solid::Networking::Unknown);
-    kDebug() << "networkStatusChanged(): Status changed: " << d->m_networkAvailable << "state: " << status;
+    const QString actualSource(i->pluginName() + '|' + source);
+    Plasma::DataContainer *container = containerForSource(source);
+    if (container) {
+        kDebug() << "immediate update of" << source;
+        container->forceImmediateUpdate();
+    } else {
+        kDebug() << "innexplicable failure of" << source;
+    }
+}
 
-    if (d->m_networkAvailable) {
-        QTimer::singleShot(6000, this, SLOT(triggerReset()));
+IonInterface* WeatherEngine::ionForSource(const QString& name) const
+{
+    int offset = name.indexOf('|');
+
+    if (offset < 1) {
+        return NULL;
     }
+
+    QString ionName = name.left(offset);
+    return qobject_cast<IonInterface *>(Plasma::DataEngineManager::self()->engine(ionName));
 }
 
-void WeatherEngine::resetCompleted(IonInterface * i, bool b) const
+QString WeatherEngine::ionNameForSource(const QString& source) const
 {
-    disconnect(i, SIGNAL(resetCompleted(IonInterface*, bool)), this, SLOT(resetCompleted(IonInterface *, bool)));
-    if (b) {
-        foreach(const QString &source, sources()) {
-            IonInterface *ion = d->ionForSource(source);
-            if (ion == i) {
-                ion->updateSourceEvent(source);
-            }
-        }
+    int offset = source.indexOf('|');
+    if (offset < 1) {
+        return QString();
     }
+
+    return QString(source.left(offset));
 }
 
 #include "weatherengine.moc"
--- workspace/plasma/generic/dataengines/weather/ions/ion.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/ion.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -47,11 +47,17 @@
  */
 bool IonInterface::sourceRequestEvent(const QString &source)
 {
-    kDebug() << "sourceRequested()";
+    kDebug() << "sourceRequested(): " << source;
+
+    // init anyway the data as it's going to be used
+    // sooner or later (doesnt depend upon initialization
+    // this will avoid problems if updateIonSource() fails for any reason
+    // but later it's able to retrieve the data
+    setData(source, Plasma::DataEngine::Data());
+
+    // if initialized, then we can try to grab the data
     if (d->initialized) {
         return updateIonSource(source);
-    } else {
-        setData(source, Plasma::DataEngine::Data());
     }
 
     return true;
@@ -79,9 +85,7 @@
     d->initialized = initialized;
 
     if (d->initialized) {
-        foreach(const QString &source, sources()) {
-            updateSourceEvent(source);
-        }
+        updateAllSources();
     }
 }
 
--- workspace/plasma/generic/dataengines/weather/ions/wetter.com/ion_wettercom.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/wetter.com/ion_wettercom.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -64,7 +64,8 @@
 void WetterComIon::reset()
 {
     cleanup();
-    emit resetCompleted(this, true);
+    m_sourcesToReset = sources();
+    updateAllSources();
 }
 
 void WetterComIon::init()
@@ -469,6 +470,13 @@
 
 void WetterComIon::fetchForecast(const QString& source)
 {
+    foreach (const QString &fetching, m_forecastJobList) {
+        if (fetching == source) {
+            // already fetching!
+            return;
+        }
+    }
+
     QCryptographicHash md5(QCryptographicHash::Md5);
     md5.addData(QString::fromLatin1(PROJECTNAME).toUtf8());
     md5.addData(QString::fromLatin1(APIKEY).toUtf8());
@@ -503,17 +511,31 @@
 
 void WetterComIon::forecast_slotJobFinished(KJob *job)
 {
-    setData(m_forecastJobList[job], Data());
+    const QString source(m_forecastJobList.value(job));
+    setData(source, Data());
     QXmlStreamReader *reader = m_forecastJobXml.value(job);
 
     if (reader) {
-        parseWeatherForecast(m_forecastJobList[job], *reader);
+        parseWeatherForecast(source, *reader);
     }
 
     m_forecastJobList.remove(job);
 
     delete m_forecastJobXml[job];
     m_forecastJobXml.remove(job);
+
+    if (m_sourcesToReset.contains(source)) {
+        m_sourcesToReset.removeAll(source);
+        const QString weatherSource = QString::fromLatin1("wettercom|weather|%1|%2;%3") \
+            .arg(source).arg(m_place[source].placeCode)                 \
+            .arg(m_place[source].displayName);
+
+        // so the weather engine updates it's data
+        forceImmediateUpdateOfAllVisualizations();
+
+        // update the clients of our engine
+        emit forceUpdate(this, weatherSource);
+    }
 }
 
 void WetterComIon::parseWeatherForecast(const QString& source, QXmlStreamReader& xml)
@@ -610,10 +632,10 @@
             } else if (xml.name() == "time") {
                 time = xml.attributes().value("value").toString();
             } else if (xml.name() == "tx") {
-                tempMax = xml.readElementText().toInt();
+                tempMax = qRound(xml.readElementText().toDouble());
                 kDebug() << "parsed t_max:" << tempMax;
             } else if (xml.name() == "tn") {
-                tempMin = xml.readElementText().toInt();
+                tempMin = qRound(xml.readElementText().toDouble());
                 kDebug() << "parsed t_min:" << tempMin;
             } else if (xml.name() == "w") {
                 int tmp = xml.readElementText().toInt();
--- workspace/plasma/generic/dataengines/weather/ions/wetter.com/ion-wettercom.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/wetter.com/ion-wettercom.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -21,6 +21,7 @@
 Name[he]=wetter.com
 Name[hi]=wetter.com
 Name[hr]=wetter.com
+Name[hu]=wetter.com
 Name[ia]=wetter.com
 Name[id]=wetter.com
 Name[is]=wetter.com
@@ -77,6 +78,7 @@
 Comment[he]=תחזית מזג אוויר על ידי wetter.com
 Comment[hi]=wetter.com द्वारा मोसम पूर्वानुमान
 Comment[hr]=Prognoza vremena s wetter.com
+Comment[hu]=Időjárás-előrejelzés a wetter.com-tól
 Comment[ia]=Prevision Meteorologic per wetter.com
 Comment[id]=Ramalan cuaca oleh wetter.com
 Comment[is]=Veðurspá frá wetter.com
--- workspace/plasma/generic/dataengines/weather/ions/wetter.com/ion_wettercom.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/wetter.com/ion_wettercom.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -164,6 +164,7 @@
     QMap<KJob *, QString> m_forecastJobList;
 
     KIO::TransferJob *m_job;
+    QStringList m_sourcesToReset;
 };
 
 K_EXPORT_PLASMA_DATAENGINE(wettercom, WetterComIon)
--- workspace/plasma/generic/dataengines/weather/ions/envcan/ion_envcan.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/envcan/ion_envcan.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -24,6 +24,7 @@
 #include <KIO/Job>
 #include <KUnitConversion/Converter>
 #include <Solid/Networking>
+#include <Plasma/DataContainer>
 
 
 // ctor, dtor
@@ -52,9 +53,9 @@
 void EnvCanadaIon::reset()
 {
     deleteForecasts();
-    setInitialized(false);
     emitWhenSetup = true;
-    redoXMLSetup();
+    m_sourcesToReset = sources();
+    getXMLSetup();
 }
 
 EnvCanadaIon::~EnvCanadaIon()
@@ -444,9 +445,8 @@
 // Get a specific Ion's data
 bool EnvCanadaIon::updateIonSource(const QString& source)
 {
+    //kDebug() << "updateIonSource()" << source;
 
-    kDebug() << "updateIonSource()";
-
     // We expect the applet to send the source in the following tokenization:
     // ionname|validate|place_name - Triggers validation of place
     // ionname|weather|place_name - Triggers receiving weather of place
@@ -483,41 +483,40 @@
     return false;
 }
 
-void EnvCanadaIon::redoXMLSetup() const
-{
-    getXMLSetup();
-}
-
 // Parses city list and gets the correct city based on ID number
-void EnvCanadaIon::getXMLSetup() const
+void EnvCanadaIon::getXMLSetup()
 {
-    kDebug() << "getXMLSetup()";
+    //kDebug() << "getXMLSetup()";
 
     // If network is down, we need to spin and wait
 
     KIO::TransferJob *job = KIO::get(KUrl("http://dd.weatheroffice.ec.gc.ca/citypage_weather/xml/siteList.xml"), KIO::NoReload, KIO::HideProgressInfo);
 
-    if (job) {
-        connect(job, SIGNAL(data(KIO::Job *, const QByteArray &)), this,
-                SLOT(setup_slotDataArrived(KIO::Job *, const QByteArray &)));
-        connect(job, SIGNAL(result(KJob *)), this, SLOT(setup_slotJobFinished(KJob *)));
-    }
+    m_xmlSetup.clear();
+    connect(job, SIGNAL(data(KIO::Job *, const QByteArray &)), this,
+            SLOT(setup_slotDataArrived(KIO::Job *, const QByteArray &)));
+    connect(job, SIGNAL(result(KJob *)), this, SLOT(setup_slotJobFinished(KJob *)));
 }
 
 // Gets specific city XML data
 void EnvCanadaIon::getXMLData(const QString& source)
 {
-    KUrl url;
+    foreach (const QString &fetching, m_jobList) {
+        if (fetching == source) {
+            // already getting this source and awaiting the data
+            return;
+        }
+    }
 
-    kDebug() << "getXMLData()";
+    //kDebug() << source;
 
     // Demunge source name for key only.
     QString dataKey = source;
     dataKey.remove("envcan|weather|");
 
-    url = "http://dd.weatheroffice.ec.gc.ca/citypage_weather/xml/" + m_places[dataKey].territoryName + "/" + m_places[dataKey].cityCode + "_e.xml";
+    KUrl url = "http://dd.weatheroffice.ec.gc.ca/citypage_weather/xml/" + m_places[dataKey].territoryName + "/" + m_places[dataKey].cityCode + "_e.xml";
     //url="file:///home/spstarr/Desktop/s0000649_e.xml";
-    kDebug() << "Will Try URL: " << url;
+    //kDebug() << "Will Try URL: " << url;
 
     if (m_places[dataKey].territoryName.isEmpty() && m_places[dataKey].cityCode.isEmpty()) {
         setData(source, "validate", QString("envcan|malformed"));
@@ -529,11 +528,9 @@
     m_jobXml.insert(newJob, new QXmlStreamReader);
     m_jobList.insert(newJob, source);
 
-    if (newJob) {
-        connect(newJob, SIGNAL(data(KIO::Job *, const QByteArray &)), this,
-                SLOT(slotDataArrived(KIO::Job *, const QByteArray &)));
-        connect(newJob, SIGNAL(result(KJob *)), this, SLOT(slotJobFinished(KJob *)));
-    }
+    connect(newJob, SIGNAL(data(KIO::Job *, const QByteArray &)), this,
+            SLOT(slotDataArrived(KIO::Job *, const QByteArray &)));
+    connect(newJob, SIGNAL(result(KJob *)), this, SLOT(slotJobFinished(KJob *)));
 }
 
 void EnvCanadaIon::setup_slotDataArrived(KIO::Job *job, const QByteArray &data)
@@ -541,10 +538,12 @@
     Q_UNUSED(job)
 
     if (data.isEmpty()) {
+        //kDebug() << "done!";
         return;
     }
 
     // Send to xml.
+    //kDebug() << data;
     m_xmlSetup.addData(data);
 }
 
@@ -562,7 +561,9 @@
 void EnvCanadaIon::slotJobFinished(KJob *job)
 {
     // Dual use method, if we're fetching location data to parse we need to do this first
-    setData(m_jobList[job], Data());
+    const QString source = m_jobList.value(job);
+    //kDebug() << source << m_sourcesToReset.contains(source);
+    setData(source, Data());
     QXmlStreamReader *reader = m_jobXml.value(job);
     if (reader) {
         readXMLData(m_jobList[job], *reader);
@@ -571,21 +572,25 @@
     m_jobList.remove(job);
     delete m_jobXml[job];
     m_jobXml.remove(job);
+
+    if (m_sourcesToReset.contains(source)) {
+        m_sourcesToReset.removeAll(source);
+
+        // so the weather engine updates it's data
+        forceImmediateUpdateOfAllVisualizations();
+
+        // update the clients of our engine
+        emit forceUpdate(this, source);
+    }
 }
 
 void EnvCanadaIon::setup_slotJobFinished(KJob *job)
 {
     Q_UNUSED(job)
     const bool success = readXMLSetup();
+    m_xmlSetup.clear();
+    //kDebug() << success << m_sourcesToReset;
     setInitialized(success);
-    if (emitWhenSetup) {
-        emitWhenSetup = false;
-        emit(resetCompleted(this, success));
-    } else if (success) {
-        foreach(const QString &source, sources()) {
-            updateIonSource(source);
-        }
-    }
 }
 
 // Parse the city list and store into a QMap
@@ -596,7 +601,7 @@
     QString code;
     QString cityName;
 
-    kDebug() << "readXMLSetup()";
+    //kDebug() << "readXMLSetup()";
 
     while (!m_xmlSetup.atEnd()) {
         m_xmlSetup.readNext();
@@ -632,6 +637,7 @@
         }
 
     }
+
     return (success && !m_xmlSetup.error());
 }
 
@@ -677,7 +683,7 @@
     data.recordHigh = 0.0;
     data.recordLow = 0.0;
 
-    kDebug() << "readXMLData()";
+    //kDebug() << "readXMLData()";
 
     QString dataKey = source;
     dataKey.remove("envcan|weather|");
@@ -1293,7 +1299,7 @@
 
 void EnvCanadaIon::updateWeather(const QString& source)
 {
-    kDebug() << "updateWeather()";
+    //kDebug() << "updateWeather()";
 
     QMap<QString, QString> dataFields;
     Plasma::DataEngine::Data data;
@@ -1312,7 +1318,7 @@
     // Real weather - Current conditions
     data.insert("Observation Period", observationTime(source));
     data.insert("Current Conditions", i18nc("weather condition", condition(source).toUtf8()));
-    kDebug() << "i18n condition string: " << qPrintable(condition(source));
+    //kDebug() << "i18n condition string: " << qPrintable(condition(source));
 
     // Tell applet which icon to use for conditions and provide mapping for condition type to the icons to display
     QMap<QString, ConditionIcons> conditionList;
@@ -1704,7 +1710,7 @@
                             .arg(m_weatherData[source].forecasts[i]->forecastTempHigh) \
                             .arg(m_weatherData[source].forecasts[i]->forecastTempLow) \
                             .arg(m_weatherData[source].forecasts[i]->popPrecent));
-        kDebug() << "i18n summary string: " << qPrintable(i18n(m_weatherData[source].forecasts[i]->shortForecast.toUtf8()));
+        //kDebug() << "i18n summary string: " << qPrintable(i18n(m_weatherData[source].forecasts[i]->shortForecast.toUtf8()));
     }
     return forecastData;
 }
--- workspace/plasma/generic/dataengines/weather/ions/envcan/ion_envcan.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/envcan/ion_envcan.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -159,8 +159,6 @@
     void slotDataArrived(KIO::Job *, const QByteArray &);
     void slotJobFinished(KJob *);
 
-    void redoXMLSetup(void) const;
-
 private:
     /* Environment Canada Methods - Internal for Ion */
     void deleteForecasts();
@@ -202,7 +200,7 @@
     QMap<QString, QString> weatherRecords(const QString& source) const;
 
     // Load and Parse the place XML listing
-    void getXMLSetup(void) const;
+    void getXMLSetup(void);
     bool readXMLSetup(void);
 
     // Load and parse the specific place(s)
@@ -248,8 +246,9 @@
     QHash<QString, WeatherData> m_weatherData;
 
     // Store KIO jobs
-    QMap<KJob *, QXmlStreamReader*> m_jobXml;
-    QMap<KJob *, QString> m_jobList;
+    QHash<KJob *, QXmlStreamReader*> m_jobXml;
+    QHash<KJob *, QString> m_jobList;
+    QStringList m_sourcesToReset;
     QXmlStreamReader m_xmlSetup;
     Plasma::DataEngine *m_timeEngine;
 
--- workspace/plasma/generic/dataengines/weather/ions/ion.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/ion.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -97,11 +97,7 @@
     virtual void reset() = 0;
 
 Q_SIGNALS:
-   
-    /**
-     * Triggered when we get initial setup data for ions that provide a list of places
-     */ 
-    void resetCompleted(IonInterface *, bool);
+    void forceUpdate(IonInterface *ion, const QString &source);
 
 protected:
 
--- workspace/plasma/generic/dataengines/weather/ions/bbcukmet/ion_bbcukmet.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/bbcukmet/ion_bbcukmet.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -40,10 +40,10 @@
 void UKMETIon::reset()
 {
     deleteForecasts();
-    emit(resetCompleted(this, true));
+    m_sourcesToReset = sources();
+    updateAllSources();
 }
 
-
 void UKMETIon::deleteForecasts()
 {
     // Destroy each forecast stored in a QVector
@@ -226,6 +226,13 @@
 // Gets specific city XML data
 void UKMETIon::getXMLData(const QString& source)
 {
+    foreach (const QString &fetching, m_obsJobList) {
+        if (fetching == source) {
+            // already getting this source and awaiting the data
+            return;
+        }
+    }
+
     KUrl url;
     url = m_place[source].XMLurl;
 
@@ -407,7 +414,8 @@
 
 void UKMETIon::observation_slotJobFinished(KJob *job)
 {
-    setData(m_obsJobList[job], Data());
+    const QString source = m_obsJobList.value(job);
+    setData(source, Data());
 
     QXmlStreamReader *reader = m_obsJobXml.value(job);
     if (reader) {
@@ -417,6 +425,11 @@
     m_obsJobList.remove(job);
     delete m_obsJobXml[job];
     m_obsJobXml.remove(job);
+
+    if (m_sourcesToReset.contains(source)) {
+        m_sourcesToReset.removeAll(source);
+        emit forceUpdate(this, source);
+    }
 }
 
 void UKMETIon::forecast_slotDataArrived(KIO::Job *job, const QByteArray &data)
--- workspace/plasma/generic/dataengines/weather/ions/bbcukmet/ion_bbcukmet.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/bbcukmet/ion_bbcukmet.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -141,6 +141,8 @@
     void parseWeatherForecast(const QString& source, QXmlStreamReader& xml);
     void parseUnknownElement(QXmlStreamReader& xml) const;
 
+    void deleteForecasts();
+
     struct XMLMapInfo {
         QString place;
         QString XMLurl;
@@ -169,8 +171,7 @@
     Plasma::DataEngine *m_timeEngine;
 
     QDateTime m_dateFormat;
-
-    void deleteForecasts();
+    QStringList m_sourcesToReset;
 };
 
 K_EXPORT_PLASMA_DATAENGINE(bbcukmet, UKMETIon)
--- workspace/plasma/generic/dataengines/weather/ions/noaa/ion_noaa.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/noaa/ion_noaa.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -68,8 +68,7 @@
 
 void NOAAIon::reset()
 {
-    emitWhenSetup = true;
-    setInitialized(false);
+    m_sourcesToReset = sources();
     getXMLSetup();
 }
 
@@ -145,7 +144,6 @@
             setData(source, "validate", QString("noaa|invalid|single|").append(sourceAction[2]));
             return true;
         }
-
     } else if (sourceAction[1] == "weather" && sourceAction.size() > 2) {
         getXMLData(source);
         return true;
@@ -174,11 +172,16 @@
 // Gets specific city XML data
 void NOAAIon::getXMLData(const QString& source)
 {
-    KUrl url;
+    foreach (const QString &fetching, m_jobList) {
+        if (fetching == source) {
+            // already getting this source and awaiting the data
+            return;
+        }
+    }
 
     QString dataKey = source;
     dataKey.remove("noaa|weather|");
-    url = m_places[dataKey].XMLurl;
+    KUrl url = m_places[dataKey].XMLurl;
 
     // If this is empty we have no valid data, send out an error and abort.
     if (url.url().isEmpty()) {
@@ -192,7 +195,7 @@
 
     if (m_job) {
         connect(m_job, SIGNAL(data(KIO::Job *, const QByteArray &)), this,
-             SLOT(slotDataArrived(KIO::Job *, const QByteArray &)));
+                SLOT(slotDataArrived(KIO::Job *, const QByteArray &)));
         connect(m_job, SIGNAL(result(KJob *)), this, SLOT(slotJobFinished(KJob *)));
     }
 }
@@ -222,7 +225,8 @@
 void NOAAIon::slotJobFinished(KJob *job)
 {
     // Dual use method, if we're fetching location data to parse we need to do this first
-    removeAllData(m_jobList[job]);
+    const QString source(m_jobList.value(job));
+    removeAllData(source);
     QXmlStreamReader *reader = m_jobXml.value(job);
     if (reader) {
         readXMLData(m_jobList[job], *reader);
@@ -241,9 +245,9 @@
     Q_UNUSED(job)
     const bool success = readXMLSetup();
     setInitialized(success);
-    if (emitWhenSetup) {
-        emitWhenSetup = false;
-        emit(resetCompleted(this, success));
+
+    foreach (const QString &source, m_sourcesToReset) {
+        updateSourceEvent(source);
     }
 }
 
@@ -840,8 +844,9 @@
 void NOAAIon::forecast_slotJobFinished(KJob *job)
 {
     QXmlStreamReader *reader = m_jobXml.value(job);
+    const QString source = m_jobList.value(job);
+
     if (reader) {
-        QString source = m_jobList[job];
         readForecast(source, *reader);
         updateWeather(source);
     }
@@ -849,6 +854,16 @@
     m_jobList.remove(job);
     delete m_jobXml[job];
     m_jobXml.remove(job);
+
+    if (m_sourcesToReset.contains(source)) {
+        m_sourcesToReset.removeAll(source);
+
+        // so the weather engine updates it's data
+        forceImmediateUpdateOfAllVisualizations();
+
+        // update the clients of our engine
+        emit forceUpdate(this, source);
+    }
 }
 
 void NOAAIon::readForecast(const QString& source, QXmlStreamReader& xml)
--- workspace/plasma/generic/dataengines/weather/ions/noaa/ion_noaa.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/ions/noaa/ion_noaa.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -176,7 +176,7 @@
     Plasma::DataEngine *m_timeEngine;
     QDateTime m_dateFormat;
     bool emitWhenSetup;
-
+    QStringList m_sourcesToReset;
 };
 
 K_EXPORT_PLASMA_DATAENGINE(noaa, NOAAIon)
--- workspace/plasma/generic/dataengines/weather/weatherengine.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/weather/weatherengine.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -20,6 +20,8 @@
 #ifndef WEATHERENGINE_H
 #define WEATHERENGINE_H
 
+#include <QTimer>
+
 #include <KService>
 #include <KGenericFactory>
 
@@ -81,15 +83,8 @@
      */
     void dataUpdated(const QString& source, Plasma::DataEngine::Data data);
 
-    /**
-    * Reimplemented from Plasma::DataEngine.
-    * @param source The datasource to be updated.
-    * @param data The new data updated.
-    */
-    void resetCompleted(IonInterface *, bool) const;
+    void forceUpdate(IonInterface *ion, const QString &source);
 
-    void triggerReset(void) const;
-
     /**
      * Notify WeatherEngine a new ion has data sources.
      * @arg source datasource name.
@@ -110,6 +105,7 @@
      * Whenever networking changes, take action
      */
     void networkStatusChanged(Solid::Networking::Status);
+    void startReconnect();
 
     /**
      * Cleans up the ions that are currently loaded
@@ -122,8 +118,21 @@
     void updateIonList(const QStringList &changedResources = QStringList());
 
 private:
-    class Private;
-    Private *const d;
+    /**
+     * Get instance of a loaded ion.
+     * @returns a IonInterface instance of a loaded plugin.
+     */
+    IonInterface* ionForSource(const QString& name) const;
+
+    /**
+     * Get plugin name from datasource.
+     * @returns The plugin name given a datasource.
+     */
+    QString ionNameForSource(const QString& source) const;
+
+    QStringList m_ions;
+    bool m_networkAvailable;
+    QTimer m_reconnectTimer;
 };
 
 K_EXPORT_PLASMA_DATAENGINE(weather, WeatherEngine)
--- workspace/plasma/generic/dataengines/statusnotifieritem/plasma_engine_statusnotifieritem.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/statusnotifieritem/plasma_engine_statusnotifieritem.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -39,6 +39,7 @@
 Name[sr@ijekavianlatin]=Podaci izvještavača o stanju
 Name[sr@latin]=Podaci izveštavača o stanju
 Name[sv]=Information från statusunderrättelser
+Name[tr]=Durum Bildirici Bilgileri
 Name[uk]=Відомості сповіщення про стан
 Name[x-test]=xxStatus Notifier Informationxx
 Name[zh_CN]=状态通知信息
@@ -78,6 +79,7 @@
 Comment[sr@ijekavianlatin]=Motor za podatke o stanju programa, na osnovu protokola izvještavača o stanju.
 Comment[sr@latin]=Motor za podatke o stanju programa, na osnovu protokola izveštavača o stanju.
 Comment[sv]=Gränssnitt för statusinformation om program baserat på protokollet för statusunderrättelser.
+Comment[tr]=Status Notifier protokolünü temel alan, uygulama durumu bildirim motoru.
 Comment[uk]=Рушій даних щодо стану програм, заснований на протоколі сповіщення про стан.
 Comment[x-test]=xxEngine for applications' status information, based on the Status Notifier protocol.xx
 Comment[zh_CN]=用于提供应用程序状态信息的引擎，急于状态通知协议。
--- workspace/plasma/generic/dataengines/apps/plasma-dataengine-apps.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/dataengines/apps/plasma-dataengine-apps.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -23,6 +23,7 @@
 Name[he]=מידע אודות יישום
 Name[hi]=अनुप्रयोग जानकारी
 Name[hr]=Informacije o aplikacijama
+Name[hu]=Az alkalmazások jellemzői
 Name[ia]=Information de Application
 Name[id]=Informasi Aplikasi
 Name[is]=Upplýsingar um forrit
@@ -79,6 +80,7 @@
 Comment[hr]=Informacije i pokretanja od svih aplikacija u izborniku aplikacija.
 Comment[ia]=Information e lanceamento de omne applicationes in le menu de app
 Comment[id]=Informasi dan meluncurkan semua aplikasi di menu aplikasi.
+Comment[is]=Upplýsingar um og ræsing allra forrita í forritavalmyndinni.
 Comment[it]=Informazioni e avvio di tutte le applicazioni nel loro menu.
 Comment[ja]=アプリケーションメニューのすべてのアプリケーション用の情報・起動サービスです。
 Comment[kk]=Қолданбаның мәзірінен барлық қолданбаларды жегу және олардын ақпараттары.
--- workspace/plasma/generic/applets/lock_logout/lockout.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/lock_logout/lockout.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -280,31 +280,37 @@
 
     if (m_showLockButton != ui.checkBox_lock->isChecked()) {
         m_showLockButton = !m_showLockButton;
-        cg.writeEntry("showLockButton", m_showLockButton);
         changed = true;
     }
 
     if (m_showLogoutButton != ui.checkBox_logout->isChecked()) {
         m_showLogoutButton = !m_showLogoutButton;
-        cg.writeEntry("showLogoutButton", m_showLogoutButton);
         changed = true;
     }
 
     if (m_showSleepButton != ui.checkBox_sleep->isChecked()) {
         m_showSleepButton = !m_showSleepButton;
-        cg.writeEntry("showSleepButton", m_showSleepButton);
         changed = true;
     }
 
     if (m_showHibernateButton != ui.checkBox_hibernate->isChecked()) {
         m_showHibernateButton = !m_showHibernateButton;
-        cg.writeEntry("showHibernateButton", m_showHibernateButton);
         changed = true;
     }
 
     if (changed) {
         int oldButtonCount = m_visibleButtons;
         countButtons();
+	if(m_visibleButtons == 0) {
+	    configChanged(); // if no button was selected, reject configuration and reload previous
+	    return;
+	}
+	
+	cg.writeEntry("showHibernateButton", m_showHibernateButton);
+	cg.writeEntry("showSleepButton", m_showSleepButton);
+	cg.writeEntry("showLogoutButton", m_showLogoutButton);
+	cg.writeEntry("showLockButton", m_showLockButton);
+	
         showButtons();
         if (formFactor() != Plasma::Horizontal && formFactor() != Plasma::Vertical) {
             resize(size().width(), (size().height() / oldButtonCount) * m_visibleButtons);
--- workspace/plasma/generic/applets/lock_logout/plasma-applet-lockout.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/lock_logout/plasma-applet-lockout.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -11,7 +11,7 @@
 Name[cs]=Odhlášení/uzamčení
 Name[csb]=Blokòwanié ekranu/Wëlogòwanié
 Name[da]=Lås/Log ud
-Name[de]=Bildschirmsperre und Abmeldung aus KDE
+Name[de]=Bildschirmsperre/Abmeldung
 Name[el]=Κλείδωμα/αποσύνδεση
 Name[en_GB]=Lock/Logout
 Name[eo]=Ŝloso/adiaŭo
--- workspace/plasma/generic/applets/devicenotifier/notifierdialog.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/devicenotifier/notifierdialog.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -648,6 +648,7 @@
         static_cast<QGraphicsLinearLayout*>(m_statusWidget->layout())->removeItem(m_statusDetailsText);
         m_statusExpandButton->setIcon(QIcon(svg->pixmap("restore")));
     }
+    delete svg;
 }
 
 void NotifierDialog::storageTeardownDone(Solid::ErrorType error, QVariant errorData, const QString & udi)
--- workspace/plasma/generic/applets/notifications/plasma-applet-notifications.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/notifications/plasma-applet-notifications.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -98,6 +98,7 @@
 Comment[fy]=Meldingen en taken sjen litte
 Comment[ga]=Taispeáin fógraí agus jabanna
 Comment[hr]=Prikazuje obavijesti i poslove
+Comment[hu]=eÉrtesítések és feladatok megjelenítés
 Comment[ia]=Monstrar notificationes e labores
 Comment[id]=Tampilan notifikasi dan tugas
 Comment[is]=Birting tilkynninga og verka
@@ -125,6 +126,7 @@
 Comment[sv]=Visa underrättelser och jobb
 Comment[tg]=Иттилооти огоҳиҳо ва амалҳо
 Comment[th]=แสดงการแจ้งให้ทราบและงานต่าง ๆ
+Comment[tr]=Bildirimleri ve görevleri göster
 Comment[uk]=Показ сповіщень і завдань
 Comment[x-test]=xxDisplay notifications and jobsxx
 Comment[zh_CN]=显示通知和任务
--- workspace/plasma/generic/applets/notifications/protocols/jobs/dbusjobprotocol.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/notifications/protocols/jobs/dbusjobprotocol.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -42,6 +42,13 @@
     if (m_engine) {
         Plasma::DataEngineManager::self()->unloadEngine(engineName);
     }
+
+    foreach (DBusJob *job, m_jobs) {
+        disconnect(job);
+        job->destroy();
+    }
+
+    m_jobs.clear();
 }
 
 
--- workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_cpu.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_cpu.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gu]=CPU મોનિટર
 Name[hi]=सीपीयू नीरीक्षक
 Name[hr]=Nadzornik CPU-a
+Name[hu]=CPU-monitor
 Name[ia]=Monitor de CPU
 Name[id]=Monitor CPU
 Name[is]=Eftirlit með notkun örgjörva
@@ -47,6 +48,7 @@
 Name[sv]=Övervakning av processoranvändning
 Name[tg]=Монитори CPU
 Name[th]=ติดตามการใช้งานตัวประมวลผลกลาง
+Name[tr]=İşlemci İzleyici
 Name[uk]=Використання процесора
 Name[x-test]=xxCPU Monitorxx
 Name[zh_CN]=CPU 监视器
--- workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_hwinfo.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_hwinfo.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gu]=હાર્ડવેર જાણકારી
 Name[hi]=हार्डवेयर जानकारी
 Name[hr]=Informacije o hardveru
+Name[hu]=Hardverjellemzők
 Name[ia]=Info Hardware
 Name[id]=Info Peranti Keras
 Name[is]=Vélbúnaðarupplýsingar
@@ -47,6 +48,7 @@
 Name[sv]=Hårdvaruinformation
 Name[tg]=Иттилооти сахтафзор
 Name[th]=ข้อมูลของฮาร์ดแวร์
+Name[tr]=Donanım Bilgileri
 Name[uk]=Відомості про обладнання
 Name[x-test]=xxHardware Infoxx
 Name[zh_CN]=硬件信息
@@ -79,7 +81,7 @@
 Comment[hne]=हार्डवेयर जानकारी देखाव
 Comment[hr]=Prikaz informacija o hardveru
 Comment[hsb]=Pokazuje informaciju wo hardware
-Comment[hu]=Hardverjellemzők
+Comment[hu]=Hardverjellemzők megjelenítése
 Comment[ia]=Monstrar info hardware
 Comment[id]=Tampilkan info peranti keras
 Comment[is]=Sýna upplýsingar um vélbúnað
--- workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_temperature.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_temperature.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[he]=טמפרטורת חומרה
 Name[hi]=हार्डवेयर तापमान
 Name[hr]=Temperatura hardvera
+Name[hu]=Hardverhőmérséklet
 Name[ia]=Temperatura Hardware
 Name[id]=Temperatur Peranti Keras
 Name[is]=Hitastig vélbúnaðar
--- workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_ram.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_ram.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gu]=મેમરી પરિસ્થિતિ
 Name[hi]=मेमोरी स्थिति
 Name[hr]=Stanje memorije
+Name[hu]=Memóriaállapot
 Name[ia]=Stato de Memoria
 Name[id]=Memori Status
 Name[is]=Staða minnis
@@ -47,6 +48,7 @@
 Name[sv]=Minnesstatus
 Name[tg]=Ҳолати хотира
 Name[th]=สถานะหน่วยความจำ
+Name[tr]=Bellek Durumu
 Name[uk]=Стан пам’яті
 Name[x-test]=xxMemory Statusxx
 Name[zh_CN]=内存状态
--- workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_net.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_net.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gu]=નેટવર્ક મોનિટર
 Name[hi]=नेटवर्क नरीक्षण
 Name[hr]=Nadzornik mreže
+Name[hu]=Hálózatfigyelő
 Name[ia]=Monitor de Rete
 Name[id]=Monitor Jaringan
 Name[is]=Netkerfisvaktari
@@ -49,6 +50,7 @@
 Name[sv]=Nätverksövervakning
 Name[tg]=Монитори шабака
 Name[th]=ติดตามการใช้งานเครือข่าย
+Name[tr]=Ağ İzleyici
 Name[uk]=Монітор мережі
 Name[x-test]=xxNetwork Monitorxx
 Name[zh_CN]=网络监视器
--- workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_hdd.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/system-monitor/plasma-applet-sm_hdd.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -19,6 +19,7 @@
 Name[gu]=હાર્ડ ડિસ્ક પરિસ્થિતિ
 Name[hi]=हार्ड डिस्क स्थिति
 Name[hr]=Stanje čvrsti diska
+Name[hu]=Merevlemez-állapot
 Name[ia]=Stato del Disco Dur
 Name[id]=Status Cakram Keras
 Name[is]=Staða harðra diska
@@ -47,6 +48,7 @@
 Name[sv]=Hårddiskstatus
 Name[tg]=Ҳолати диски компютерӣ
 Name[th]=สถานะของฮาร์ดดิสก์
+Name[tr]=Sabit Disk Durumu
 Name[uk]=Стан жорсткого диска
 Name[x-test]=xxHard Disk Statusxx
 Name[zh_CN]=硬盘状态
--- workspace/plasma/generic/applets/battery/battery.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/battery/battery.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -44,7 +44,7 @@
 class Battery : public Plasma::PopupApplet
 {
     Q_OBJECT
-    Q_PROPERTY(qreal labelAlpha READ labelAlpha WRITE setLabelAlpha NOTIFY labelAlphaChanged)
+    Q_PROPERTY(qreal labelAlpha READ labelAlpha WRITE setLabelAlpha )
     Q_PROPERTY(qreal acAlpha READ acAlpha WRITE setAcAlpha)
 
     public:
--- workspace/plasma/generic/applets/battery/battery.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/applets/battery/battery.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -46,6 +46,7 @@
 #include <KConfigDialog>
 #include <KGlobalSettings>
 #include <KPushButton>
+#include <KComboBox>
 
 #include <kworkspace/kworkspace.h>
 
@@ -510,7 +511,14 @@
         m_controlsLayout->addItem(m_profileLabel, row, 0);
 
         m_profileCombo = new Plasma::ComboBox(m_controls);
-        // This is necessary until Qt task #217874 is fixed
+        // Workaround for bug 219873
+#if (QT_VERSION >= QT_VERSION_CHECK(4, 7, 0))
+        m_profileCombo->nativeWidget()->setMaxVisibleItems(4);
+#else
+        // Value passed needs to be one less than intended on Qt < 4.7.0
+        m_profileCombo->nativeWidget()->setMaxVisibleItems(3);
+#endif
+        // This is necessary until QTBUG-2368 is fixed
         m_profileCombo->setZValue(110);
         connect(m_profileCombo, SIGNAL(activated(QString)),
                 this, SLOT(setProfile(QString)));
@@ -626,15 +634,15 @@
     if (batteryData["Plugged in"].toBool()) {
         const QString state = batteryData["State"].toString();
         if (state == "NoCharge") {
-            return i18n("%1% (charged)", batteryData["Percent"].toString());
             if (chargeChanging) {
                 *chargeChanging = true;
             }
+	    return i18n("%1% (charged)", batteryData["Percent"].toString());
         } else if (state == "Discharging") {
-            return i18n("%1% (discharging)", batteryData["Percent"].toString());
             if (chargeChanging) {
                 *chargeChanging = true;
             }
+            return i18n("%1% (discharging)", batteryData["Percent"].toString());
         }
 
         return i18n("%1% (charging)", batteryData["Percent"].toString());
--- workspace/plasma/generic/wallpapers/image/image.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/wallpapers/image/image.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -231,6 +231,7 @@
         connect(m_uiSlideshow.m_addDir, SIGNAL(clicked()), this, SLOT(modified()));
         connect(m_uiSlideshow.m_removeDir, SIGNAL(clicked()), this, SLOT(modified()));
         connect(m_uiSlideshow.m_slideshowDelay, SIGNAL(dateTimeChanged(QDateTime)), this, SLOT(modified()));
+	connect(m_uiSlideshow.m_dirlist, SIGNAL(currentRowChanged (int)), SLOT(updateDirs()));
     }
 
     connect(this, SIGNAL(settingsChanged(bool)), parent, SLOT(settingsChanged(bool)));
--- workspace/plasma/generic/wallpapers/image/image.h	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/wallpapers/image/image.h	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -77,10 +77,10 @@
         void wallpaperRetrieved(KJob *job);
         void newStuffFinished();
         void setConfigurationInterfaceModel();
+        void updateDirs();
 
     protected:
         void init(const KConfigGroup &config);
-        void updateDirs();
         void renderWallpaper(const QString& image = QString());
         void suspendStartup(bool suspend); // for ksmserver
         void calculateGeometry();
--- workspace/plasma/generic/runners/windows/plasma-runner-windows.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/windows/plasma-runner-windows.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -25,6 +25,7 @@
 Name[he]=חלונות
 Name[hi]=विंडोज़
 Name[hr]=Prozori
+Name[hu]=Ablakok
 Name[ia]=Windows
 Name[id]=Jendela
 Name[is]=Gluggar
--- workspace/plasma/generic/runners/kill/plasma-runner-kill.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/kill/plasma-runner-kill.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -23,6 +23,7 @@
 Name[he]=סיים פעולת יישומים
 Name[hi]=अनुप्रयोग खतम करो
 Name[hr]=Prekini aplikacije
+Name[hu]=Alkalmazások megszakítása
 Name[ia]=Terminar Applicationes
 Name[id]=Hentikan Aplikasi
 Name[is]=Loka forritum
@@ -81,6 +82,7 @@
 Comment[gl]=Detén programas que están a executarse
 Comment[he]=עצור יישומים הפועלים כעת
 Comment[hr]=Zaustavi aplikacije koje su trenutno pokrenute
+Comment[hu]=Jelenleg futó alkalmazások leállítása
 Comment[ia]=Stoppar applicationes que il es currentemente currente
 Comment[id]=Stop aplikasi yang saat ini tengah berjalan
 Comment[is]=Stöðva forrit sem eru keyrandi
--- workspace/plasma/generic/runners/kill/killrunner.cpp	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/kill/killrunner.cpp	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -104,6 +104,7 @@
         m_prepLock.lockForWrite();
         if (!m_processes) {
             m_processes = new KSysGuard::Processes();
+            m_processes->updateAllProcesses();
         }
     }
     m_prepLock.unlock();
--- workspace/plasma/generic/runners/kill/plasma-runner-kill_config.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/kill/plasma-runner-kill_config.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -30,6 +30,7 @@
 Name[he]=חסל יישומים
 Name[hi]=अनुप्रयोग खतम करो
 Name[hr]=Uništi aplikacije
+Name[hu]=Alkalmazások kilövése
 Name[ia]=Occider Applicationes
 Name[id]=Matikan Aplikasi
 Name[is]=Drepa forrit
@@ -39,7 +40,7 @@
 Name[km]=បញ្ឈប់​កម្មវិធី
 Name[kn]=ಅನ್ವಯಗಳನ್ನು ಅಂತ್ಯಗೊಳಿಸು
 Name[ko]=프로그램 죽이기
-Name[lt]=Uždaryti programas
+Name[lt]=Užverti programas
 Name[lv]=Nokaut programmas
 Name[mk]=Запирање на апликации
 Name[ml]=പ്രയോഗങ്ങളെ കൊല്ലുക
--- workspace/plasma/generic/runners/sessions/plasma-runner-sessions.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/sessions/plasma-runner-sessions.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -7,7 +7,7 @@
 Name[bn_IN]=ডেস্কটপের সেশান
 Name[ca]=Sessions d'escriptori
 Name[ca@valencia]=Sessions d'escriptori
-Name[cs]=Relace plochy
+Name[cs]=Sezení plochy
 Name[csb]=Sesëje pùltu
 Name[da]=Skrivebordssessioner
 Name[de]=Desktop-Sitzungen
@@ -107,7 +107,7 @@
 Comment[kn]=ಶೀಘ್ರ ಬಳಕೆದಾರ ಪರಿವರ್ತನೆ
 Comment[ko]=빠른 사용자 전환
 Comment[ku]=Derbasbûna lezgîn a bikarhêner
-Comment[lt]=Greitas naudotojų perjungimas
+Comment[lt]=Greitas vartotojų perjungimas
 Comment[lv]=Ātra lietotāju pārslēgšana
 Comment[mk]=Брзо менување корисници
 Comment[ml]=മറ്റൊരു ഉപയോക്താവാകുന്നത് അനുവദിയ്ക്കുന്നതിനുള്ള സംവിധാനം
--- workspace/plasma/generic/runners/windowedwidgets/plasma-runner-windowedwidgets.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/windowedwidgets/plasma-runner-windowedwidgets.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -43,6 +43,7 @@
 Name[sr@latin]=vidžeti s prozorom
 Name[sv]=Fönsterbaserade grafiska komponenter
 Name[th]=วิดเจ็ตที่เป็นหน้าต่างได้
+Name[tr]=Pencerelendirilmiş Gereçler
 Name[uk]=Віджети-вікна
 Name[x-test]=xxWindowed widgetsxx
 Name[zh_CN]=窗口化部件
@@ -64,6 +65,7 @@
 Comment[fr]=Trouve des éléments visuels Plasma qui peuvent êtres démarrés comme des fenêtres individuelles
 Comment[fy]=Sykje om Plasma widgets dy't as selfstannige finsters rinne kinne
 Comment[ga]=Aimsigh giuirléidí Plasma is féidir rith i bhfuinneog shaorsheasaimh
+Comment[hr]=Pronađi Plasma widgete koji se mogu pokrenuti kao zasebni prozori
 Comment[ia]=Trovar widgets (elementos graphic) de plasma que on pote executar como fenestras sole
 Comment[id]=Cari widget Plasma yang dapat dijalankan sebagai jendela mandiri
 Comment[is]=Finnur Plasmagræjur sem hægt er að keyra sem sjálfstæð forrit
--- workspace/plasma/generic/runners/solid/plasma-runner-solid.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/runners/solid/plasma-runner-solid.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -23,6 +23,7 @@
 Name[he]=התקנים
 Name[hi]=औज़ार
 Name[hr]=Uređaji
+Name[hu]=Eszközök
 Name[ia]=Dispositivos
 Name[id]=Divais
 Name[is]=Tæki
@@ -80,6 +81,7 @@
 Comment[ga]=Bainistigh gléasanna inbhainte
 Comment[he]=מנהל התקנים נשלפים
 Comment[hr]=Upravlja uklonjivim uređajima
+Comment[hu]=Cserélhető eszközök kezelése
 Comment[ia]=Gerer dispositivos removibile
 Comment[id]=Kelola divais dapat dilepas
 Comment[is]=Sýsla með fjarlægjanleg tæki
--- workspace/plasma/generic/scriptengines/python/plasma-scriptengine-wallpaper-python.desktop	(.../tags/KDE/4.5.1/kdebase)	(wersja 1179156)
+++ workspace/plasma/generic/scriptengines/python/plasma-scriptengine-wallpaper-python.desktop	(.../branches/KDE/4.5/kdebase)	(wersja 1179156)
@@ -28,7 +28,7 @@
 Name[km]=ផ្ទាំង​រូបភាព​របស់ Python
 Name[kn]=ಪೈಥಾನ್ ಹಿನ್ನೆಲೆ ತೆರೆಚಿತ್ರ (ವಾಲ್ ಪೇಪರ್)
 Name[ko]=파이썬 배경 그림
-Name[lt]=Python darbalaukio fonas
+Name[lt]=Python darbastalio fonas
 Name[lv]=Python ekrāntapete
 Name[ml]=പൈത്തണ്‍ ചുവര്‍ചിത്രം
 Name[nb]=Python bakgrunnsbilde
